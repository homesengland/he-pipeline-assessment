<div>
    <div>
        <div class="elsa-relative elsa-z-10 elsa-flex-shrink-0 elsa-flex elsa-h-16 elsa-bg-white elsa-border-b elsa-border-gray-200">
            <div class="elsa-flex-1 elsa-px-4 elsa-flex elsa-justify-between sm:elsa-px-6 lg:elsa-px-8">
                <div class="elsa-flex-1 elsa-flex">
                    <form class="elsa-w-full elsa-flex md:ml-0" [formGroup]="searchForm" (ngSubmit)="onSearchSubmit()">
                        <label htmlFor="search_field" class="elsa-sr-only">Search</label>
                        <div class="elsa-relative elsa-w-full elsa-text-gray-400 focus-within:elsa-text-gray-600">
                            <div class="elsa-absolute elsa-inset-y-0 elsa-left-0 elsa-flex elsa-items-center elsa-pointer-events-none">
                                <svg class="elsa-h-5 elsa-w-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" clip-rule="evenodd"
                                          d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" />
                                </svg>
                            </div>
                            <input name="searchTerm"
                                   id="searchTerm"
                                   formControlName="searchTerm"
                                   class="elsa-block elsa-w-full elsa-h-full elsa-pl-8 elsa-pr-3 elsa-py-2 elsa-rounded-md elsa-text-gray-900 elsa-placeholder-gray-500 focus:elsa-placeholder-gray-400 sm:elsa-text-sm elsa-border-0 focus:elsa-outline-none focus:elsa-ring-0"
                                   placeholder='Search'
                                   type="search" />
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="elsa-mt-8 sm:elsa-block">
            <div class="elsa-align-middle elsa-inline-block elsa-min-w-full elsa-border-b elsa-border-gray-200">
                <table class="elsa-min-w-full">
                    <thead>
                        <tr class="elsa-border-t elsa-border-gray-200">
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                <input #selectAllCheckbox type="checkbox" value="true" [checked]="getSelectAllState()"
                                       (change)="onSelectAllCheckChange($event)"
                                       class="focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded"/> 
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                ID
                            </th>
                            <th class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Correlation ID
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Workflow
                            </th>
                            <th class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Version
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Instance Name
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Status
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Created
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Finished
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Last Executed
                            </th>
                            <th class="elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider">
                                Faulted
                            </th>
                            <th class="elsa-pr-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider"></th>
                        </tr>
                    </thead>
                    <tbody class="elsa-bg-white elsa-divide-y elsa-divide-gray-100">
<!--                         {workflowInstances.map(workflowInstance => {
                        const workflowBlueprint = workflowBlueprints.find(x => x.versionId == workflowInstance.definitionVersionId) ?? {
                        name: 'Not Found',
                        displayName: '(Workflow definition not found)'
                        };
                        const displayName = workflowBlueprint.displayName || workflowBlueprint.name || '(Untitled)';
                        const statusColor = this.getStatusColor(workflowInstance.workflowStatus);
                        const instanceViewUrl = `${basePath}/workflow-instances/${workflowInstance.id}`;
                        const correlationId = !!workflowInstance.correlationId ? workflowInstance.correlationId : ''
                        const correlationListViewUrl = `${basePath}/workflow-instances?correlationId=${correlationId}`;
                        const blueprintViewUrl = `${basePath}/workflow-registry/${workflowInstance.definitionId}`;
                        const instanceName = !workflowInstance.name ? '' : workflowInstance.name;
                        const isSelected = this.selectedWorkflowInstanceIds.findIndex(x => x === workflowInstance.id) >= 0;
                        const createdAt = moment(workflowInstance.createdAt);
                        const finishedAt = !!workflowInstance.finishedAt ? moment(workflowInstance.finishedAt) : null;
                        const lastExecutedAt = !!workflowInstance.lastExecutedAt ? moment(workflowInstance.lastExecutedAt) : null;
                        const faultedAt = !!workflowInstance.faultedAt ? moment(workflowInstance.faultedAt) : null;
                        const isFaulted = workflowInstance.workflowStatus == WorkflowStatus.Faulted;

                        const contextMenuItems = [
                        {text: t('Table.ContextMenu.View'), anchorUrl: instanceViewUrl, icon: renderViewIcon()},
                        {
                        text: t('Table.ContextMenu.Cancel'),
                        clickHandler: e => this.onCancelClick(e, workflowInstance),
                        icon: renderCancelIcon()
                        },
                        ...[isFaulted ? {
                        text: t('Table.ContextMenu.Retry'),
                        clickHandler: e => this.onRetryClick(e, workflowInstance),
                        icon: renderRetryIcon()
                        } : null],
                        {
                        text: t('Table.ContextMenu.Delete'),
                        clickHandler: e => this.onDeleteClick(e, workflowInstance),
                        icon: renderDeleteIcon()
                        }
                        ].filter(x => x != null);

                        return -->
                        <tr *ngFor="let instance of workflowInstancesTableValues.items">
                            <td class="elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900">

                                <input type="checkbox" [value]="instance.workflowInstanceSummary.id" (change)="onWorkflowInstanceCheckChange($event, instance.workflowInstanceSummary)"
                                       [checked]="instance.isSelected"
                                       class="focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 elsa-rounded" />
                            </td>
                            <td class="elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900">
                                <a [routerLink]="instance.instanceViewUrl" class="elsa-truncate hover:elsa-text-gray-600">
                                    {{ instance.workflowInstanceSummary.id  }}
                                </a>
                            </td>
                            <td class="elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900">
                                  <a [routerLink]="instance.correlationListViewUrl" class="elsa-truncate hover:elsa-text-gray-600">
                                    {{ instance.correlationId }}
                                </a>
                            </td>
                            <td class="elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900 elsa-text-left">
                                <a [routerLink]="instance.blueprintViewUrl" class="elsa-truncate hover:elsa-text-gray-600">
                                    {{ instance.displayName  }}
                                </a>
                            </td>
                            <td class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-right elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-uppercase">
                                {{instance.workflowInstanceSummary.version}}
                            </td>
                            <td class="elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900 elsa-text-left">
                                <a [routerLink]="instance.instanceViewUrl" class="elsa-truncate hover:elsa-text-gray-600">
                                    {{ instance.instanceName  }}
                                </a>
                            </td>
                            <td class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-right">
                                <div class="elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2">
                                    <div class="flex-shrink-0 elsa-w-2-5 elsa-h-2-5 elsa-rounded-full elsa-bg-red-600"></div>
                                    <span>{{instance.workflowInstanceSummary.workflowStatus}}</span>
                                </div>
                            </td>
                            <td class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left">
                                {{instance.createdAt}}
                            </td>
                            <td class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left">
                                {{instance.finishedAt}}
                            </td>
                            <td class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left">
                                {{instance.lastExecutedAt}}
                            </td>
                            <td class="hidden md:elsa-table-cell elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-text-left">
                                {{instance.faultedAt}}
                            </td>
                            <td class="elsa-pr-6">

                                <!--                                 <elsa-context-menu history={this.history} menuItems={contextMenuItems} /> -->
                            </td>
                        </tr>

                    </tbody>
                </table>
                <workflow-pager [page]="currentPage" [pageSize]="currentPageSize" [totalCount]="totalCount" (Paged)="onPaged" /> 
            </div>
        </div>
    </div>
</div>
