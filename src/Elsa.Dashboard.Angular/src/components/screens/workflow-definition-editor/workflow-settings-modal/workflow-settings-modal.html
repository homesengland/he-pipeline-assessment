<modal-dialog>
  <div slot="content" class="elsa-py-8 elsa-pb-0">
    <form>
      <div class="mb-8 elsa-px-8">
        <div class="elsa-border-b elsa-border-gray-200">
          <nav class="-elsa-mb-px elsa-flex elsa-space-x-8" aria-label="Tabs">
            <a
              *ngFor="let tab of tabs"
              href="#"
              (click)="onTabClick($event, tab)"
              [ngClass]="tab === selectedTab ? selectedClass : inactiveClass"
              class="elsa-whitespace-nowrap elsa-border-b-2 elsa-px-1 elsa-py-4 elsa-text-sm elsa-font-medium"
            >
              {{ tab }}
            </a>
          </nav>
        </div>
      </div>

      <!-- Render selected tab content -->
      <ng-container [ngTemplateOutlet]="renderSelectedTab()"></ng-container>

      <div class="elsa-pt-5">
        <div class="elsa-bg-gray-50 elsa-px-4 elsa-py-3 sm:elsa-px-6 sm:elsa-flex sm:elsa-flex-row-reverse">
          <button
            type="button"
            (click)="onSaveClick($event)"
            class="elsa-ml-0 elsa-inline-flex elsa-w-full elsa-justify-center elsa-rounded-md elsa-border elsa-border-transparent elsa-bg-blue-600 elsa-px-4 elsa-py-2 elsa-text-base elsa-font-medium elsa-text-white elsa-shadow-sm hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm"
          >
            Save
          </button>
          <button
            type="button"
            (click)="onCancelClick()"
            class="elsa-mt-3 elsa-inline-flex elsa-w-full elsa-justify-center elsa-rounded-md elsa-border elsa-border-gray-300 elsa-bg-white elsa-px-4 elsa-py-2 elsa-text-base elsa-font-medium elsa-text-gray-700 elsa-shadow-sm hover:elsa-bg-gray-50 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-mt-0 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm"
          >
            Cancel
          </button>
        </div>
      </div>
    </form>
  </div>
  <div slot="buttons"></div>

  <!-- Workflow Context Tab -->
  <ng-template #workflowContextTab>
    <div class="elsa-flex elsa-px-8">
      <div class="elsa-w-full elsa-space-y-8">
        <form-text-input
          [context]="formContext"
          [fieldName]="workflowDefinitionInternal.contextOptions.contextType"
          label="Type"
          [value]="workflowDefinitionInternal.contextOptions.contextType"
          hint="The fully qualified workflow context type name."
          fieldId="workflowContextType"
        >
        </form-text-input>
        <div class="elsa-w-full elsa-space-y-8">
          <form-select-field
            [context]="formContext"
            [fieldName]="workflowDefinitionInternal.contextOptions.contextFidelity"
            label="Fidelity"
            [value]="workflowDefinitionInternal.contextOptions.contextFidelity"
            [options]="fidelityOptions"
            hint="The workflow context refresh fidelity controls the behavior of when to load and persist the workflow context."
            fieldId="workflowContextFidelity"
          >
          </form-select-field>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Variables Tab -->
  <ng-template #variablesTab>
    <div class="elsa-flex elsa-px-8">
      <div class="elsa-h-30 elsa-w-full elsa-space-y-8">
        <monaco-editor
          [value]="variablesValue"
          [language]="variablesLanguage"
          editorHeight="30em"
          (propagateChange)="onMonacoValueChanged($any($event))"
          #monacoVariablesEditor
          (onInit)="onMonacoInit($event)"
        >
        </monaco-editor>
      </div>
    </div>
  </ng-template>

  <!-- Advanced Tab -->
  <ng-template #advancedTab>
    <div class="elsa-flex elsa-px-8">
      <div class="elsa-w-full elsa-space-y-8">
        <form-text-input
          [context]="formContext"
          fieldName="tag"
          label="Tag"
          [value]="workflowDefinition?.tag ?? ''"
          hint="Tags can be used to query workflow definitions with."
          fieldId="tag"
        >
        </form-text-input>
        <div class="elsa-w-full elsa-space-y-8">
          <form-select-field
            [context]="formContext"
            fieldName="persistenceBehavior"
            label="Persistence Behavior"
            [value]="workflowDefinition?.persistenceBehavior"
            [options]="persistenceBehaviorOptions"
            hint="The persistence behavior controls how often a workflow instance is persisted during workflow execution."
            fieldId="workflowContextFidelity"
          >
          </form-select-field>
        </div>
        <div class="elsa-w-full elsa-space-y-8" *ngIf="workflowChannelOptions?.length > 0">
          <form-select-field
            [context]="formContext"
            fieldName="channel"
            label="Channel"
            [value]="workflowDefinition?.channel"
            [options]="workflowChannelOptions"
            hint="Select a channel for this workflow to execute in."
            fieldId="channel"
          >
          </form-select-field>
        </div>
        <div class="elsa-w-full elsa-space-y-8">
          <form-check-box
            [context]="formContext"
            fieldName="isSingleton"
            label="Singleton"
            [value]="workflowDefinition?.isSingleton"
            hint="Singleton workflows will only have one active instance executing at a time."
            fieldId="isSingleton"
          >
          </form-check-box>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Settings Tab -->
  <ng-template #settingsTab>
    <div class="elsa-flex elsa-px-8">
      <div class="elsa-w-full elsa-space-y-8">
        <form-text-input
          [context]="formContext"
          fieldName="name"
          label="Name"
          [value]="workflowDefinition?.name ?? ''"
          hint="The technical name of the workflow."
          fieldId="workflowName"
        ></form-text-input>
        <div class="elsa-w-full elsa-space-y-8">
          <form-text-input
            [context]="formContext"
            fieldName="displayName"
            label="Display Name"
            [value]="workflowDefinition?.displayName ?? ''"
            hint="A user-friendly display name of the workflow."
            fieldId="workflowDisplayName"
          >
          </form-text-input>
        </div>
        <div class="elsa-w-full elsa-space-y-8">
          <form-text-input [context]="formContext" fieldName="description" label="Description" [value]="workflowDefinition?.description ?? ''" fieldId="workflowDescription">
          </form-text-input>
        </div>
      </div>
    </div>
  </ng-template>
</modal-dialog>
