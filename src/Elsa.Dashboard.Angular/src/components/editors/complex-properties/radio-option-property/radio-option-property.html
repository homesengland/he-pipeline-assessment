<div>
  <multi-expression-editor #multiExpressionEditor
                           [label]="propertyDescriptor().label"
                           [defaultSyntax]="defaultSyntax"
                           [supportedSyntaxes]="supportedSyntaxForMultiExpressionEditor"
                           [context]="context"
                           [expressions]="{ Json: json }"
                           editor-height="20rem"
                           (expressionChanged)="onMultiExpressionEditorValueChanged($event)"
                           (syntaxChanged)="onMultiExpressionEditorSyntaxChanged($event)">

    <table class="elsa-min-w-full elsa-divide-y elsa-divide-gray-200"
           #containerTable>
      <ng-container *ngFor="let caseEditor of caseEditors">
        <tbody [attr.key]="caseEditor.keyId">
          <tr>
            <th class="sortablejs-custom-handle">
              <span [innerHTML]="activityIconProvider.getIcon('Sort', null)"></span>
            </th>
            <td></td>
            <td class="elsa-pt-1 elsa-pr-2 elsa-text-right">
                <button type="button"
                      (click)="onDeleteOptionClick(caseEditor.radioOption)"
                        class="elsa-h-5 elsa-w-5 elsa-mx-auto elsa-outline-none focus:elsa-outline-none">
                <span [innerHTML]="activityIconProvider.getIcon('TrashBinOutline', null)"></span>
                </button>
            </td>
          </tr>
          <tr>
            <th class="elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-tracking-wider elsa-w-2/12">Identifier</th>
            <td class="elsa-py-2" colspan="2" style="width: 100%">
              <input type="text"
                     [value]="caseEditor.radioOption.name"
                     (input)="UpdateName($event, caseEditor.radioOption)"
                     class="focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300" />
            </td>
          </tr>
          <tr>
            <th class="elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-tracking-wider elsa-w-2/12">Answer</th>
            <td class="elsa-py-2" colspan="2" style="width: 100%">
              <div class="elsa-mt-1 elsa-relative elsa-rounded-md elsa-shadow-sm elsa-text-box">
                <expression-editor #expressionEditor
                                   [key]="caseEditor.key"
                                   [expression]="caseEditor.expression"
                                   [language]="caseEditor.monacoLanguage"
                                   [singleLine]="false"
                                   [editorHeight]="editorHeight"
                                   padding="elsa-pt-1.5 elsa-pl-1 elsa-pr-28"
                                   (expressionChanged)="CustomUpdateExpression($any($event), caseEditor.radioOption, caseEditor.radioOption.syntax)">
                </expression-editor>
                <div class="elsa-absolute elsa-inset-y-0 elsa-right-0 elsa-flex elsa-items-center elsa-select">
                  <select (change)="UpdateSyntax($event, caseEditor.radioOption, caseEditor.radioOption.syntax)"
                          class="focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-h-full elsa-py-0 elsa-pl-2 elsa-pr-7 elsa-border-transparent elsa-bg-transparent elsa-text-gray-500 sm:elsa-text-sm elsa-rounded-md elsa-select">
                    <option *ngFor="let syntax of caseEditor.supportedSyntaxes" [selected]="syntax === caseEditor.radioOption.syntax">{{ syntax }}</option>
                  </select>
                </div>
              </div>
            </td>
          </tr>
          <tr (click)="onToggleOptions(caseEditor.index)">
            <th class="elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-text-left elsa-tracking-wider elsa-w-2/12"
                colspan="3"
                style="cursor: zoom-in">
              Options
            </th>
            <td></td>
            <td></td>
          </tr>
          <tr [style.display]="caseEditor.optionsDisplay">
            <th class="elsa-py-3 elsa-text-left elsa-text-xs elsa-font-medium elsa-text-gray-500 elsa-tracking-wider elsa-w-2/12">Pre Populated</th>
            <td class="elsa-py-2 pl-5" style="width: 100%">
              <div class="elsa-mt-1 elsa-relative elsa-rounded-md elsa-shadow-sm elsa-text-box">
                <expression-editor [key]="caseEditor.key"
                                   #prePopulatedExpressionEditor
                                   [expression]="caseEditor.prePopulatedExpression"
                                   [language]="caseEditor.prePopulatedLanguage"
                                   [singleLine]="false"
                                   editorHeight="2.75em"
                                   padding="elsa-pt-1.5 elsa-pl-1 elsa-pr-28"
                                   (expressionChanged)="CustomUpdateExpression($any($event), caseEditor.radioOption, radioOptionsSyntaxPrePopulated)">
                </expression-editor>
                <div class="elsa-absolute elsa-inset-y-0 elsa-right-0 elsa-flex elsa-items-center elsa-select">
                  <select (change)="UpdateSyntax($event, caseEditor.radioOption, caseEditor.prePopulatedExpressionEditor)"
                          class="focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-h-full elsa-py-0 elsa-pl-2 elsa-pr-7 elsa-border-transparent elsa-bg-transparent elsa-text-gray-500 sm:elsa-text-sm elsa-rounded-md elsa-select">
                    <option *ngFor="let syntax of onlyJavaScriptSyntaxes" [selected]="true">{{ syntax }}</option>
                  </select>
                </div>
              </div>
            </td>
            <td></td>
          </tr>
        </tbody>
      </ng-container>
    </table>

    <button type="button"
            (click)="onAddOptionClick()"
            class="elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-transparent elsa-shadow-sm elsa-text-sm elsa-font-medium elsa-rounded-md elsa-text-white elsa-bg-blue-600 hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 elsa-mt-2">
      <span [innerHTML]="activityIconProvider.getIcon('Plus', null)"></span>
      Add Answer
    </button>
  </multi-expression-editor>
</div>
