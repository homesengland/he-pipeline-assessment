{"version":3,"file":"forms-Al708PIs.js","sources":["src/utils/forms.tsx"],"sourcesContent":["// Supports hierarchical field names, e.g. 'foo.bar.baz`, which will map to e.g. { foo: { bar: { baz: ''} } }.\r\nimport {Event, h} from \"@stencil/core\";\r\n\r\nexport interface SelectOption {\r\n  value: string;\r\n  text: string;\r\n}\r\n\r\nexport class FormContext {\r\n\r\n  constructor(model: any, updater: (model: any) => any) {\r\n    this.model = model;\r\n    this.updater = updater;\r\n  }\r\n\r\n  public model: any;\r\n  public updater: (model: any) => any;\r\n}\r\n\r\nexport function textInput(context: FormContext, fieldName: string, label: string, value: string, hint?: string, fieldId?: string, readonlyField?: boolean) {\r\n  fieldId = fieldId || fieldName\r\n  return (\r\n    <div>\r\n      <label htmlFor={fieldName} class=\"block elsa-text-sm elsa-font-medium elsa-text-gray-700\">\r\n        {label}\r\n      </label>\r\n      <div class=\"elsa-mt-1\">\r\n        {readonlyField ? <input type=\"text\" readonly id={fieldId} name={fieldName} value={value}\r\n               class=\"focus:elsa-ring-blue-500 focus:elsa-border-blue-500 block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300\"/>\r\n          : <input type=\"text\" id={fieldId} name={fieldName} value={value} onChange={e => onTextInputChange(e, context)}\r\n                   class=\"focus:elsa-ring-blue-500 focus:elsa-border-blue-500 block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300\"/>}\r\n      </div>\r\n      {hint && hint.length > 0 ? <p class=\"elsa-mt-2 elsa-text-sm elsa-text-gray-500\">{hint}</p> : undefined}\r\n    </div>);\r\n}\r\n\r\nexport function checkBox(context: FormContext, fieldName: string, label: string, checked: boolean, hint?: string, fieldId?: string) {\r\n  fieldId = fieldId || fieldName\r\n  return (\r\n    <div class=\"elsa-relative elsa-flex elsa-items-start\">\r\n      <div class=\"elsa-flex elsa-items-center elsa-h-5\">\r\n        <input id={fieldId} name={fieldName} type=\"checkbox\" value=\"true\" checked={checked} onChange={e => onCheckBoxChange(e, context)} class=\"focus:elsa-ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300 rounded\"/>\r\n      </div>\r\n      <div class=\"elsa-ml-3 elsa-text-sm\">\r\n        <label htmlFor={fieldId} class=\"elsa-font-medium elsa-text-gray-700\">{label}</label>\r\n        {hint && hint.length > 0 ? <p class=\"elsa-text-gray-500\">{hint}</p> : undefined}\r\n      </div>\r\n    </div>);\r\n}\r\n\r\nexport function textArea(context: FormContext, fieldName: string, label: string, value: string, hint?: string, fieldId?: string) {\r\n  fieldId = fieldId || fieldName\r\n  return (\r\n    <div>\r\n      <label htmlFor={fieldName} class=\"block elsa-text-sm elsa-font-medium elsa-text-gray-700\">\r\n        {label}\r\n      </label>\r\n      <div class=\"elsa-mt-1\">\r\n        <textarea id={fieldId} name={fieldName} value={value} onChange={e => onTextAreaChange(e, context)} rows={3}\r\n                  class=\"focus:elsa-ring-blue-500 focus:elsa-border-blue-500 block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300\"/>\r\n      </div>\r\n      {hint && hint.length > 0 ? <p class=\"elsa-mt-2 elsa-text-sm elsa-text-gray-500\">{hint}</p> : undefined}\r\n    </div>);\r\n}\r\n\r\nexport function selectField(context: FormContext, fieldName: string, label: string, value: string, options: Array<SelectOption>, hint?: string, fieldId?: string) {\r\n  fieldId = fieldId || fieldName\r\n  return (\r\n    <div>\r\n      <label htmlFor={fieldName} class=\"block elsa-text-sm elsa-font-medium elsa-text-gray-700\">\r\n        {label}\r\n      </label>\r\n      <div class=\"elsa-mt-1\">\r\n        <select id={fieldId} name={fieldName} onChange={e => onSelectChange(e, context)} class=\"block focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-w-full elsa-shadow-sm sm:elsa-text-sm elsa-border-gray-300 elsa-rounded-md\">\r\n          {options.map(item => {\r\n            const selected = item.value === value;\r\n            return <option value={item.value} selected={selected}>{item.text}</option>;\r\n          })}\r\n        </select>\r\n      </div>\r\n      {hint && hint.length > 0 ? <p class=\"elsa-mt-2 elsa-text-sm elsa-text-gray-500\">{hint}</p> : undefined}\r\n    </div>);\r\n}\r\n\r\nexport function section(title: string, subTitle?: string) {\r\n  return <div>\r\n    <h3 class=\"elsa-text-lg elsa-leading-6 elsa-font-medium elsa-text-gray-900\">\r\n      {title}\r\n    </h3>\r\n    {!!subTitle ? (\r\n        <p class=\"elsa-mt-1 elsa-max-w-2xl elsa-text-sm elsa-text-gray-500\">\r\n          {subTitle}\r\n        </p>)\r\n      : undefined}\r\n  </div>\r\n}\r\n\r\nexport function updateField<T>(context: FormContext, fieldName: string, value: T) {\r\n  const fieldNameHierarchy = fieldName.split('.');\r\n  let clone = {...context.model};\r\n  let current = clone;\r\n\r\n  for (const name of fieldNameHierarchy.slice(0, fieldNameHierarchy.length - 1)) {\r\n    if (!current[name])\r\n      current[name] = {};\r\n\r\n    current = current[name];\r\n  }\r\n\r\n  const leafFieldName = fieldNameHierarchy[fieldNameHierarchy.length-1];\r\n  current[leafFieldName] = value;\r\n\r\n  context.model = clone;\r\n  context.updater(clone);\r\n}\r\n\r\nexport function onTextInputChange(e: Event, context: FormContext) {\r\n  const element = e.target as HTMLInputElement;\r\n  updateField(context, element.name, element.value.trim());\r\n}\r\n\r\nexport function onTextAreaChange(e: Event, context: FormContext) {\r\n  const element = e.target as HTMLTextAreaElement;\r\n  updateField(context, element.name, element.value.trim());\r\n}\r\n\r\nexport function onCheckBoxChange(e: Event, context: FormContext) {\r\n  const element = e.target as HTMLInputElement;\r\n  updateField(context, element.name, element.checked);\r\n}\r\n\r\nexport function onSelectChange(e: Event, context: FormContext) {\r\n  const element = e.target as HTMLSelectElement;\r\n  updateField(context, element.name, element.value.trim());\r\n}\r\n"],"names":[],"mappings":"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"}