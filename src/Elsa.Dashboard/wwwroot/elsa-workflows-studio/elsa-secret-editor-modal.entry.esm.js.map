{"version":3,"file":"elsa-secret-editor-modal.entry.esm.js","sources":["src/modules/credential-manager/services/oauth2.client.ts","src/modules/credential-manager/elsa-secret-editor-modal/elsa-secret-editor-modal.tsx"],"sourcesContent":["import { createHttpClient } from '../../../services/elsa-client';\n\nlet _elsaOauth2Client: ElsaOauth2Client = null;\n\nexport const createElsaOauth2Client = async function (serverUrl: string): Promise<ElsaOauth2Client> {\n\n  if (!!_elsaOauth2Client)\n    return _elsaOauth2Client;\n\n  const httpClient = await createHttpClient(serverUrl);\n\n  _elsaOauth2Client = {\n    oauth2Api: {\n      getUrl: async secretId => {\n        const response = await httpClient.get<string>(`v1/oauth2/url/${secretId}`);\n        return response.data;\n      }\n    }\n  }\n\n  return _elsaOauth2Client;\n}\n\nexport interface ElsaOauth2Client {\n  oauth2Api: Oauth2Api;\n}\n\nexport interface Oauth2Api {\n  getUrl(secretId: string): Promise<string>;\n}\n","import { Component, h, Host, Prop, State } from \"@stencil/core\";\r\nimport { i18n } from \"i18next\";\r\nimport { initializeMonacoWorker } from \"../../../components/controls/elsa-monaco/elsa-monaco-utils\";\r\nimport { resources } from \"../../../components/controls/elsa-pager/localizations\";\r\nimport { loadTranslations } from \"../../../components/i18n/i18n-loader\";\r\nimport { eventBus, propertyDisplayManager } from \"../../../services\";\r\nimport { FormContext, textInput } from \"../../../utils/forms\";\r\nimport secretState from \"../utils/secret.store\";\r\nimport { SecretDescriptor, SecretEditorRenderProps, SecretModel, SecretPropertyDescriptor } from \"../models/secret.model\";\r\nimport { SecretEventTypes } from \"../models/secret.events\";\r\nimport state from '../../../utils/store';\r\nimport { SyntaxNames } from '../../../models';\r\nimport { createElsaOauth2Client } from '../services/oauth2.client';\r\nimport { createElsaSecretsClient } from '../services/credential-manager.client';\r\n\r\n@Component({\r\n    tag: 'elsa-secret-editor-modal',\r\n    shadow: false\r\n})\r\nexport class ElsaSecretEditorModal {\r\n  @Prop({ attribute: 'monaco-lib-path' }) monacoLibPath: string;\r\n  @Prop() culture: string;\r\n  @Prop() serverUrl: string;\r\n  @State() secretModel: SecretModel;\r\n  @State() secretDescriptor: SecretDescriptor;\r\n  @State() renderProps: SecretEditorRenderProps = {};\r\n  @State() preventClosing: boolean;\r\n  @State() updateCounter = 0;// Used to force update, when a property changes value\r\n  i18next: i18n;\r\n  dialog: HTMLElsaModalDialogElement;\r\n  formContext: FormContext;\r\n\r\n  timestamp: Date = new Date();\r\n\r\n  connectedCallback() {\r\n    eventBus.on(SecretEventTypes.SecretsEditor.Show, this.onShowSecretEditor);\r\n    eventBus.on(SecretEventTypes.SecretsLoaded, this.onSecretsLoaded);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    eventBus.detach(SecretEventTypes.SecretsEditor.Show, this.onShowSecretEditor);\r\n    eventBus.detach(SecretEventTypes.SecretsLoaded, this.onSecretsLoaded);\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    const monacoLibPath = this.monacoLibPath ?? state.monacoLibPath;\r\n    await initializeMonacoWorker(monacoLibPath);\r\n    this.i18next = await loadTranslations(this.culture, resources);\r\n  }\r\n\r\n  t = (key: string) => this.i18next.t(key);\r\n\r\n  updateSecret(formData: FormData, secret: SecretModel) {\r\n    const secretDescriptor = this.secretDescriptor;\r\n    const inputProperties: Array<SecretPropertyDescriptor> = secretDescriptor.inputProperties;\r\n\r\n    for (const property of inputProperties)\r\n      propertyDisplayManager.update(secret, property, formData);\r\n  }\r\n\r\n  get isAuthorizeButtonVisible() {\r\n    if (!this.secretModel) {\r\n      return false;\r\n    }\r\n    const grantType = this.secretModel.properties.find(x => x.name === 'GrantType')?.expressions[SyntaxNames.Literal];\r\n    const isTokenMissing = this.secretModel.properties.findIndex(x => x.name === 'Token') === -1;\r\n    return grantType === 'authorization_code' && isTokenMissing;\r\n  }\r\n\r\n  get isAuthorizeButtonDisabled() {\r\n    const authUrl = this.secretModel.properties.find(x => x.name === 'AuthorizationUrl')?.expressions[SyntaxNames.Literal];\r\n    const tokenUrl = this.secretModel.properties.find(x => x.name === 'AccessTokenUrl')?.expressions[SyntaxNames.Literal];\r\n    const clientId = this.secretModel.properties.find(x => x.name === 'ClientId')?.expressions[SyntaxNames.Literal];\r\n    const clientSecret = this.secretModel.properties.find(x => x.name === 'ClientSecret')?.expressions[SyntaxNames.Literal];\r\n\r\n    return !authUrl || !tokenUrl || !clientId || !clientSecret;\r\n  }\r\n\r\n  async componentWillRender() {\r\n    const secretDescriptor: SecretDescriptor = this.secretDescriptor || {\r\n      displayName: '',\r\n      type: '',\r\n      outcomes: [],\r\n      category: '',\r\n      browsable: false,\r\n      inputProperties: [],\r\n      description: '',\r\n      customAttributes: {}\r\n    };\r\n\r\n    const defaultProperties = secretDescriptor.inputProperties.filter(x => !x.category || x.category.length == 0);\r\n\r\n    const secretModel: SecretModel = this.secretModel || {\r\n      type: '',\r\n      id: '',\r\n      name: '',\r\n      properties: [],\r\n    };\r\n\r\n    const t = this.t;\r\n\r\n    this.renderProps = {\r\n      secretDescriptor: secretDescriptor,\r\n      secretModel,\r\n      defaultProperties,\r\n    };\r\n  }\r\n\r\n  async onCancelClick() {\r\n    await this.hide(true);\r\n  }\r\n\r\n  async onGetConsentClick(e: Event) {\r\n    e.preventDefault();\r\n\r\n    const client = await createElsaSecretsClient(this.serverUrl);\r\n    const secret = await client.secretsApi.save(this.secretModel);\r\n\r\n    this.secretModel = secret;\r\n    const oauthClient = await createElsaOauth2Client(this.serverUrl);\r\n    const url = await oauthClient.oauth2Api.getUrl(secret.id);\r\n    window.open(url, '_blank', 'location=yes,height=600,width=600,scrollbars=yes,status=yes');\r\n  }\r\n\r\n  onSubmit = async (e: Event) => {\r\n    e.preventDefault();\r\n    const form: any = e.target;\r\n    const formData = new FormData(form);\r\n    this.updateSecret(formData, this.secretModel);\r\n    const client = await createElsaSecretsClient(this.serverUrl);\r\n    await client.secretsApi.save(this.secretModel);\r\n\r\n    await this.hide(true);\r\n\r\n    await eventBus.emit(SecretEventTypes.SecretUpdated, this, this.secretModel);\r\n  };\r\n\r\n  onSecretsLoaded = async (secrets: SecretModel[]) => {\r\n    if (!this.secretModel) {\r\n      return;\r\n    }\r\n    var secret = secrets.find(x => x.id === this.secretModel.id);\r\n    if (secret) {\r\n      this.secretModel = secret;\r\n    }\r\n  };\r\n\r\n  onShowSecretEditor = async (secret: SecretModel, animate: boolean) => {\r\n    this.secretModel = JSON.parse(JSON.stringify(secret));\r\n    this.secretDescriptor = secretState.secretsDescriptors.find(x => x.type == secret.type);\r\n    this.formContext = new FormContext(this.secretModel, newValue => this.secretModel = newValue);\r\n\r\n    this.timestamp = new Date();\r\n    this.renderProps = {};\r\n    await this.show(animate);\r\n  };\r\n\r\n  show = async (animate: boolean) => await this.dialog.show(animate);\r\n  hide = async (animate: boolean) => await this.dialog.hide(animate);\r\n\r\n  onKeyDown = async (event: KeyboardEvent) => {\r\n    if (event.ctrlKey && event.key === 'Enter') {\r\n      (this.dialog.querySelector('button[type=\"submit\"]') as HTMLButtonElement).click();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const renderProps = this.renderProps;\r\n    const secretDescriptor: SecretDescriptor = renderProps.secretDescriptor;\r\n    const secretModel = this.secretModel;\r\n    const t = this.t;\r\n\r\n    return (\r\n      <Host class=\"elsa-block\">\r\n        <elsa-modal-dialog ref={el => this.dialog = el}>\r\n          <div slot=\"content\" class=\"elsa-py-8 elsa-pb-0\">\r\n            <form onSubmit={e => this.onSubmit(e)} key={this.timestamp.getTime().toString()} onKeyDown={this.onKeyDown}\r\n                  class='activity-editor-form'>\r\n              <div class=\"elsa-flex elsa-px-8\">\r\n                <div class=\"elsa-space-y-8 elsa-divide-y elsa-divide-gray-200 elsa-w-full\">\r\n                  <div>\r\n                    <div>\r\n                      <h3 class=\"elsa-text-lg elsa-leading-6 elsa-font-medium elsa-text-gray-900\">\r\n                        {secretDescriptor.type}\r\n                      </h3>\r\n                      <p class=\"elsa-mt-1 elsa-text-sm elsa-text-gray-500\">\r\n                        {secretDescriptor.description}\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div class=\"elsa-mt-8\">\r\n                      {this.renderProperties(secretModel)}\r\n                      {this.isAuthorizeButtonVisible &&\r\n                        <button\r\n                          disabled={this.isAuthorizeButtonDisabled}\r\n                          onClick={e => this.onGetConsentClick(e)}\r\n                          class=\"elsa-mt-6 elsa-w-full elsa-inline-flex elsa-justify-center elsa-rounded-md elsa-border elsa-border-gray-300 elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-bg-white elsa-text-base elsa-font-medium elsa-text-gray-700 hover:elsa-bg-gray-50 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-w-auto sm:elsa-text-sm disabled:elsa-opacity-50\">\r\n                            Authorize\r\n                        </button>\r\n                      }\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n              <div class=\"elsa-pt-5\">\r\n                <div class=\"elsa-bg-gray-50 elsa-px-4 elsa-py-3 sm:elsa-px-6 sm:elsa-flex sm:elsa-flex-row-reverse\">\r\n                  <button type=\"submit\"\r\n                          class=\"elsa-ml-3 elsa-inline-flex elsa-justify-center elsa-py-2 elsa-px-4 elsa-border elsa-border-transparent elsa-shadow-sm elsa-text-sm elsa-font-medium elsa-rounded-md elsa-text-white elsa-bg-blue-600 hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500\">\r\n                    {'Save'}\r\n                  </button>\r\n                  <button type=\"button\"\r\n                          onClick={() => this.onCancelClick()}\r\n                          class=\"elsa-w-full elsa-inline-flex elsa-justify-center elsa-rounded-md elsa-border elsa-border-gray-300 elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-bg-white elsa-text-base elsa-font-medium elsa-text-gray-700 hover:elsa-bg-gray-50 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-mt-0 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm\">\r\n                    {'Cancel'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n\r\n          <div slot=\"buttons\"/>\r\n        </elsa-modal-dialog>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  renderProperties(secretModel: SecretModel) {\r\n    const propertyDescriptors: Array<SecretPropertyDescriptor> = this.renderProps.defaultProperties;\r\n    const formContext = this.formContext;\r\n\r\n    if (propertyDescriptors.length == 0)\r\n      return undefined;\r\n\r\n    const key = `secret-settings:${secretModel.id}`;\r\n    const t = this.t;\r\n\r\n    return (\r\n      <div>\r\n        <div class=\"elsa-w-full\">\r\n          {textInput(formContext, 'name', 'Name', secretModel.name, 'Secret\\'s name', 'secretName')}\r\n          {textInput(formContext, 'type', 'Type', secretModel.type, 'Secret\\'s type', 'secretType', true)}\r\n        </div>\r\n        <div class=\"elsa-mt-6\">\r\n          <div key={key} class={`elsa-grid elsa-grid-cols-1 elsa-gap-y-6 elsa-gap-x-4 sm:elsa-grid-cols-6`}>\r\n            {propertyDescriptors.map(property => this.renderPropertyEditor(secretModel, property))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderPropertyEditor(secret: SecretModel, property: SecretPropertyDescriptor) {\r\n    const key = `secret-property-input:${secret.id}:${property.name}`;\r\n    const display = propertyDisplayManager.display(secret, property);\r\n    const id = `${property.name}Control`;\r\n\r\n    return <elsa-control key={key} id={id} class=\"sm:elsa-col-span-6\" content={display} onChange={() => this.updateCounter++}/>;\r\n  }\r\n}\r\n"],"names":["secretState","state"],"mappings":"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"}