{"version":3,"file":"elsa-user-context-menu.entry.esm.js","sources":["src/components/controls/elsa-user-context-menu/elsa-user-context-menu.tsx"],"sourcesContent":["import {Component, h, Listen, Method, Prop} from '@stencil/core';\r\nimport {RouterHistory} from \"@stencil-community/router\";\r\nimport {leave, toggle} from 'el-transition'\r\nimport { t } from 'i18next';\r\nimport { createElsaClient } from '../../../services';\r\nimport { DropdownButtonItem, DropdownButtonOrigin } from '../elsa-dropdown-button/models';\r\nimport Tunnel from \"../../../data/dashboard\";\r\nimport {AuthenticationConfguration,UserDetail} from \"../../../services/elsa-client\";\r\nimport { StringLiteral } from 'typescript';\r\n\r\n\r\n@Component({\r\n  tag: 'elsa-user-context-menu',\r\n  shadow: false,\r\n})\r\nexport class ElsaUserContextMenu {\r\n @Prop({attribute: 'serverUrl', reflect: true}) serverUrl: string;\r\n userDetail :UserDetail = null;\r\n authenticationConfguration : AuthenticationConfguration;\r\n async componentWillRender()\r\n {\r\n  try{\r\n    this.userDetail = await (await (await createElsaClient(this.serverUrl)).authenticationApi.getUserDetails());\r\n    this.authenticationConfguration = await (await (await createElsaClient(this.serverUrl)).authenticationApi.getAuthenticationConfguration());\r\n  }catch(err){\r\n    this.userDetail = null;\r\n  }\r\n }\r\n\r\n logoutStrategy = {\r\n  \"OpenIdConnect\" : function(){\r\n    window.location.href = 'v1/ElsaAuthentication/logout';\r\n  },\r\n  \"ServerManagedCookie\" : function(){\r\n    window.location.href = 'v1/ElsaAuthentication/logout';\r\n  },\r\n  \"JwtBearerToken\":\"\"\r\n };\r\n\r\n\r\n\r\n@Method()\r\n async menuItemSelected(item : DropdownButtonItem)\r\n {\r\n  if(item.value == 'logout')\r\n  {\r\n    this.authenticationConfguration.authenticationStyles.forEach(x=>{\r\n      this.logoutStrategy[x]();\r\n    });\r\n  }\r\n }\r\n  render() {\r\n    if(this.userDetail == null)\r\n    {\r\n      return  ('')\r\n    }\r\n    const ddlitems: Array<DropdownButtonItem> = [{'text':(\"logout\") , value : \"logout\" }].map(x => {\r\n      const item: DropdownButtonItem = {text: x.text, isSelected: false, value: x.value};\r\n      return item\r\n    }); // this dropdown only used for logout for now\r\n\r\n   return (<elsa-dropdown-button text={this.userDetail.name} items={ddlitems} btnClass='elsa-bg-gray-800 elsa-text-gray-300 elsa-w-full   elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-inline-flex elsa-justify-center elsa-text-sm elsa-font-medium'\r\n  origin={DropdownButtonOrigin.TopRight}\r\n  onItemSelected={e =>  this.menuItemSelected(e.detail)} />)\r\n}\r\n}\r\nTunnel.injectProps(ElsaUserContextMenu, ['serverUrl']);\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;MAea,mBAAmB,GAAA,MAAA;AAJhC,IAAA,WAAA,CAAA,OAAA,EAAA;;AAMC,QAAA,IAAU,CAAA,UAAA,GAAe,IAAI;QAY7B,IAAA,CAAA,cAAc,GAAG;AAChB,YAAA,eAAe,EAAG,YAAA;AAChB,gBAAA,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,8BAA8B;aACtD;AACD,YAAA,qBAAqB,EAAG,YAAA;AACtB,gBAAA,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,8BAA8B;aACtD;AACD,YAAA,gBAAgB,EAAC;SACjB;AA4BD;AA9CA,IAAA,MAAM,mBAAmB,GAAA;AAExB,QAAA,IAAG;YACD,IAAI,CAAC,UAAU,GAAG,OAAO,MAAM,CAAC,MAAM,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,iBAAiB,CAAC,cAAc,EAAE,CAAC;YAC3G,IAAI,CAAC,0BAA0B,GAAG,OAAO,MAAM,CAAC,MAAM,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,iBAAiB,CAAC,6BAA6B,EAAE,CAAC;;QAC3I,OAAM,GAAG,EAAC;AACT,YAAA,IAAI,CAAC,UAAU,GAAG,IAAI;;;IAiBzB,MAAM,gBAAgB,CAAC,IAAyB,EAAA;AAE/C,QAAA,IAAG,IAAI,CAAC,KAAK,IAAI,QAAQ,EACzB;YACE,IAAI,CAAC,0BAA0B,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,IAAE;AAC9D,gBAAA,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;AAC1B,aAAC,CAAC;;;IAGJ,MAAM,GAAA;AACJ,QAAA,IAAG,IAAI,CAAC,UAAU,IAAI,IAAI,EAC1B;YACE,QAAS,EAAE;;QAEb,MAAM,QAAQ,GAA8B,CAAC,EAAC,MAAM,GAAE,QAAQ,CAAC,EAAG,KAAK,EAAG,QAAQ,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,IAAG;AAC5F,YAAA,MAAM,IAAI,GAAuB,EAAC,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAC;AAClF,YAAA,OAAO,IAAI;SACZ,CAAC,CAAC;QAEJ,QAAQ,CAAsB,CAAA,sBAAA,EAAA,EAAA,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAC,yJAAyJ,EAC9O,MAAM,EAAE,oBAAoB,CAAC,QAAQ,EACrC,cAAc,EAAE,CAAC,IAAK,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC,MAAM,CAAC,EAAA,CAAI;;;AAG3D,MAAM,CAAC,WAAW,CAAC,mBAAmB,EAAE,CAAC,WAAW,CAAC,CAAC;;;;"}