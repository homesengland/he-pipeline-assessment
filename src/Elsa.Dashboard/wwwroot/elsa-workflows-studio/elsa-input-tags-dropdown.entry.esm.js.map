{"version":3,"file":"elsa-input-tags-dropdown.entry.esm.js","sources":["src/components/controls/elsa-input-tags/elsa-input-tags-dropdown.tsx"],"sourcesContent":["import { Component, h, Prop, Event, EventEmitter, State, Watch } from '@stencil/core';\r\nimport { SelectListItem } from '../../../models';\r\n\r\n@Component({\r\n    tag: 'elsa-input-tags-dropdown',\r\n    shadow: false,\r\n})\r\nexport class ElsaInputTagsDropdown {\r\n\r\n    @Prop() fieldName?: string;\r\n    @Prop() fieldId?: string;\r\n    @Prop() placeHolder?: string = 'Add tag';\r\n    @Prop() values?: Array<string | SelectListItem> = [];\r\n    @Prop() dropdownValues?: Array<SelectListItem> = [];\r\n    @Event({ bubbles: true }) valueChanged: EventEmitter<Array<string | SelectListItem>>;\r\n    @State() currentValues?: Array<SelectListItem> = [];\r\n\r\n    @Watch('values')\r\n    valuesChangedHandler(newValue: Array<string | SelectListItem>) {\r\n        let values: Array<SelectListItem> = [];\r\n        const dropdownValues = this.dropdownValues || [];\r\n        \r\n        if(!!newValue) {\r\n            newValue.forEach(value => {\r\n                dropdownValues.forEach(tag => {\r\n                    if (value === tag.value) {\r\n                        values.push(tag);\r\n                    }\r\n                })\r\n            })\r\n        }\r\n        \r\n        this.currentValues = values || [];\r\n    }\r\n\r\n    componentWillLoad() {\r\n        const dropdownValues = this.dropdownValues || [];\r\n        let values: Array<SelectListItem> = [];\r\n\r\n        this.values.forEach(value => {\r\n            dropdownValues.forEach(tag => {\r\n                if (value === tag.value) {\r\n                    values.push(tag);\r\n                }\r\n            })\r\n        })\r\n        \r\n        this.currentValues = values;\r\n    }\r\n\r\n    async onTagSelected(e: any) {\r\n        e.preventDefault();\r\n\r\n        const input = e.target as HTMLSelectElement;\r\n        const currentTag: SelectListItem = {\r\n            text: input.options[input.selectedIndex].text.trim(),\r\n            value: input.value\r\n        }\r\n\r\n        if (currentTag.value.length == 0)\r\n            return;\r\n\r\n        const values: Array<SelectListItem> = [...this.currentValues];\r\n        values.push(currentTag);\r\n        this.currentValues = values.distinct();\r\n        input.value = \"Add\";\r\n        await this.valueChanged.emit(values);\r\n    }\r\n\r\n    async onDeleteTagClick(e: any, currentTag: SelectListItem) {\r\n        e.preventDefault();\r\n\r\n        this.currentValues = this.currentValues.filter(tag => tag.value !== currentTag.value);\r\n        await this.valueChanged.emit(this.currentValues);\r\n    }\r\n\r\n    render() {\r\n        let values: Array<SelectListItem> = this.currentValues || [];\r\n        let dropdownItems = this.dropdownValues.filter(x => values.findIndex(y => y.value === x.value) < 0);\r\n\r\n        if (!Array.isArray(values))\r\n            values = [];\r\n\r\n        const valuesJson = JSON.stringify(values.map(tag => tag.value));\r\n\r\n        return (\r\n            <div class=\"elsa-py-2 elsa-px-3 elsa-bg-white elsa-shadow-sm elsa-border elsa-border-gray-300 elsa-rounded-md\">\r\n                {values.map(tag =>\r\n                (\r\n                    <a href=\"#\" onClick={e => this.onDeleteTagClick(e, tag)} class=\"elsa-inline-block elsa-text-xs elsa-bg-blue-400 elsa-text-white elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 rounded\">\r\n                        <input type=\"hidden\" value={tag.value} />\r\n                        <span>{tag.text}</span>\r\n                        <span class=\"elsa-text-white hover:elsa-text-white elsa-ml-1\">&times;</span>\r\n                    </a>\r\n                ))}\r\n\r\n                <select id={this.fieldId} class=\"elsa-inline-block elsa-text-xs elsa-py-2 elsa-px-3 elsa-mr-1 elsa-mb-1 elsa-pr-8 elsa-border-gray-300 focus:elsa-outline-none focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-rounded\" onChange={(e) => this.onTagSelected(e)}>\r\n                    <option value=\"Add\" disabled selected>{this.placeHolder}</option>\r\n                    {dropdownItems.map(tag =>\r\n                    (\r\n                        <option value={tag.value}>{tag.text}</option>\r\n                    )\r\n                    )}\r\n                </select>\r\n                <input type=\"hidden\" name={this.fieldName} value={valuesJson} />\r\n            </div>\r\n        )\r\n    }\r\n}"],"names":[],"mappings":"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"}