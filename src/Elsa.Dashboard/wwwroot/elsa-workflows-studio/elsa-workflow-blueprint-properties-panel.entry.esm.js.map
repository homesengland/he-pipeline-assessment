{"version":3,"file":"elsa-workflow-blueprint-properties-panel.entry.esm.js","sources":["src/components/screens/workflow-blueprint-viewer/elsa-workflow-blueprint-properties-panel/localizations.ts","src/components/screens/workflow-blueprint-viewer/elsa-workflow-blueprint-properties-panel/elsa-workflow-blueprint-properties-panel.tsx"],"sourcesContent":["export const resources = {\r\n  'en': {\r\n    default: {\r\n      'Name': 'Name',\r\n      'Untitled': 'Untitled',\r\n      'Id': 'Id',\r\n      'Version': 'Latest Version',\r\n      'PublishedVersion': 'Published Version',\r\n      'Status': 'Status',\r\n      'Published': 'Published',\r\n      'Draft': 'Draft',\r\n      'Properties': '{{name}} Properties'\r\n    }\r\n  },\r\n  'zh-CN': {\r\n    default: {\r\n      'Name': '名称',\r\n      'Untitled': '无题',\r\n      'Id': 'Id',\r\n      'Version': '最新版本',\r\n      'PublishedVersion': '发布版本',\r\n      'Status': '状态',\r\n      'Published': '已发布',\r\n      'Draft': '草稿',\r\n      'Properties': '{{name}} 属性'\r\n    }\r\n  },\r\n  'nl-NL': {\r\n    default: {\r\n      'Name': 'Naam',\r\n      'Untitled': 'Untitled',\r\n      'Id': 'Id',\r\n      'Version': 'Laatste Versie',\r\n      'PublishedVersion': 'Gepubliceerde Versie',\r\n      'Status': 'Status',\r\n      'Published': 'Published',\r\n      'Draft': 'Draft',\r\n      'Properties': '{{name}} Properties'\r\n    }\r\n  },\r\n  'fa-IR': {\r\n    default: {\r\n      'Name': 'عنوان',\r\n      'Untitled': 'بی نام',\r\n      'Id': 'شناسه',\r\n      'Version': 'جدیدترین ویرایش',\r\n      'PublishedVersion': 'ویرایش منتشر شده',\r\n      'Status': 'وضعیت',\r\n      'Published': 'منتشر شده',\r\n      'Draft': 'پیش نویس',\r\n      'Properties': '{{name}} ویژگی های'\r\n    }\r\n  },\r\n  'de-DE': {\r\n    default: {\r\n      'Name': 'Name',\r\n      'Untitled': 'Unbenannt',\r\n      'Id': 'Id',\r\n      'Version': 'Neuste Version',\r\n      'PublishedVersion': 'Veröffentlichte Version',\r\n      'Status': 'Status',\r\n      'Published': 'Veröffentlicht',\r\n      'Draft': 'Entwurf',\r\n      'Properties': '{{name}} Eigenschaften'\r\n    }\r\n  },\r\n};\r\n","import {Component, Prop, h, State, Watch, Host} from '@stencil/core';\r\nimport {WorkflowBlueprint, WorkflowDefinitionSummary} from \"../../../../models\";\r\nimport {i18n} from \"i18next\";\r\nimport {loadTranslations} from \"../../../i18n/i18n-loader\";\r\nimport {resources} from \"./localizations\";\r\nimport {createElsaClient} from \"../../../../services\";\r\nimport Tunnel from \"../../../../data/dashboard\";\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-blueprint-properties-panel',\r\n  shadow: false\r\n})\r\nexport class ElsaWorkflowBlueprintPropertiesPanel {\r\n\r\n  @Prop() workflowId: string;\r\n  @Prop() culture: string;\r\n  @Prop() serverUrl: string;\r\n  @State() workflowBlueprint: WorkflowBlueprint;\r\n  @State() publishedVersion: number;\r\n  private i18next: i18n;\r\n\r\n  @Watch('workflowId')\r\n  async workflowIdChangedHandler(newWorkflowId: string) {\r\n    await this.loadWorkflowBlueprint(newWorkflowId);\r\n    await this.loadPublishedVersion();\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    this.i18next = await loadTranslations(this.culture, resources);\r\n    await this.loadWorkflowBlueprint();\r\n    await this.loadPublishedVersion();\r\n  }\r\n\r\n  render() {\r\n    const t = (x, params?) => this.i18next.t(x, params);\r\n    const {workflowBlueprint} = this;\r\n    const name = workflowBlueprint.name || this.i18next.t(\"Untitled\");\r\n    const {isPublished} = workflowBlueprint;\r\n\r\n    return (\r\n      <Host>\r\n        <dl class=\"elsa-border-b elsa-border-gray-200 elsa-divide-y elsa-divide-gray-200\">\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Name')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{name}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Id')}</dt>\r\n            <dd class=\"elsa-text-gray-900 elsa-break-all\">{workflowBlueprint.id || '-'}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Version')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{workflowBlueprint.version}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('PublishedVersion')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{this.publishedVersion || '-'}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Status')}</dt>\r\n            <dd\r\n              class={`${isPublished ? 'elsa-text-green-600' : 'elsa-text-yellow-700'}`}>{isPublished ? t('Published') : t('Draft')}</dd>\r\n          </div>\r\n        </dl>\r\n      </Host>\r\n    )\r\n  }\r\n\r\n  createClient() {\r\n    return createElsaClient(this.serverUrl);\r\n  }\r\n\r\n  async loadPublishedVersion() {\r\n    const elsaClient = await this.createClient();\r\n    const {workflowBlueprint} = this;\r\n\r\n    if (workflowBlueprint.isPublished) {\r\n      const publishedWorkflowDefinitions = await elsaClient.workflowDefinitionsApi.getMany([workflowBlueprint.id], {isPublished: true});\r\n      const publishedDefinition: WorkflowDefinitionSummary = workflowBlueprint.isPublished ? workflowBlueprint : publishedWorkflowDefinitions.find(x => x.definitionId == workflowBlueprint.id);\r\n\r\n      if (publishedDefinition) {\r\n        this.publishedVersion = publishedDefinition.version;\r\n      }\r\n    } else {\r\n      this.publishedVersion = 0;\r\n    }\r\n  }\r\n\r\n  async loadWorkflowBlueprint(workflowId = this.workflowId) {\r\n    const elsaClient = await this.createClient();\r\n\r\n    this.workflowBlueprint = await elsaClient.workflowRegistryApi.get(workflowId, {isLatest: true});\r\n  }\r\n}\r\n\r\nTunnel.injectProps(ElsaWorkflowBlueprintPropertiesPanel, ['serverUrl', 'culture']);\r\n"],"names":[],"mappings":"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"}