{"version":3,"file":"elsa-pager.entry.esm.js","sources":["src/components/controls/elsa-pager/elsa-pager.tsx"],"sourcesContent":["import {Component, Event, EventEmitter, h, Prop} from '@stencil/core';\r\nimport {LocationSegments, RouterHistory, injectHistory} from \"@stencil-community/router\";\r\nimport {parseQuery, queryToString} from \"../../../utils/utils\";\r\nimport {i18n} from \"i18next\";\r\nimport {resources} from \"./localizations\";\r\nimport {loadTranslations} from \"../../i18n/i18n-loader\";\r\nimport {GetIntlMessage} from \"../../i18n/intl-message\";\r\n\r\nexport interface PagerData {\r\n  page: number;\r\n  pageSize: number;\r\n  totalCount: number;\r\n}\r\n\r\n@Component({\r\n  tag: 'elsa-pager',\r\n  shadow: false,\r\n})\r\nexport class ElsaPager {\r\n\r\n  @Prop() page: number;\r\n  @Prop() pageSize: number;\r\n  @Prop() totalCount: number;\r\n  @Prop() location: LocationSegments;\r\n  @Prop() history?: RouterHistory;\r\n  @Prop() culture: string;\r\n\r\n  @Event() paged: EventEmitter<PagerData>\r\n\r\n  i18next: i18n;\r\n  basePath: string;\r\n\r\n  async componentWillLoad() {\r\n    this.i18next = await loadTranslations(this.culture, resources);\r\n    this.basePath = !!this.location ? this.location.pathname : document.location.pathname;\r\n  }\r\n\r\n  t = (key: string, options?: any) => this.i18next.t(key, options);\r\n\r\n  navigate(path: string, page: number) {\r\n\r\n    if (this.history) {\r\n      this.history.push(path);\r\n      return;\r\n    } else {\r\n      this.paged.emit({page, pageSize: this.pageSize, totalCount: this.totalCount});\r\n    }\r\n  }\r\n\r\n  onNavigateClick(e: Event, page: number) {\r\n    const anchor = e.currentTarget as HTMLAnchorElement;\r\n\r\n    e.preventDefault();\r\n    this.navigate(`${anchor.pathname}${anchor.search}`, page);\r\n  }\r\n\r\n  render() {\r\n    const page = this.page;\r\n    const pageSize = this.pageSize;\r\n    const totalCount = this.totalCount;\r\n    const basePath = this.basePath;\r\n\r\n    const from = page * pageSize + 1;\r\n    const to = Math.min(from + pageSize - 1, totalCount);\r\n    const pageCount = Math.round(((totalCount - 1) / pageSize) + 0.5);\r\n\r\n    const maxPageButtons = 10;\r\n    const fromPage = Math.max(0, page - maxPageButtons / 2);\r\n    const toPage = Math.min(pageCount, fromPage + maxPageButtons);\r\n    const self = this;\r\n    const currentQuery = !!this.history ? parseQuery(this.history.location.search) : {page, pageSize};\r\n    const t = this.t;\r\n    const IntlMessage = GetIntlMessage(this.i18next);\r\n\r\n    currentQuery['pageSize'] = pageSize;\r\n\r\n    const getNavUrl = (page: number) => {\r\n      const query = {...currentQuery, 'page': page};\r\n      return `${basePath}?${queryToString(query)}`;\r\n    };\r\n\r\n    const renderPreviousButton = function () {\r\n      if (page <= 0)\r\n        return;\r\n\r\n      return <a href={`${getNavUrl(page - 1)}`}\r\n                onClick={e => self.onNavigateClick(e, page - 1)}\r\n                class=\"elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-gray-300 elsa-text-sm elsa-leading-5 elsa-font-medium elsa-rounded-md elsa-text-gray-700 elsa-bg-white hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-shadow-outline-blue focus:elsa-border-blue-300 active:elsa-bg-gray-100 active:elsa-text-gray-700 elsa-transition elsa-ease-in-out elsa-duration-150\">\r\n        {t('Previous')}\r\n      </a>\r\n    }\r\n\r\n    const renderNextButton = function () {\r\n      if (page >= pageCount)\r\n        return;\r\n\r\n      return <a href={`/${getNavUrl(page + 1)}`}\r\n                onClick={e => self.onNavigateClick(e, page + 1)}\r\n                class=\"elsa-ml-3 elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-gray-300 elsa-text-sm elsa-leading-5 elsa-font-medium elsa-rounded-md elsa-text-gray-700 elsa-bg-white hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-shadow-outline-blue focus:elsa-border-blue-300 active:elsa-bg-gray-100 active:elsa-text-gray-700 elsa-transition elsa-ease-in-out elsa-duration-150\">\r\n        {t('Next')}\r\n      </a>\r\n    }\r\n\r\n    const renderChevronLeft = function () {\r\n      if (page <= 0)\r\n        return;\r\n\r\n      return (\r\n        <a href={`${getNavUrl(page - 1)}`}\r\n           onClick={e => self.onNavigateClick(e, page - 1)}\r\n           class=\"elsa-relative elsa-inline-flex elsa-items-center elsa-px-2 elsa-py-2 elsa-rounded-l-md elsa-border elsa-border-gray-300 elsa-bg-white elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-500 hover:elsa-text-gray-400 focus:elsa-z-10 focus:elsa-outline-none focus:elsa-border-blue-300 focus:elsa-shadow-outline-blue active:elsa-bg-gray-100 active:elsa-text-gray-500 elsa-transition elsa-ease-in-out elsa-duration-150\"\r\n           aria-label=\"Previous\">\r\n          <svg class=\"elsa-h-5 elsa-w-5\" x-description=\"Heroicon name: chevron-left\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fill-rule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clip-rule=\"evenodd\"/>\r\n          </svg>\r\n        </a>);\r\n    }\r\n\r\n    const renderChevronRight = function () {\r\n      if (page >= pageCount - 1)\r\n        return;\r\n\r\n      return (\r\n        <a href={`${getNavUrl(page + 1)}`}\r\n           onClick={e => self.onNavigateClick(e, page + 1)}\r\n           class=\"-elsa-ml-px elsa-relative elsa-inline-flex elsa-items-center elsa-px-2 elsa-py-2 elsa-rounded-r-md elsa-border elsa-border-gray-300 elsa-bg-white elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-500 hover:elsa-text-gray-400 focus:elsa-z-10 focus:elsa-outline-none focus:elsa-border-blue-300 focus:elsa-shadow-outline-blue active:elsa-bg-gray-100 active:elsa-text-gray-500 elsa-transition elsa-ease-in-out elsa-duration-150\"\r\n           aria-label=\"Next\">\r\n          <svg class=\"elsa-h-5 elsa-w-5\" x-description=\"Heroicon name: chevron-right\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\"/>\r\n          </svg>\r\n        </a>\r\n      );\r\n    }\r\n\r\n    const renderPagerButtons = function () {\r\n      const buttons = [];\r\n\r\n      for (let i = fromPage; i < toPage; i++) {\r\n        const isCurrent = page == i;\r\n        const isFirst = i == fromPage;\r\n        const isLast = i == toPage - 1;\r\n        const leftRoundedClass = isFirst && isCurrent ? 'elsa-rounded-l-md' : '';\r\n        const rightRoundedClass = isLast && isCurrent ? 'elsa-rounded-r-md' : '';\r\n\r\n        if (isCurrent) {\r\n          buttons.push(<span\r\n            class={`-elsa-ml-px elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-gray-300 elsa-text-sm elsa-leading-5 elsa-font-medium elsa-bg-blue-600 elsa-text-white ${leftRoundedClass} ${rightRoundedClass}`}>\r\n                        {i + 1}\r\n                    </span>);\r\n        } else {\r\n          buttons.push(<a href={`${getNavUrl(i)}`}\r\n                          onClick={e => self.onNavigateClick(e, i)}\r\n                          class={`-elsa-ml-px elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-gray-300 elsa-bg-white elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-700 hover:elsa-text-gray-500 focus:elsa-z-10 focus:elsa-outline-none active:elsa-bg-gray-100 active:elsa-text-gray-700 elsa-transition elsa-ease-in-out elsa-duration-150 ${leftRoundedClass}`}>\r\n            {i + 1}\r\n          </a>)\r\n        }\r\n      }\r\n\r\n      return buttons;\r\n    }\r\n\r\n    return (\r\n      <div class=\"elsa-bg-white elsa-px-4 elsa-py-3 elsa-flex elsa-items-center elsa-justify-between elsa-border-t elsa-border-gray-200 sm:elsa-px-6\">\r\n        <div class=\"elsa-flex-1 elsa-flex elsa-justify-between sm:elsa-hidden\">\r\n          {renderPreviousButton()}\r\n          {renderNextButton()}\r\n        </div>\r\n        <div class=\"hidden sm:elsa-flex-1 sm:elsa-flex sm:elsa-items-center sm:elsa-justify-between\">\r\n          <div>\r\n            <p class=\"elsa-text-sm elsa-leading-5 elsa-text-gray-700 elsa-space-x-0-5\">\r\n              <span>{t('From')}</span>\r\n              <span class=\"elsa-font-medium\">{from}</span>\r\n              <span>{t('To')}</span>\r\n              <span class=\"elsa-font-medium\">{to}</span>\r\n              <span>{t('Of')}</span>\r\n              <span class=\"elsa-font-medium\">{totalCount}</span>\r\n              <span>{t('Results')}</span>\r\n            </p>\r\n          </div>\r\n          <div>\r\n            <nav class=\"elsa-relative elsa-z-0 elsa-inline-flex elsa-shadow-sm\">\r\n              {renderChevronLeft()}\r\n              {renderPagerButtons()}\r\n              {renderChevronRight()}\r\n            </nav>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ninjectHistory(ElsaPager);\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;MAkBa,SAAS,GAAA,MAAA;AAJtB,IAAA,WAAA,CAAA,OAAA,EAAA;;;QAuBE,IAAA,CAAA,CAAC,GAAG,CAAC,GAAW,EAAE,OAAa,KAAK,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,OAAO,CAAC;AAyJjE;AA9JC,IAAA,MAAM,iBAAiB,GAAA;AACrB,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC;QAC9D,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC,QAAQ;;IAKvF,QAAQ,CAAC,IAAY,EAAE,IAAY,EAAA;AAEjC,QAAA,IAAI,IAAI,CAAC,OAAO,EAAE;AAChB,YAAA,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;YACvB;;aACK;YACL,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,UAAU,EAAC,CAAC;;;IAIjF,eAAe,CAAC,CAAQ,EAAE,IAAY,EAAA;AACpC,QAAA,MAAM,MAAM,GAAG,CAAC,CAAC,aAAkC;QAEnD,CAAC,CAAC,cAAc,EAAE;AAClB,QAAA,IAAI,CAAC,QAAQ,CAAC,CAAA,EAAG,MAAM,CAAC,QAAQ,CAAG,EAAA,MAAM,CAAC,MAAM,CAAA,CAAE,EAAE,IAAI,CAAC;;IAG3D,MAAM,GAAA;AACJ,QAAA,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI;AACtB,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ;AAC9B,QAAA,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU;AAClC,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ;AAE9B,QAAA,MAAM,IAAI,GAAG,IAAI,GAAG,QAAQ,GAAG,CAAC;AAChC,QAAA,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,QAAQ,GAAG,CAAC,EAAE,UAAU,CAAC;AACpD,QAAA,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,UAAU,GAAG,CAAC,IAAI,QAAQ,IAAI,GAAG,CAAC;QAEjE,MAAM,cAAc,GAAG,EAAE;AACzB,QAAA,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,GAAG,cAAc,GAAG,CAAC,CAAC;AACvD,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,QAAQ,GAAG,cAAc,CAAC;QAC7D,MAAM,IAAI,GAAG,IAAI;AACjB,QAAA,MAAM,YAAY,GAAG,CAAC,CAAC,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,EAAC,IAAI,EAAE,QAAQ,EAAC;AACjG,QAAA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC;QAChB,MAAM,WAAW,GAAG,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC;AAEhD,QAAA,YAAY,CAAC,UAAU,CAAC,GAAG,QAAQ;AAEnC,QAAA,MAAM,SAAS,GAAG,CAAC,IAAY,KAAI;YACjC,MAAM,KAAK,mCAAO,YAAY,CAAA,EAAA,EAAE,MAAM,EAAE,IAAI,GAAC;YAC7C,OAAO,CAAA,EAAG,QAAQ,CAAI,CAAA,EAAA,aAAa,CAAC,KAAK,CAAC,EAAE;AAC9C,SAAC;AAED,QAAA,MAAM,oBAAoB,GAAG,YAAA;YAC3B,IAAI,IAAI,IAAI,CAAC;gBACX;AAEF,YAAA,OAAO,SAAG,IAAI,EAAE,CAAG,EAAA,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA,CAAE,EAC9B,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,EAC/C,KAAK,EAAC,qZAAqZ,EACla,EAAA,CAAC,CAAC,UAAU,CAAC,CACZ;AACN,SAAC;AAED,QAAA,MAAM,gBAAgB,GAAG,YAAA;YACvB,IAAI,IAAI,IAAI,SAAS;gBACnB;AAEF,YAAA,OAAO,SAAG,IAAI,EAAE,CAAI,CAAA,EAAA,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC,CAAA,CAAE,EAC/B,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,EAC/C,KAAK,EAAC,+ZAA+Z,EAC5a,EAAA,CAAC,CAAC,MAAM,CAAC,CACR;AACN,SAAC;AAED,QAAA,MAAM,iBAAiB,GAAG,YAAA;YACxB,IAAI,IAAI,IAAI,CAAC;gBACX;AAEF,YAAA,QACE,CAAA,CAAA,GAAA,EAAA,EAAG,IAAI,EAAE,CAAA,EAAG,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC,EAAE,EAC9B,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,EAC/C,KAAK,EAAC,uaAAua,gBACla,UAAU,EAAA,EACtB,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,mBAAmB,EAAe,eAAA,EAAA,6BAA6B,EAAC,KAAK,EAAC,4BAA4B,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,cAAc,EAAA,EACnJ,CAAgB,CAAA,MAAA,EAAA,EAAA,WAAA,EAAA,SAAS,EAAC,CAAC,EAAC,mHAAmH,EAAW,WAAA,EAAA,SAAS,EAAE,CAAA,CACjK,CACJ;AACR,SAAC;AAED,QAAA,MAAM,kBAAkB,GAAG,YAAA;AACzB,YAAA,IAAI,IAAI,IAAI,SAAS,GAAG,CAAC;gBACvB;AAEF,YAAA,QACE,CAAA,CAAA,GAAA,EAAA,EAAG,IAAI,EAAE,CAAA,EAAG,SAAS,CAAC,IAAI,GAAG,CAAC,CAAC,EAAE,EAC9B,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,IAAI,GAAG,CAAC,CAAC,EAC/C,KAAK,EAAC,mbAAmb,gBAC9a,MAAM,EAAA,EAClB,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,mBAAmB,EAAe,eAAA,EAAA,8BAA8B,EAAC,KAAK,EAAC,4BAA4B,EAAC,OAAO,EAAC,WAAW,EAAC,IAAI,EAAC,cAAc,EAAA,EACpJ,CAAgB,CAAA,MAAA,EAAA,EAAA,WAAA,EAAA,SAAS,EAAC,CAAC,EAAC,oHAAoH,EAAW,WAAA,EAAA,SAAS,EAAE,CAAA,CAClK,CACJ;AAER,SAAC;AAED,QAAA,MAAM,kBAAkB,GAAG,YAAA;YACzB,MAAM,OAAO,GAAG,EAAE;AAElB,YAAA,KAAK,IAAI,CAAC,GAAG,QAAQ,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;AACtC,gBAAA,MAAM,SAAS,GAAG,IAAI,IAAI,CAAC;AAC3B,gBAAA,MAAM,OAAO,GAAG,CAAC,IAAI,QAAQ;AAC7B,gBAAA,MAAM,MAAM,GAAG,CAAC,IAAI,MAAM,GAAG,CAAC;AAC9B,gBAAA,MAAM,gBAAgB,GAAG,OAAO,IAAI,SAAS,GAAG,mBAAmB,GAAG,EAAE;AACxE,gBAAA,MAAM,iBAAiB,GAAG,MAAM,IAAI,SAAS,GAAG,mBAAmB,GAAG,EAAE;gBAExE,IAAI,SAAS,EAAE;oBACb,OAAO,CAAC,IAAI,CAAC,CACX,CAAA,MAAA,EAAA,EAAA,KAAK,EAAE,CAAA,gMAAA,EAAmM,gBAAgB,CAAI,CAAA,EAAA,iBAAiB,EAAE,EACpO,EAAA,CAAC,GAAG,CAAC,CACH,CAAC;;qBACb;oBACL,OAAO,CAAC,IAAI,CAAC,CAAG,CAAA,GAAA,EAAA,EAAA,IAAI,EAAE,GAAG,SAAS,CAAC,CAAC,CAAC,CAAA,CAAE,EACvB,OAAO,EAAE,CAAC,IAAI,IAAI,CAAC,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC,EACxC,KAAK,EAAE,yWAAyW,gBAAgB,CAAA,CAAE,EAC/Y,EAAA,CAAC,GAAG,CAAC,CACJ,CAAC;;;AAIT,YAAA,OAAO,OAAO;AAChB,SAAC;AAED,QAAA,QACE,CAAA,CAAA,KAAA,EAAA,EAAK,KAAK,EAAC,oIAAoI,EAAA,EAC7I,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,2DAA2D,EAAA,EACnE,oBAAoB,EAAE,EACtB,gBAAgB,EAAE,CACf,EACN,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,iFAAiF,EAAA,EAC1F,CAAA,CAAA,KAAA,EAAA,IAAA,EACE,CAAG,CAAA,GAAA,EAAA,EAAA,KAAK,EAAC,iEAAiE,EAAA,EACxE,CAAA,CAAA,MAAA,EAAA,IAAA,EAAO,CAAC,CAAC,MAAM,CAAC,CAAQ,EACxB,CAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAC,kBAAkB,EAAA,EAAE,IAAI,CAAQ,EAC5C,CAAA,CAAA,MAAA,EAAA,IAAA,EAAO,CAAC,CAAC,IAAI,CAAC,CAAQ,EACtB,CAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAC,kBAAkB,EAAA,EAAE,EAAE,CAAQ,EAC1C,CAAA,CAAA,MAAA,EAAA,IAAA,EAAO,CAAC,CAAC,IAAI,CAAC,CAAQ,EACtB,CAAA,CAAA,MAAA,EAAA,EAAM,KAAK,EAAC,kBAAkB,EAAA,EAAE,UAAU,CAAQ,EAClD,CAAA,CAAA,MAAA,EAAA,IAAA,EAAO,CAAC,CAAC,SAAS,CAAC,CAAQ,CACzB,CACA,EACN,CAAA,CAAA,KAAA,EAAA,IAAA,EACE,CAAK,CAAA,KAAA,EAAA,EAAA,KAAK,EAAC,wDAAwD,EAAA,EAChE,iBAAiB,EAAE,EACnB,kBAAkB,EAAE,EACpB,kBAAkB,EAAE,CACjB,CACF,CACF,CACF;;;AAKZ,aAAa,CAAC,SAAS,CAAC;;;;"}