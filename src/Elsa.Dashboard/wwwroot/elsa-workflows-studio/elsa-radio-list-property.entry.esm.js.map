{"version":3,"file":"elsa-radio-list-property.entry.esm.js","sources":["src/components/editors/properties/elsa-radio-list-property/elsa-radio-list-property.tsx"],"sourcesContent":["import {Component, h, Prop, State} from '@stencil/core';\r\nimport {\r\n  ActivityDefinitionProperty,\r\n  ActivityModel,\r\n  ActivityPropertyDescriptor,\r\n  SelectList,\r\n  SyntaxNames\r\n} from \"../../../../models\";\r\nimport {parseJson} from \"../../../../utils/utils\";\r\nimport {getSelectListItems} from \"../../../../utils/select-list-items\";\r\nimport Tunnel from \"../../../../data/workflow-editor\";\r\n\r\n@Component({\r\n  tag: 'elsa-radio-list-property',\r\n  shadow: false,\r\n})\r\nexport class ElsaRadioListProperty {\r\n\r\n  @Prop() activityModel: ActivityModel;\r\n  @Prop() propertyDescriptor: ActivityPropertyDescriptor;\r\n  @Prop() propertyModel: ActivityDefinitionProperty;\r\n  @Prop({mutable: true}) serverUrl: string;\r\n  @State() currentValue?: string;\r\n\r\n  monacoEditor: HTMLElsaMonacoElement;\r\n  selectList: SelectList = {items: [], isFlagsEnum: false};\r\n\r\n  async componentWillLoad() {\r\n    const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Literal;\r\n    this.currentValue = this.propertyModel.expressions[defaultSyntax] || null;\r\n  }\r\n\r\n  onCheckChanged(e: Event) {\r\n    const radio = (e.target as HTMLInputElement);\r\n    const checked = radio.checked;\r\n\r\n    if (checked)\r\n      this.currentValue = radio.value;\r\n\r\n    const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Literal;\r\n    this.propertyModel.expressions[defaultSyntax] = this.currentValue;\r\n  }\r\n\r\n  onDefaultSyntaxValueChanged(e: CustomEvent) {\r\n    this.currentValue = e.detail;\r\n  }\r\n\r\n  async componentWillRender() {\r\n    this.selectList = await getSelectListItems(this.serverUrl, this.propertyDescriptor);\r\n  }\r\n\r\n  render() {\r\n    const propertyDescriptor = this.propertyDescriptor;\r\n    const propertyModel = this.propertyModel;\r\n    const fieldId = propertyDescriptor.name;\r\n    const selectList = this.selectList;\r\n    const items = selectList.items;\r\n    const currentValue = this.currentValue;\r\n\r\n    return (\r\n      <elsa-property-editor\r\n        activityModel={this.activityModel}\r\n        propertyDescriptor={propertyDescriptor}\r\n        propertyModel={propertyModel}\r\n        onDefaultSyntaxValueChanged={e => this.onDefaultSyntaxValueChanged(e)}\r\n        single-line={true}>\r\n        <div class=\"elsa-max-w-lg elsa-space-y-3 elsa-my-4\">\r\n          {items.map((item, index) => {\r\n            const inputId = `${fieldId}_${index}`;\r\n            const optionIsString = typeof (item) == 'string';\r\n            const value = optionIsString ? item : item.value;\r\n            const text = optionIsString ? item : item.text;\r\n            const isSelected = currentValue == value;\r\n\r\n            return (\r\n              <div class=\"elsa-relative elsa-flex elsa-items-start\">\r\n                <div class=\"elsa-flex elsa-items-center elsa-h-5\">\r\n                  <input id={inputId} type=\"radio\" radioGroup={fieldId} checked={isSelected} value={value}\r\n                         onChange={e => this.onCheckChanged(e)}\r\n                         class=\"elsa-focus:ring-blue-500 elsa-h-4 elsa-w-4 elsa-text-blue-600 elsa-border-gray-300\"/>\r\n                </div>\r\n                <div class=\"elsa-ml-3 elsa-mt-1 elsa-text-sm\">\r\n                  <label htmlFor={inputId} class=\"elsa-font-medium elsa-text-gray-700\">{text}</label>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </elsa-property-editor>\r\n    );\r\n  }\r\n}\r\n\r\nTunnel.injectProps(ElsaRadioListProperty, ['serverUrl']);\r\n"],"names":[],"mappings":"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"}