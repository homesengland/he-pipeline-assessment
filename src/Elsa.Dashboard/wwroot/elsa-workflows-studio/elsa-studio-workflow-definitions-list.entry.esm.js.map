{"version":3,"file":"elsa-studio-workflow-definitions-list.entry.esm.js","sources":["src/components/dashboard/pages/elsa-studio-workflow-definitions-list/localizations.ts","src/components/dashboard/pages/elsa-studio-workflow-definitions-list/elsa-studio-workflow-definitions-list.tsx"],"sourcesContent":["export const resources = {\r\n  'en': {\r\n    default: {\r\n      'Title': 'Workflow Definitions',\r\n      'CreateButton': 'Create Workflow',\r\n      'BackupButton': 'Backup Workflows',\r\n      'RestoreButton': 'Restore Workflows'\r\n    }\r\n  },\r\n  'zh-CN': {\r\n    default: {\r\n      'Title': '工作流程定义',\r\n      'CreateButton': '创建工作流程'\r\n    }\r\n  },\r\n  'nl-NL': {\r\n    default: {\r\n      'Title': 'Workflow Definities',\r\n      'CreateButton': 'Nieuwe Workflow'\r\n    }\r\n  },\r\n  'fa-IR': {\r\n    default: {\r\n      'Title': 'مشخصات فرآیندها',\r\n      'CreateButton': 'ایجاد فرآیند'\r\n    }\r\n  },\r\n  'de-DE': {\r\n    default: {\r\n      'Title': 'Ablaufdefinitionen',\r\n      'CreateButton': 'Ablauf erstellen'\r\n    }\r\n  },\r\n};\r\n","import {Component, h, Prop, State} from '@stencil/core';\nimport { createElsaClient } from \"../../../../services\";\nimport {RouterHistory} from \"@stencil/router\";\nimport 'i18next-wc';\nimport {GetIntlMessage, IntlMessage} from \"../../../i18n/intl-message\";\nimport {loadTranslations} from \"../../../i18n/i18n-loader\";\nimport {resources} from \"./localizations\";\nimport {i18n} from \"i18next\";\nimport Tunnel from \"../../../../data/dashboard\";\nimport { leave, toggle } from 'el-transition'\n\n@Component({\n  tag: 'elsa-studio-workflow-definitions-list',\n  shadow: false,\n})\nexport class ElsaStudioWorkflowDefinitionsList {\n  @Prop() history: RouterHistory;\n  @Prop() culture: string;\n  @Prop() basePath: string;\n  @Prop({ attribute: 'server-url' }) serverUrl: string;\n  private i18next: i18n;\n  private fileInput: HTMLInputElement;\n  private workflowDefinitionsListScreen: HTMLElsaWorkflowDefinitionsListScreenElement\n  private menu: HTMLElement;\n\n  async componentWillLoad() {\n    this.i18next = await loadTranslations(this.culture, resources);\n  }\n\n  async onFileInputChange(e: Event) {\n    const files = this.fileInput.files;\n\n    if (files.length == 0) {\n      return;\n    }\n    const file = files[0];\n\n    const elsaClient = await createElsaClient(this.serverUrl);\n\n    try {\n      await elsaClient.workflowDefinitionsApi.restore(file);\n    } catch (e) {\n      console.error(e);\n    }\n    await this.workflowDefinitionsListScreen.loadWorkflowDefinitions();\n  }\n\n  restoreWorkflows = async (e: Event) => {\n    e.preventDefault();\n    this.fileInput.value = null;\n    this.fileInput.click();\n    toggle(this.menu);\n  }\n\n  toggleMenu(e?: Event) {\n    toggle(this.menu);\n  }\n\n  render() {\n    const basePath = this.basePath;\n    const IntlMessage = GetIntlMessage(this.i18next);\n\n    return (\n      <div>\n        <div class=\"elsa-border-b elsa-border-gray-200 elsa-px-4 elsa-py-4 sm:elsa-flex sm:elsa-items-center sm:elsa-justify-between sm:elsa-px-6 lg:elsa-px-8 elsa-bg-white\">\n          <div class=\"elsa-flex-1 elsa-min-w-0\">\n            <h1 class=\"elsa-text-lg elsa-font-medium elsa-leading-6 elsa-text-gray-900 sm:elsa-truncate\">\n              <IntlMessage label=\"Title\"/>\n            </h1>\n          </div>\n          <div class=\"elsa-mt-4 elsa-flex sm:elsa-mt-0 sm:elsa-ml-4\">\n            <span class=\"elsa-relative elsa-z-20 elsa-inline-flex elsa-shadow-sm elsa-rounded-md\">\n              <elsa-nav-link url={`${basePath}/workflow-definitions/new`}\n                anchorClass=\"elsa-relative elsa-inline-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-border elsa-border-transparent elsa-shadow-sm elsa-text-sm elsa-font-medium elsa-rounded-l-md elsa-text-white elsa-bg-blue-600 hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 focus:elsa-z-10\">\n                <IntlMessage label=\"CreateButton\"/>\n              </elsa-nav-link>\n              <span class=\"-elsa-ml-px elsa-relative elsa-block\">\n                <button onClick={() => this.toggleMenu()} id=\"option-menu\" type=\"button\"\n                  class=\"elsa-relative elsa-inline-flex elsa-items-center elsa-px-2 elsa-py-2 elsa-rounded-r-md elsa-border elsa-border-transparent elsa-bg-blue-600 elsa-text-sm elsa-font-medium elsa-text-white hover:elsa-bg-blue-700 focus:elsa-z-10 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-blue-500 focus:elsa-border-blue-500\">\n                  <span class=\"elsa-sr-only\">Open options</span>\n                  <svg class=\"elsa-h-5 elsa-w-5\" x-description=\"Heroicon name: solid/chevron-down\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                    <path fill-rule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clip-rule=\"evenodd\" />\n                  </svg>\n                </button>\n                <div ref={el => this.menu = el}\n                  data-transition-enter=\"elsa-transition elsa-ease-out elsa-duration-100\"\n                  data-transition-enter-start=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\n                  data-transition-enter-end=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\n                  data-transition-leave=\"elsa-transition elsa-ease-in elsa-duration-75\"\n                  data-transition-leave-start=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\n                  data-transition-leave-end=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\n                  class=\"hidden origin-top-left elsa-absolute elsa-right-0 elsa-top-10 elsa-mb-2 -elsa-mr-1 elsa-w-56 elsa-rounded-md elsa-shadow-lg elsa-bg-white elsa-ring-1 elsa-ring-black elsa-ring-opacity-5\">\n                  <div class=\"elsa-divide-y elsa-divide-gray-100 focus:elsa-outline-none\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"option-menu\">\n\n                    <div class=\"elsa-py-1\" role=\"none\">\n                      <a href=\"#\" onClick={(e) => this.restoreWorkflows(e)} class=\"elsa-block elsa-px-4 elsa-py-2 elsa-text-sm elsa-text-gray-700 hover:elsa-bg-gray-100 hover:elsa-text-gray-900\" role=\"menuitem\">\n                        <IntlMessage label=\"RestoreButton\" />\n                      </a>\n\n                      <a href={`${basePath}/v1/workflow-definitions/backup`} onClick={(e) => this.toggleMenu(e)} class=\"elsa-block elsa-px-4 elsa-py-2 elsa-text-sm elsa-text-gray-700 hover:elsa-bg-gray-100 hover:elsa-text-gray-900\" role=\"menuitem\">\n                        <IntlMessage label=\"BackupButton\" />\n                      </a>\n\n                    </div>\n                  </div>\n                </div>\n              </span>\n            </span>\n          </div>\n        </div>\n\n        <elsa-workflow-definitions-list-screen ref={el => this.workflowDefinitionsListScreen = el} />\n        <input type=\"file\" class=\"hidden\" onChange={(e) => this.onFileInputChange(e)} ref={el => this.fileInput = el} accept=\".zip\" />\n      </div>\n    );\n  }\n}\nTunnel.injectProps(ElsaStudioWorkflowDefinitionsList, ['serverUrl', 'culture', 'basePath']);\n"],"names":[],"mappings":"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"}