{"version":3,"file":"elsa-modal-dialog.entry.esm.js","sources":["src/components/shared/elsa-modal-dialog/elsa-modal-dialog.tsx"],"sourcesContent":["import {Component, Host, h, State, Listen, Method, Event, EventEmitter} from '@stencil/core';\r\nimport {enter, leave} from 'el-transition'\r\nimport {eventBus} from \"../../../services\";\r\nimport {EventTypes} from \"../../../models\";\r\n\r\n@Component({\r\n  tag: 'elsa-modal-dialog',\r\n  shadow: false,\r\n})\r\nexport class ElsaModalDialog {\r\n  @Event() shown: EventEmitter;\r\n  @Event() hidden: EventEmitter;\r\n  @State() isVisible: boolean;\r\n  overlay: HTMLElement\r\n  modal: HTMLElement\r\n\r\n  render() {\r\n    return this.renderModal();\r\n  }\r\n\r\n  @Method()\r\n  async show(animate: boolean = true) {\r\n    this.showInternal(animate);\r\n  }\r\n\r\n  @Method()\r\n  async hide(animate: boolean = true) {\r\n    await eventBus.emit(EventTypes.HideModalDialog);\r\n    this.hideInternal(animate);\r\n  }\r\n\r\n  handleDefaultClose = async () => {\r\n    await this.hide();\r\n  }\r\n\r\n  showInternal(animate: boolean) {\r\n    this.isVisible = true;\r\n\r\n    if (!animate) {\r\n      this.overlay.style.opacity = \"1\";\r\n      this.modal.style.opacity = \"1\";\r\n    }\r\n\r\n    enter(this.overlay);\r\n    enter(this.modal).then(this.shown.emit);\r\n  }\r\n\r\n  hideInternal(animate: boolean) {\r\n    if (!animate) {\r\n      this.isVisible = false\r\n    }\r\n\r\n    leave(this.overlay);\r\n    leave(this.modal).then(() => {\r\n      this.isVisible = false;\r\n      this.hidden.emit();\r\n    });\r\n  }\r\n\r\n  @Listen('keydown', {target: 'window'})\r\n  async handleKeyDown(e: KeyboardEvent) {\r\n    if (this.isVisible && e.key === 'Escape') {\r\n      await this.hide(true);\r\n    }\r\n  }\r\n\r\n  renderModal() {\r\n    return (\r\n      <Host class={{'hidden': !this.isVisible, 'elsa-block': true}}>\r\n        <div class=\"elsa-fixed elsa-z-10 elsa-inset-0 elsa-overflow-y-auto\">\r\n          <div\r\n            class=\"elsa-flex elsa-items-end elsa-justify-center elsa-min-h-screen elsa-pt-4 elsa-px-4 elsa-pb-20 elsa-text-center sm:elsa-block sm:elsa-p-0\">\r\n            <div ref={el => this.overlay = el}\r\n                 onClick={() => this.hide(true)}\r\n                 data-transition-enter=\"elsa-ease-out elsa-duration-300\" data-transition-enter-start=\"elsa-opacity-0\"\r\n                 data-transition-enter-end=\"elsa-opacity-0\" data-transition-leave=\"elsa-ease-in elsa-duration-200\"\r\n                 data-transition-leave-start=\"elsa-opacity-0\" data-transition-leave-end=\"elsa-opacity-0\"\r\n                 class=\"hidden elsa-fixed elsa-inset-0 elsa-transition-opacity\" aria-hidden=\"true\">\r\n              <div class=\"elsa-absolute elsa-inset-0 elsa-bg-gray-500 elsa-opacity-75\"/>\r\n            </div>\r\n\r\n            <span class=\"hidden sm:elsa-inline-block sm:elsa-align-middle sm:elsa-h-screen\" aria-hidden=\"true\"/>\r\n            <div ref={el => this.modal = el}\r\n                 data-transition-enter=\"elsa-ease-out elsa-duration-300\"\r\n                 data-transition-enter-start=\"elsa-opacity-0 elsa-translate-y-4 sm:elsa-translate-y-0 sm:elsa-scale-95\"\r\n                 data-transition-enter-end=\"elsa-opacity-0 elsa-translate-y-0 sm:elsa-scale-100\"\r\n                 data-transition-leave=\"elsa-ease-in elsa-duration-200\"\r\n                 data-transition-leave-start=\"elsa-opacity-0 elsa-translate-y-0 sm:elsa-scale-100\"\r\n                 data-transition-leave-end=\"elsa-opacity-0 elsa-translate-y-4 sm:elsa-translate-y-0 sm:elsa-scale-95\"\r\n                 class=\"hidden elsa-inline-block sm:elsa-align-top elsa-bg-white elsa-rounded-lg elsa-text-left elsa-overflow-visible elsa-shadow-xl elsa-transform elsa-transition-all sm:elsa-my-8 sm:elsa-align-top sm:elsa-max-w-4xl sm:elsa-w-full\"\r\n                 role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-headline\">\r\n              <div class=\"modal-content\">\r\n                <slot name=\"content\"/>\r\n              </div>\r\n\r\n              <slot name=\"buttons\">\r\n                <div class=\"elsa-bg-gray-50 elsa-px-4 elsa-py-3 sm:elsa-px-6 sm:elsa-flex sm:elsa-flex-row-reverse\">\r\n                  <button type=\"button\"\r\n                          onClick={this.handleDefaultClose}\r\n                          class=\"elsa-mt-3 elsa-w-full elsa-inline-flex elsa-justify-center elsa-rounded-md elsa-border elsa-border-gray-300 elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-bg-white elsa-text-base elsa-font-medium elsa-text-gray-700 hover:elsa-bg-gray-50 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-mt-0 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm\">\r\n                    Close\r\n                  </button>\r\n                </div>\r\n              </slot>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Host>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}