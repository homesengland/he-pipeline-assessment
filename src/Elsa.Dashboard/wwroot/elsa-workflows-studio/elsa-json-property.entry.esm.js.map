{"version":3,"file":"elsa-json-property.entry.esm.js","sources":["src/components/editors/properties/elsa-json-property/elsa-json-property.tsx"],"sourcesContent":["import {Component, h, Prop, State} from '@stencil/core';\r\nimport { ActivityDefinitionProperty, ActivityModel, ActivityPropertyDescriptor, PropertySettings, SyntaxNames} from \"../../../../models\";\r\nimport {MonacoValueChangedArgs} from \"../../../controls/elsa-monaco/elsa-monaco\";\r\n\r\n@Component({\r\n  tag: 'elsa-json-property',\r\n  shadow: false,\r\n})\r\nexport class ElsaJsonProperty {\r\n\r\n  @Prop() activityModel: ActivityModel;\r\n  @Prop() propertyDescriptor: ActivityPropertyDescriptor;\r\n  @Prop() propertyModel: ActivityDefinitionProperty;\r\n  @State() currentValue: string;\r\n\r\n  componentWillLoad() {\r\n    const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Json;\r\n    this.currentValue = this.propertyModel.expressions[defaultSyntax] || undefined;\r\n  }\r\n\r\n  getEditorHeight(options?: PropertySettings) {\r\n    const editorHeightName = options?.editorHeight || 'Large';\r\n\r\n    switch (editorHeightName) {\r\n      case 'Large':\r\n        return '20em';\r\n    }\r\n    return '15em';\r\n  }\r\n\r\n  onMonacoValueChanged(e: MonacoValueChangedArgs) {\r\n    this.propertyModel.expressions[SyntaxNames.Json] = this.currentValue = e.value;\r\n  }\r\n\r\n  onDefaultSyntaxValueChanged(e: CustomEvent) {\r\n    this.currentValue = e.detail;\r\n  }\r\n\r\n  render() {\r\n    const propertyDescriptor = this.propertyDescriptor;\r\n    const propertyModel = this.propertyModel;\r\n    const options = propertyDescriptor.options as PropertySettings;\r\n    const editorHeight = this.getEditorHeight(options);\r\n    const context: string = options?.context;\r\n    let value = this.currentValue;\r\n\r\n    if (value == undefined) {\r\n      const defaultValue = this.propertyDescriptor.defaultValue;\r\n      value = defaultValue ? defaultValue.toString() : undefined;\r\n    }\r\n\r\n    return (\r\n      <elsa-property-editor\r\n        activityModel={this.activityModel}\r\n        propertyDescriptor={propertyDescriptor}\r\n        propertyModel={propertyModel}\r\n        onDefaultSyntaxValueChanged={e => this.onDefaultSyntaxValueChanged(e)}\r\n        editor-height={editorHeight}\r\n        context={context}>\r\n        <elsa-monaco value={value}\r\n                     language=\"json\"\r\n                     editor-height={editorHeight}\r\n                     onValueChanged={e => this.onMonacoValueChanged(e.detail)}\r\n        />\r\n      </elsa-property-editor>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;MAQa,gBAAgB,GAAA,MAAA;;;;IAO3B,iBAAiB,GAAA;QACf,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,IAAI,WAAW,CAAC,IAAI;AAC/E,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,SAAS;;AAGhF,IAAA,eAAe,CAAC,OAA0B,EAAA;QACxC,MAAM,gBAAgB,GAAG,CAAA,OAAO,KAAP,IAAA,IAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,YAAY,KAAI,OAAO;QAEzD,QAAQ,gBAAgB;AACtB,YAAA,KAAK,OAAO;AACV,gBAAA,OAAO,MAAM;;AAEjB,QAAA,OAAO,MAAM;;AAGf,IAAA,oBAAoB,CAAC,CAAyB,EAAA;AAC5C,QAAA,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,KAAK;;AAGhF,IAAA,2BAA2B,CAAC,CAAc,EAAA;AACxC,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,MAAM;;IAG9B,MAAM,GAAA;AACJ,QAAA,MAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB;AAClD,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa;AACxC,QAAA,MAAM,OAAO,GAAG,kBAAkB,CAAC,OAA2B;QAC9D,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;QAClD,MAAM,OAAO,GAAW,OAAO,KAAA,IAAA,IAAP,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,OAAO;AACxC,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY;AAE7B,QAAA,IAAI,KAAK,IAAI,SAAS,EAAE;AACtB,YAAA,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY;AACzD,YAAA,KAAK,GAAG,YAAY,GAAG,YAAY,CAAC,QAAQ,EAAE,GAAG,SAAS;;AAG5D,QAAA,QACE,CAAA,CAAA,sBAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EACE,aAAa,EAAE,IAAI,CAAC,aAAa,EACjC,kBAAkB,EAAE,kBAAkB,EACtC,aAAa,EAAE,aAAa,EAC5B,2BAA2B,EAAE,CAAC,IAAI,IAAI,CAAC,2BAA2B,CAAC,CAAC,CAAC,EACtD,eAAA,EAAA,YAAY,EAC3B,OAAO,EAAE,OAAO,EAAA,EAChB,CAAa,CAAA,aAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAC,MAAM,EACA,eAAA,EAAA,YAAY,EAC3B,cAAc,EAAE,CAAC,IAAI,IAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,MAAM,CAAC,EAAA,CACnE,CACmB;;;;;;"}