{"version":3,"file":"elsa-multi-line-property.entry.esm.js","sources":["src/components/editors/properties/elsa-multi-line-property/elsa-multi-line-property.tsx"],"sourcesContent":["import {Component, h, Prop, State} from '@stencil/core';\r\nimport {ActivityDefinitionProperty, ActivityModel, ActivityPropertyDescriptor, PropertySettings, SyntaxNames} from \"../../../../models\";\r\n\r\n@Component({\r\n  tag: 'elsa-multi-line-property',\r\n  shadow: false,\r\n})\r\nexport class ElsaMultiLineProperty {\r\n\r\n  @Prop() activityModel: ActivityModel;\r\n  @Prop() propertyDescriptor: ActivityPropertyDescriptor;\r\n  @Prop() propertyModel: ActivityDefinitionProperty;\r\n  @State() currentValue: string;\r\n\r\n  componentWillLoad() {\r\n    const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Literal;\r\n    this.currentValue = this.propertyModel.expressions[defaultSyntax] || undefined;\r\n  }\r\n\r\n  getEditorHeight(options?: PropertySettings) {\r\n    const editorHeightName = options?.editorHeight || 'Default';\r\n\r\n    switch (editorHeightName) {\r\n      case 'Large':\r\n        return {propertyEditor: '20em', textArea: 6}\r\n    }\r\n    return {propertyEditor: '15em', textArea: 3}\r\n  }\r\n\r\n  onChange(e: Event) {\r\n    const input = e.currentTarget as HTMLTextAreaElement;\r\n    this.propertyModel.expressions['Literal'] = this.currentValue = input.value;\r\n  }\r\n\r\n  onDefaultSyntaxValueChanged(e: CustomEvent) {\r\n    this.currentValue = e.detail;\r\n  }\r\n\r\n  render() {\r\n    const propertyDescriptor = this.propertyDescriptor;\r\n    const propertyModel = this.propertyModel;\r\n    const propertyName = propertyDescriptor.name;\r\n    const options = propertyDescriptor.options as PropertySettings;\r\n    const editorHeight = this.getEditorHeight(options);\r\n    const context: string = options?.context;\r\n    const fieldId = propertyName;\r\n    const fieldName = propertyName;\r\n    let value = this.currentValue;\r\n\r\n    if (value == undefined) {\r\n      const defaultValue = this.propertyDescriptor.defaultValue;\r\n      value = defaultValue ? defaultValue.toString() : undefined;\r\n    }\r\n\r\n    return (\r\n      <elsa-property-editor\r\n        activityModel={this.activityModel}\r\n        propertyDescriptor={propertyDescriptor}\r\n        propertyModel={propertyModel}\r\n        onDefaultSyntaxValueChanged={e => this.onDefaultSyntaxValueChanged(e)}\r\n        editor-height={editorHeight.propertyEditor}\r\n        context={context}>\r\n        <textarea id={fieldId} name={fieldName} value={value} onChange={e => this.onChange(e)}\r\n                  class=\"focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300\"\r\n                  rows={editorHeight.textArea}/>\r\n      </elsa-property-editor>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;MAOa,qBAAqB,GAAA,MAAA;;;;IAOhC,iBAAiB,GAAA;QACf,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,IAAI,WAAW,CAAC,OAAO;AAClF,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,SAAS;;AAGhF,IAAA,eAAe,CAAC,OAA0B,EAAA;QACxC,MAAM,gBAAgB,GAAG,CAAA,OAAO,KAAP,IAAA,IAAA,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,YAAY,KAAI,SAAS;QAE3D,QAAQ,gBAAgB;AACtB,YAAA,KAAK,OAAO;gBACV,OAAO,EAAC,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,EAAC;;QAEhD,OAAO,EAAC,cAAc,EAAE,MAAM,EAAE,QAAQ,EAAE,CAAC,EAAC;;AAG9C,IAAA,QAAQ,CAAC,CAAQ,EAAA;AACf,QAAA,MAAM,KAAK,GAAG,CAAC,CAAC,aAAoC;AACpD,QAAA,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,KAAK;;AAG7E,IAAA,2BAA2B,CAAC,CAAc,EAAA;AACxC,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,MAAM;;IAG9B,MAAM,GAAA;AACJ,QAAA,MAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB;AAClD,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa;AACxC,QAAA,MAAM,YAAY,GAAG,kBAAkB,CAAC,IAAI;AAC5C,QAAA,MAAM,OAAO,GAAG,kBAAkB,CAAC,OAA2B;QAC9D,MAAM,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;QAClD,MAAM,OAAO,GAAW,OAAO,KAAA,IAAA,IAAP,OAAO,KAAP,KAAA,CAAA,GAAA,KAAA,CAAA,GAAA,OAAO,CAAE,OAAO;QACxC,MAAM,OAAO,GAAG,YAAY;QAC5B,MAAM,SAAS,GAAG,YAAY;AAC9B,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY;AAE7B,QAAA,IAAI,KAAK,IAAI,SAAS,EAAE;AACtB,YAAA,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY;AACzD,YAAA,KAAK,GAAG,YAAY,GAAG,YAAY,CAAC,QAAQ,EAAE,GAAG,SAAS;;QAG5D,QACE,CAAA,CAAA,sBAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EACE,aAAa,EAAE,IAAI,CAAC,aAAa,EACjC,kBAAkB,EAAE,kBAAkB,EACtC,aAAa,EAAE,aAAa,EAC5B,2BAA2B,EAAE,CAAC,IAAI,IAAI,CAAC,2BAA2B,CAAC,CAAC,CAAC,EAAA,eAAA,EACtD,YAAY,CAAC,cAAc,EAC1C,OAAO,EAAE,OAAO,EAAA,EAChB,CAAA,CAAA,UAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAU,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAC3E,KAAK,EAAC,8IAA8I,EACpJ,IAAI,EAAE,YAAY,CAAC,QAAQ,EAAG,CAAA,CACnB;;;;;;"}