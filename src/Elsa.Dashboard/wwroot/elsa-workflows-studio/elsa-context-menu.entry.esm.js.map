{"version":3,"file":"elsa-context-menu.entry.esm.js","sources":["src/components/controls/elsa-context-menu/elsa-context-menu.tsx"],"sourcesContent":["import {Component, h, Listen, Prop} from '@stencil/core';\r\nimport {RouterHistory} from \"@stencil/router\";\r\nimport {leave, toggle} from 'el-transition'\r\nimport {MenuItem} from \"./models\";\r\n\r\n@Component({\r\n  tag: 'elsa-context-menu',\r\n  shadow: false,\r\n})\r\nexport class ElsaContextMenu {\r\n  @Prop() history: RouterHistory;\r\n  @Prop() menuItems: Array<MenuItem> = [];\r\n\r\n  navigate: (path: string) => void;\r\n  contextMenu: HTMLElement;\r\n  element: HTMLElement;\r\n\r\n  componentWillLoad() {\r\n    if (!!this.history)\r\n      this.navigate = this.history.push;\r\n    else\r\n      this.navigate = path => document.location.href = path;\r\n  }\r\n\r\n  @Listen('click', {target: 'window'})\r\n  onWindowClicked(event: Event){\r\n    const target = event.target as HTMLElement;\r\n\r\n    if (!this.element.contains(target))\r\n      this.closeContextMenu();\r\n  }\r\n\r\n  closeContextMenu() {\r\n    if (!!this.contextMenu)\r\n      leave(this.contextMenu);\r\n  }\r\n\r\n  toggleMenu() {\r\n    toggle(this.contextMenu);\r\n  }\r\n\r\n  async onMenuItemClick(e: Event, menuItem: MenuItem) {\r\n    e.preventDefault();\r\n\r\n    if (!!menuItem.anchorUrl) {\r\n      this.navigate(menuItem.anchorUrl);\r\n    } else if (!!menuItem.clickHandler) {\r\n      menuItem.clickHandler(e);\r\n    }\r\n\r\n    this.closeContextMenu();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"elsa-relative elsa-flex elsa-justify-end elsa-items-center\" ref={el => this.element = el}>\r\n        <button onClick={() => this.toggleMenu()} aria-has-popup=\"true\" type=\"button\"\r\n                class=\"elsa-w-8 elsa-h-8 elsa-inline-flex elsa-items-center elsa-justify-center elsa-text-gray-400 elsa-rounded-full elsa-bg-transparent hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-text-gray-500 focus:elsa-bg-gray-100 elsa-transition elsa-ease-in-out elsa-duration-150\">\r\n          <svg class=\"elsa-w-5 elsa-h-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path d=\"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z\"/>\r\n          </svg>\r\n        </button>\r\n        <div ref={el => this.contextMenu = el}\r\n             data-transition-enter=\"elsa-transition elsa-ease-out elsa-duration-100\"\r\n             data-transition-enter-start=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n             data-transition-leave=\"elsa-transition elsa-ease-in elsa-duration-75\"\r\n             data-transition-leave-start=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n             data-transition-leave-end=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n             class=\"hidden elsa-z-10 elsa-mx-3 elsa-origin-top-right elsa-absolute elsa-right-7 elsa-top-0 elsa-w-48 elsa-mt-1 elsa-rounded-md elsa-shadow-lg\">\r\n          <div class=\"elsa-rounded-md elsa-bg-white elsa-shadow-xs\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"project-options-menu-0\">\r\n            {this.menuItems.map(menuItem => {\r\n              const anchorUrl = menuItem.anchorUrl || '#';\r\n              return (\r\n                <div class=\"elsa-py-1\">\r\n                  <a href={anchorUrl}\r\n                     onClick={e => this.onMenuItemClick(e, menuItem)}\r\n                     class=\"elsa-group elsa-flex elsa-items-center elsa-px-4 elsa-py-2 elsa-text-sm elsa-leading-5 elsa-text-gray-700 hover:elsa-bg-gray-100 hover:elsa-text-gray-900 focus:elsa-outline-none focus:elsa-bg-gray-100 focus:elsa-text-gray-900\"\r\n                     role=\"menuitem\">\r\n                    {menuItem.icon ? <span class=\"elsa-mr-3 \">{menuItem.icon}</span> : undefined}\r\n                    {menuItem.text}\r\n                  </a>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}