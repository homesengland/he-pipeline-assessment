{"version":3,"file":"elsa-webhook-definitions-list-screen.entry.esm.js","sources":["src/modules/elsa-webhooks/components/screens/webhook-definition-list/else-webhook-definitions-screen/elsa-webhook-definitions-list-screen.tsx"],"sourcesContent":["import {Component, h, Prop, State} from '@stencil/core';\nimport * as collection from 'lodash/collection';\nimport {createElsaWebhooksClient} from \"../../../../services/elsa-client\";\nimport {PagedList} from \"../../../../../../models\";\nimport {WebhookDefinitionSummary} from \"../../../../models\";\nimport {RouterHistory} from \"@stencil/router\";\nimport Tunnel from \"../../../../../../data/dashboard\";\n\n@Component({\n  tag: 'elsa-webhook-definitions-list-screen',\n  shadow: false,\n})\nexport class ElsaWebhookDefinitionsListScreen {\n  @Prop() history?: RouterHistory;\n  @Prop() serverUrl: string;\n  @Prop() basePath: string;\n  @Prop() culture: string;\n  @State() webhookDefinitions: PagedList<WebhookDefinitionSummary> = {items: [], page: 1, pageSize: 50, totalCount: 0};\n\n  confirmDialog: HTMLElsaConfirmDialogElement;\n\n  async componentWillLoad() {\n    await this.loadWebhookDefinitions();\n  }\n\n  async onDeleteClick(e: Event, webhookDefinition: WebhookDefinitionSummary) {\n    const result = await this.confirmDialog.show('Delete Webhook Definition', 'Are you sure you wish to permanently delete this webhook?');\n\n    if (!result)\n      return;\n\n  const elsaClient = await createElsaWebhooksClient(this.serverUrl);\n    await elsaClient.webhookDefinitionsApi.delete(webhookDefinition.id);\n    await this.loadWebhookDefinitions();\n  }\n\n  async loadWebhookDefinitions() {\n  const elsaClient = await createElsaWebhooksClient(this.serverUrl);\n    const page = 0;\n    const pageSize = 50;\n    this.webhookDefinitions = await elsaClient.webhookDefinitionsApi.list(page, pageSize);\n  }\n\n  render() {\n    const webhookDefinitions = this.webhookDefinitions;\n    const list = collection.orderBy(webhookDefinitions, 'name');\n    const basePath = this.basePath;\n\n    return (\n      <div>\n        <div class=\"elsa-align-middle elsa-inline-block elsa-min-w-full elsa-border-b elsa-border-gray-200\">\n          <table class=\"elsa-min-w-full\">\n            <thead>\n            <tr class=\"elsa-border-t elsa-border-gray-200\">\n              <th class=\"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider\"><span class=\"lg:elsa-pl-2\">Name</span></th>\n              <th class=\"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider\">\n                Path\n              </th>\n              <th class=\"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider\">\n                Payload Type Name\n              </th>\n              <th class=\"elsa-px-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-left elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider\">\n                Enabled\n              </th>\n              <th class=\"elsa-pr-6 elsa-py-3 elsa-border-b elsa-border-gray-200 elsa-bg-gray-50 elsa-text-right elsa-text-xs elsa-leading-4 elsa-font-medium elsa-text-gray-500 elsa-uppercase elsa-tracking-wider\"/>\n            </tr>\n            </thead>\n            <tbody class=\"elsa-bg-white elsa-divide-y elsa-divide-gray-100\">\n            {collection.map(list, item => {\n\n              const webhookDefinition: WebhookDefinitionSummary = item;\n              let webhookDisplayName = webhookDefinition.name;\n\n              if (!webhookDisplayName || webhookDisplayName.trim().length == 0)\n              webhookDisplayName = webhookDefinition.name;\n\n              if (!webhookDisplayName || webhookDisplayName.trim().length == 0)\n              webhookDisplayName = 'Untitled';\n\n              const editUrl = `${basePath}/webhook-definitions/${webhookDefinition.id}`;\n\n              const editIcon = (\n                <svg class=\"elsa-h-5 elsa-w-5 elsa-text-gray-500\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                  <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"/>\n                  <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"/>\n                </svg>\n              );\n\n              const deleteIcon = (\n                <svg class=\"elsa-h-5 elsa-w-5 elsa-text-gray-500\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\" stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                  <path stroke=\"none\" d=\"M0 0h24v24H0z\"/>\n                  <line x1=\"4\" y1=\"7\" x2=\"20\" y2=\"7\"/>\n                  <line x1=\"10\" y1=\"11\" x2=\"10\" y2=\"17\"/>\n                  <line x1=\"14\" y1=\"11\" x2=\"14\" y2=\"17\"/>\n                  <path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\"/>\n                  <path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\"/>\n                </svg>\n              );\n\n              return (\n                <tr>\n                  <td class=\"elsa-px-6 elsa-py-3 elsa-whitespace-no-wrap elsa-text-sm elsa-leading-5 elsa-font-medium elsa-text-gray-900\">\n                    <div class=\"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2\">\n                      <elsa-nav-link url={editUrl} anchorClass=\"elsa-truncate hover:elsa-text-gray-600\"><span>{webhookDisplayName}</span></elsa-nav-link>\n                    </div>\n                  </td>\n\n                  <td class=\"elsa-px-6 elsa-py-3 elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-font-medium\">\n                    <div class=\"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2\">\n                      {webhookDefinition.path}\n                    </div>\n                  </td>\n\n                  <td class=\"elsa-px-6 elsa-py-3 elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-font-medium\">\n                    <div class=\"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2\">\n                      {webhookDefinition.payloadTypeName}\n                    </div>\n                  </td>\n\n                  <td class=\"elsa-px-6 elsa-py-3 elsa-text-sm elsa-leading-5 elsa-text-gray-500 elsa-font-medium\">\n                    <div class=\"elsa-flex elsa-items-center elsa-space-x-3 lg:elsa-pl-2\">\n                      {true == webhookDefinition.isEnabled ? 'Yes' : 'No'}\n                    </div>\n                  </td>\n\n                  <td class=\"elsa-pr-6\">\n                    <elsa-context-menu history={this.history} menuItems={[\n                      {text: 'Edit', anchorUrl: editUrl, icon: editIcon},\n                      {text: 'Delete', clickHandler: e => this.onDeleteClick(e, webhookDefinition), icon: deleteIcon}\n                    ]}/>\n                  </td>\n                </tr>\n              );\n            })}\n            </tbody>\n          </table>\n        </div>\n\n        <elsa-confirm-dialog ref={el => this.confirmDialog = el}/>\n      </div>\n    );\n  }\n}\nTunnel.injectProps(ElsaWebhookDefinitionsListScreen, ['serverUrl', 'culture', 'basePath']);\n"],"names":["collection.orderBy","collection.map"],"mappings":"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"}