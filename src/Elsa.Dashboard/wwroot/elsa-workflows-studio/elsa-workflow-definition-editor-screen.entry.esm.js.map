{"version":3,"file":"elsa-workflow-definition-editor-screen.entry.esm.js","sources":["src/utils/download.ts","src/components/screens/workflow-definition-editor/elsa-workflow-definition-editor-screen/localizations.ts","src/components/screens/workflow-definition-editor/elsa-workflow-definition-editor-screen/elsa-workflow-definition-editor-screen.css?tag=elsa-workflow-definition-editor-screen","src/components/screens/workflow-definition-editor/elsa-workflow-definition-editor-screen/elsa-workflow-definition-editor-screen.tsx"],"sourcesContent":["﻿export interface DownloadOptions {\r\n  fileName?: string;\r\n  contentType?: string;\r\n}\r\n\r\nexport function downloadFromUrl(url: string, options: DownloadOptions) {\r\n  const anchorElement = document.createElement('a');\r\n  anchorElement.href = url;\r\n  anchorElement.download = options.fileName !== null && options.fileName !== void 0 ? options.fileName : '';\r\n  anchorElement.click();\r\n  anchorElement.remove();\r\n}\r\n\r\nexport function downloadFromBytes(content: Uint8Array, options: DownloadOptions) {\r\n  const contentType = options.contentType || 'application/octet-stream';\r\n  const base64String = btoa(String.fromCharCode(...content));\r\n  const url = `data:${contentType}\";base64,${base64String}`;\r\n  downloadFromUrl(url, {fileName: options.fileName});\r\n}\r\n\r\nexport function downloadFromText(content: string, options: DownloadOptions) {\r\n  const utf8Encode = new TextEncoder();\r\n  const bytes = utf8Encode.encode(content);\r\n  downloadFromBytes(bytes, options)\r\n}\r\n\r\nexport function downloadFromBlob(content: Blob, options: DownloadOptions) {\r\n  const url = window.URL.createObjectURL(content);\r\n  downloadFromUrl(url, options)\r\n}\r\n","export const resources = {\r\n  'en': {\r\n    'default': {\r\n      'Publishing': 'Publishing...',\r\n      'Published': 'Published',\r\n      \"ActivityContextMenu\": {\r\n        \"Edit\": \"Edit\",\r\n        \"Delete\": \"Delete\",\r\n        \"DeleteSelected\": \"Delete Selected\"\r\n      },\r\n      \"ConnectionContextMenu\": {\r\n        \"Paste\": \"Paste\",\r\n      },\r\n      'Restart': 'Restart',\r\n      'DeleteConfirmationModel': {\r\n        'Title': 'Delete Workflow Definition',\r\n        'Message': 'Are you sure you wish to permanently delete this workflow, including all of its workflow instances?'\r\n      }\r\n    }\r\n  },\r\n  'zh-CN': {\r\n    'default': {\r\n      'Publishing': '发布中...',\r\n      'Published': '已发布',\r\n      \"ActivityContextMenu\": {\r\n        \"Edit\": \"编辑\",\r\n        \"Delete\": \"删除\",\r\n        \"DeleteSelected\": \"删除所选\"\r\n      },\r\n      \"ConnectionContextMenu\": {\r\n        \"Paste\": \"粘贴\",\r\n      },\r\n      'Restart': '重启',\r\n      'DeleteConfirmationModel': {\r\n        'Title': '删除工作流程定义',\r\n        'Message': '你确定要永久删除这个工作流程，包括它的所有工作流程实例？'\r\n      }\r\n    }\r\n  },\r\n  'nl-NL': {\r\n    'default': {\r\n      'Publishing': 'Publiceren...',\r\n      'Published': 'Gepubliceerd',\r\n      \"ActivityContextMenu\": {\r\n        \"Edit\": \"Bewerken\",\r\n        \"Delete\": \"Verwijderen\",\r\n        \"DeleteSelected\": \"Verwijder Geselecteerde\"\r\n      },\r\n      \"ConnectionContextMenu\": {\r\n        \"Paste\": \"Plakken\",\r\n      },\r\n      'Restart': 'Herstarten',\r\n      'DeleteConfirmationModel': {\r\n        'Title': 'Verwijder Workflow Definitie',\r\n        'Message': 'Weet je zeker dat je deze workflow permanent wilt verwijderen, inclusief alle bijbehorende workflow instanties?'\r\n      }\r\n    }\r\n  },\r\n  'fa-IR': {\r\n    'default': {\r\n      'Publishing': 'در حال انتشار...',\r\n      'Published': 'منتشر شده',\r\n      \"ActivityContextMenu\": {\r\n        \"Edit\": \"ویرایش\",\r\n        \"Delete\": \"حذف\",\r\n        \"DeleteSelected\": \"حذف موارد انتخاب شده\"\r\n      },\r\n      \"ConnectionContextMenu\": {\r\n        \"Paste\": \"Paste\",\r\n      },\r\n      'Restart': 'راه اندازی مجدد',\r\n      'DeleteConfirmationModel': {\r\n        'Title': 'حذف تعریف فرآیند',\r\n        'Message': 'آیا از حذف این فرآیند و همه جریانهای آن اطمینان دارید?'\r\n      }\r\n    }\r\n  },\r\n  'de-DE': {\r\n    'default': {\r\n      'Publishing': 'Am veröffentlichen',\r\n      'Published': 'Veröffentlicht',\r\n      \"ActivityContextMenu\": {\r\n        \"Edit\": \"Bearbeiten\",\r\n        \"Delete\": \"Entfernen\",\r\n        \"DeleteSelected\": \"Ausgewählte entfernen\"\r\n      },\r\n      \"ConnectionContextMenu\": {\r\n        \"Paste\": \"Einfügen\",\r\n      },\r\n      'Restart': 'Neustarten',\r\n      'DeleteConfirmationModel': {\r\n        'Title': 'Ablaufdefinition entfernen',\r\n        'Message': 'Sind Sie sicher, dass sie die Definition und die dazugehörigen Instanzen unwiderruflich löschen wollen?'\r\n      }\r\n    }\r\n  },\r\n};\r\n",".svg-loader {\r\n    height: 2rem;\r\n    vertical-align: top;\r\n }","import { Component, Event, EventEmitter, h, Host, Listen, Method, Prop, State, Watch } from '@stencil/core';\r\nimport { injectHistory, RouterHistory } from '@stencil/router';\r\nimport {\r\n  ActivityDefinition,\r\n  ActivityDescriptor,\r\n  ActivityModel,\r\n  ComponentCustomButtonClickContext,\r\n  ConfigureComponentCustomButtonContext,\r\n  ConnectionDefinition,\r\n  ConnectionModel,\r\n  EventTypes,\r\n  VersionOptions,\r\n  WorkflowDefinition,\r\n  WorkflowDefinitionVersion,\r\n  WorkflowInstance,\r\n  WorkflowModel,\r\n  WorkflowPersistenceBehavior,\r\n  WorkflowTestActivityMessage,\r\n  WorkflowTestActivityMessageStatus,\r\n} from '../../../../models';\r\nimport { ActivityStats, createElsaClient, eventBus, featuresDataManager, monacoEditorDialogService, SaveWorkflowDefinitionRequest } from '../../../../services';\r\nimport state from '../../../../utils/store';\r\nimport WorkflowEditorTunnel, { WorkflowEditorState } from '../../../../data/workflow-editor';\r\nimport DashboardTunnel from '../../../../data/dashboard';\r\nimport { downloadFromBlob } from '../../../../utils/download';\r\nimport { ActivityContextMenuState, LayoutDirection, WorkflowDesignerMode } from '../../../designers/tree/elsa-designer-tree/models';\r\nimport { i18n } from 'i18next';\r\nimport { loadTranslations } from '../../../i18n/i18n-loader';\r\nimport { resources } from './localizations';\r\nimport * as collection from 'lodash/collection';\r\nimport { tr } from 'cronstrue/dist/i18n/locales/tr';\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-definition-editor-screen',\r\n  styleUrl: 'elsa-workflow-definition-editor-screen.css',\r\n  shadow: false,\r\n})\r\nexport class ElsaWorkflowDefinitionEditorScreen {\r\n  @Event() workflowSaved: EventEmitter<WorkflowDefinition>;\r\n  @Prop({ attribute: 'workflow-definition-id', reflect: true }) workflowDefinitionId: string;\r\n  @Prop({ attribute: 'server-url', reflect: true }) serverUrl: string;\r\n  @Prop({ attribute: 'monaco-lib-path', reflect: true }) monacoLibPath: string;\r\n  @Prop() features: string;\r\n  @Prop() culture: string;\r\n  @Prop() basePath: string;\r\n  @Prop() serverFeatures: Array<string> = [];\r\n  @Prop() history: RouterHistory;\r\n  @State() workflowDefinition: WorkflowDefinition;\r\n  @State() workflowModel: WorkflowModel;\r\n  @State() publishing: boolean;\r\n  @State() unPublishing: boolean;\r\n  @State() unPublished: boolean;\r\n  @State() saving: boolean;\r\n  @State() saved: boolean;\r\n  @State() importing: boolean;\r\n  @State() imported: boolean;\r\n  @State() reverting: boolean;\r\n  @State() reverted: boolean;\r\n  @State() networkError: string;\r\n  @State() selectedActivityId?: string;\r\n  @State() workflowDesignerMode: WorkflowDesignerMode;\r\n  @State() workflowTestActivityMessages: Array<WorkflowTestActivityMessage> = [];\r\n  @State() workflowInstance?: WorkflowInstance;\r\n  @State() workflowInstanceId?: string;\r\n  @State() activityStats?: ActivityStats;\r\n  @State() layoutDirection: LayoutDirection = LayoutDirection.TopBottom;//???\r\n\r\n  @State() activityContextMenuState: ActivityContextMenuState = {\r\n    shown: false,\r\n    x: 0,\r\n    y: 0,\r\n    activity: null,\r\n    selectedActivities: {},\r\n  };\r\n\r\n  // @State() connectionContextMenuState: ActivityContextMenuState = {\r\n  //   shown: false,\r\n  //   x: 0,\r\n  //   y: 0,\r\n  //   activity: null,\r\n  // };\r\n\r\n  @State() activityContextMenuTestState: ActivityContextMenuState = {\r\n    shown: false,\r\n    x: 0,\r\n    y: 0,\r\n    activity: null,\r\n  };\r\n\r\n  i18next: i18n;\r\n  el: HTMLElement;\r\n  designer: HTMLElsaDesignerTreeElement;\r\n  configureComponentCustomButtonContext: ConfigureComponentCustomButtonContext = null;\r\n  helpDialog: HTMLElsaModalDialogElement;\r\n  activityContextMenu: HTMLDivElement;\r\n  componentCustomButton: HTMLDivElement;\r\n  confirmDialog: HTMLElsaConfirmDialogElement;\r\n\r\n  //connectionContextMenu: HTMLDivElement;\r\n\r\n  @Method()\r\n  async getServerUrl(): Promise<string> {\r\n    return this.serverUrl;\r\n  }\r\n\r\n  @Method()\r\n  async getWorkflowDefinitionId(): Promise<string> {\r\n    return this.workflowDefinition.definitionId;\r\n  }\r\n\r\n  @Method()\r\n  async exportWorkflow() {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    const workflowDefinition = this.workflowDefinition;\r\n    const versionOptions: VersionOptions = { version: workflowDefinition.version };\r\n    const response = await client.workflowDefinitionsApi.export(workflowDefinition.definitionId, versionOptions);\r\n    downloadFromBlob(response.data, { contentType: 'application/json', fileName: response.fileName });\r\n  }\r\n\r\n  @Method()\r\n  async importWorkflow(file: File) {\r\n    const client = await createElsaClient(this.serverUrl);\r\n\r\n    this.importing = true;\r\n    this.imported = false;\r\n    this.networkError = null;\r\n\r\n    try {\r\n      const workflowDefinition = await client.workflowDefinitionsApi.import(this.workflowDefinition.definitionId, file);\r\n      this.workflowDefinition = workflowDefinition;\r\n      this.workflowModel = this.mapWorkflowModel(workflowDefinition);\r\n      this.updateUrl(workflowDefinition.definitionId);\r\n\r\n      this.importing = false;\r\n      this.imported = true;\r\n      setTimeout(() => (this.imported = false), 500);\r\n      await eventBus.emit(EventTypes.WorkflowImported, this, this.workflowModel);\r\n    } catch (e) {\r\n      console.error(e);\r\n      this.importing = false;\r\n      this.imported = false;\r\n      this.networkError = e.message;\r\n      setTimeout(() => (this.networkError = null), 10000);\r\n    }\r\n  }\r\n\r\n  @Watch('workflowDefinitionId')\r\n  async workflowDefinitionIdChangedHandler(newValue: string) {\r\n    const workflowDefinitionId = newValue;\r\n    let workflowDefinition: WorkflowDefinition = ElsaWorkflowDefinitionEditorScreen.createWorkflowDefinition();\r\n    workflowDefinition.definitionId = workflowDefinitionId;\r\n    const client = await createElsaClient(this.serverUrl);\r\n\r\n    if (workflowDefinitionId && workflowDefinitionId.length > 0) {\r\n      try {\r\n        workflowDefinition = await client.workflowDefinitionsApi.getByDefinitionAndVersion(workflowDefinitionId, { isLatest: true });\r\n      } catch {\r\n        console.warn(`The specified workflow definition does not exist. Creating a new one.`);\r\n      }\r\n    }\r\n\r\n    this.updateWorkflowDefinition(workflowDefinition);\r\n  }\r\n\r\n  @Watch('serverUrl')\r\n  async serverUrlChangedHandler(newValue: string) {\r\n    if (newValue && newValue.length > 0) {\r\n      await this.loadActivityDescriptors();\r\n      await this.loadWorkflowStorageDescriptors();\r\n    }\r\n  }\r\n\r\n  @Watch('monacoLibPath')\r\n  async monacoLibPathChangedHandler(newValue: string) {\r\n    state.monacoLibPath = newValue;\r\n  }\r\n\r\n  @Listen('workflow-changed')\r\n  async workflowChangedHandler(event: CustomEvent<WorkflowModel>) {\r\n    const workflowModel = event.detail;\r\n    await this.saveWorkflowInternal(workflowModel);\r\n  }\r\n\r\n  @Listen('click', { target: 'window' })\r\n  onWindowClicked(event: Event) {\r\n    const target = event.target as HTMLElement;\r\n\r\n    if (!this.componentCustomButton.contains(target)) this.handleContextMenuTestChange(0, 0, false, null);\r\n\r\n    if (!this.activityContextMenu.contains(target)) this.handleContextMenuChange({ x: 0, y: 0, shown: false, activity: null, selectedActivities: {} });\r\n\r\n    // if (!this.connectionContextMenu.contains(target))\r\n    //   this.handleConnectionContextMenuChange({x: 0, y: 0, shown: false, activity: null});\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    this.i18next = await loadTranslations(this.culture, resources);\r\n    this.workflowDesignerMode = WorkflowDesignerMode.Edit;\r\n\r\n    const layoutFeature = featuresDataManager.getFeatureConfig(featuresDataManager.supportedFeatures.workflowLayout);\r\n    if (layoutFeature && layoutFeature.enabled) {\r\n      this.layoutDirection = layoutFeature.value as LayoutDirection;\r\n    }\r\n    await this.serverUrlChangedHandler(this.serverUrl);\r\n    await this.workflowDefinitionIdChangedHandler(this.workflowDefinitionId);\r\n    await this.monacoLibPathChangedHandler(this.monacoLibPath);\r\n  }\r\n\r\n  async componentDidLoad() {\r\n    if (!this.designer) {\r\n      if (state.useX6Graphs) {\r\n        this.designer = this.el.querySelector(\"x6-designer\") as HTMLX6DesignerElement;\r\n      } else {\r\n        this.designer = this.el.querySelector('elsa-designer-tree') as HTMLElsaDesignerTreeElement;\r\n      }\r\n      this.designer.model = this.workflowModel;\r\n    }\r\n  }\r\n\r\n  componentDidRender() {\r\n    if (this.el && this.componentCustomButton) {\r\n      let modalX = this.activityContextMenuTestState.x + 64;\r\n      let modalY = this.activityContextMenuTestState.y - 256;\r\n\r\n      // Fit the modal to the canvas bounds\r\n      const canvasBounds = this.el?.getBoundingClientRect();\r\n      const modalBounds = this.componentCustomButton.getBoundingClientRect();\r\n      const modalWidth = modalBounds?.width;\r\n      const modalHeight = modalBounds?.height;\r\n      modalX = Math.min(canvasBounds.width, modalX + modalWidth + 32) - modalWidth - 32;\r\n      modalY = Math.min(canvasBounds.height, modalY + modalHeight) - modalHeight - 32;\r\n      modalY = Math.max(0, modalY);\r\n\r\n      this.componentCustomButton.style.left = `${modalX}px`;\r\n      this.componentCustomButton.style.top = `${modalY}px`;\r\n    }\r\n  }\r\n\r\n  connectedCallback() {\r\n    eventBus.on(EventTypes.UpdateWorkflowSettings, this.onUpdateWorkflowSettings);\r\n    eventBus.on(EventTypes.FlyoutPanelTabSelected, this.onFlyoutPanelTabSelected);\r\n    eventBus.on(EventTypes.TestActivityMessageReceived, this.onTestActivityMessageReceived);\r\n    eventBus.on(EventTypes.UpdateActivity, this.onUpdateActivity);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    eventBus.detach(EventTypes.UpdateWorkflowSettings, this.onUpdateWorkflowSettings);\r\n    eventBus.detach(EventTypes.FlyoutPanelTabSelected, this.onFlyoutPanelTabSelected);\r\n    eventBus.detach(EventTypes.TestActivityMessageReceived, this.onTestActivityMessageReceived);\r\n    eventBus.detach(EventTypes.UpdateActivity, this.onUpdateActivity);\r\n  }\r\n\r\n  async configureComponentCustomButton(message: WorkflowTestActivityMessage) {\r\n    this.configureComponentCustomButtonContext = {\r\n      component: 'elsa-workflow-definition-editor-screen',\r\n      activityType: message.activityType,\r\n      prop: null,\r\n      data: null,\r\n    };\r\n    await eventBus.emit(EventTypes.ComponentLoadingCustomButton, this, this.configureComponentCustomButtonContext);\r\n  }\r\n\r\n  t = (key: string) => this.i18next.t(key);\r\n\r\n  async loadActivityDescriptors() {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    state.activityDescriptors = await client.activitiesApi.list();\r\n  }\r\n\r\n  async loadWorkflowStorageDescriptors() {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    state.workflowStorageDescriptors = await client.workflowStorageProvidersApi.list();\r\n  }\r\n\r\n  async tryUpdateActivityInformation(activityId: string) {\r\n    if (!this.workflowInstanceId) {\r\n      this.activityStats = null;\r\n      this.workflowInstance = null;\r\n\r\n      return;\r\n    }\r\n\r\n    const client = await createElsaClient(this.serverUrl);\r\n\r\n    this.activityStats = await client.activityStatsApi.get(this.workflowInstanceId, activityId);\r\n\r\n    if (!this.workflowInstance || this.workflowInstance.id !== this.workflowInstanceId) this.workflowInstance = await client.workflowInstancesApi.get(this.workflowInstanceId);\r\n  }\r\n\r\n  updateWorkflowDefinition(value: WorkflowDefinition) {\r\n    this.workflowDefinition = value;\r\n    this.workflowModel = this.mapWorkflowModel(value);\r\n  }\r\n\r\n  async publishWorkflow() {\r\n    this.publishing = true;\r\n    await this.saveWorkflow(true);\r\n    this.publishing = false;\r\n    await eventBus.emit(EventTypes.WorkflowPublished, this, this.workflowDefinition);\r\n  }\r\n\r\n  async unpublishWorkflow() {\r\n    await this.unpublishWorkflowInternal();\r\n    await eventBus.emit(EventTypes.WorkflowRetracted, this, this.workflowDefinition);\r\n  }\r\n\r\n  async revertWorkflow() {\r\n    await this.revertWorkflowInternal();\r\n  }\r\n\r\n  async saveWorkflow(publish?: boolean) {\r\n    await this.saveWorkflowInternal(null, publish);\r\n  }\r\n\r\n  async saveWorkflowInternal(workflowModel?: WorkflowModel, publish?: boolean) {\r\n    if (!this.serverUrl || this.serverUrl.length == 0) return;\r\n\r\n    workflowModel = workflowModel || this.workflowModel;\r\n\r\n    const client = await createElsaClient(this.serverUrl);\r\n    let workflowDefinition = this.workflowDefinition;\r\n    const isNew = typeof workflowDefinition.definitionId === 'undefined' && typeof this.workflowDefinitionId === 'undefined';\r\n\r\n    const request: SaveWorkflowDefinitionRequest = {\r\n      workflowDefinitionId: workflowDefinition.definitionId || this.workflowDefinitionId,\r\n      contextOptions: workflowDefinition.contextOptions,\r\n      deleteCompletedInstances: workflowDefinition.deleteCompletedInstances,\r\n      description: workflowDefinition.description,\r\n      displayName: workflowDefinition.displayName,\r\n      isSingleton: workflowDefinition.isSingleton,\r\n      name: workflowDefinition.name,\r\n      tag: workflowDefinition.tag,\r\n      channel: workflowDefinition.channel,\r\n      persistenceBehavior: workflowDefinition.persistenceBehavior,\r\n      publish: publish || false,\r\n      variables: workflowDefinition.variables,\r\n      activities: workflowModel.activities.map<ActivityDefinition>(x => ({\r\n        activityId: x.activityId,\r\n        type: x.type,\r\n        name: x.name,\r\n        displayName: x.displayName,\r\n        description: x.description,\r\n        x: x.x,\r\n        y: x.y,\r\n        persistWorkflow: x.persistWorkflow,\r\n        loadWorkflowContext: x.loadWorkflowContext,\r\n        saveWorkflowContext: x.saveWorkflowContext,\r\n        properties: x.properties,\r\n        propertyStorageProviders: x.propertyStorageProviders,\r\n        category: '',\r\n      })),\r\n      connections: workflowModel.connections.map<ConnectionDefinition>(x => ({\r\n        sourceActivityId: x.sourceId,\r\n        targetActivityId: x.targetId,\r\n        outcome: x.outcome,\r\n      })),\r\n    };\r\n\r\n    this.saving = !publish;\r\n    this.publishing = publish;\r\n\r\n    try {\r\n      console.debug('Saving workflow...');\r\n\r\n      workflowDefinition = await client.workflowDefinitionsApi.save(request);\r\n      this.workflowDefinition = workflowDefinition;\r\n      this.workflowModel = this.mapWorkflowModel(workflowDefinition);\r\n\r\n      this.saving = false;\r\n      this.saved = !publish;\r\n      this.publishing = false;\r\n      setTimeout(() => (this.saved = false), 500);\r\n      this.workflowSaved.emit(workflowDefinition);\r\n      if (isNew) {\r\n        this.updateUrl(workflowDefinition.definitionId);\r\n      }\r\n    } catch (e) {\r\n      console.error(e);\r\n      this.saving = false;\r\n      this.saved = false;\r\n      this.networkError = e.message;\r\n      setTimeout(() => (this.networkError = null), 10000);\r\n    }\r\n  }\r\n\r\n  async unpublishWorkflowInternal() {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    const workflowDefinitionId = this.workflowDefinition.definitionId;\r\n    this.unPublishing = true;\r\n\r\n    try {\r\n      this.workflowDefinition = await client.workflowDefinitionsApi.retract(workflowDefinitionId);\r\n      this.unPublishing = false;\r\n      this.unPublished = true;\r\n      setTimeout(() => (this.unPublished = false), 500);\r\n    } catch (e) {\r\n      console.error(e);\r\n      this.unPublishing = false;\r\n      this.unPublished = false;\r\n      this.networkError = e.message;\r\n      setTimeout(() => (this.networkError = null), 2000);\r\n    }\r\n  }\r\n\r\n  async revertWorkflowInternal() {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    const workflowDefinitionId = this.workflowDefinition.definitionId;\r\n    const version = this.workflowDefinition.version;\r\n    this.reverting = true;\r\n\r\n    try {\r\n      this.workflowDefinition = await client.workflowDefinitionsApi.revert(workflowDefinitionId, version);\r\n      this.reverting = false;\r\n      this.reverted = true;\r\n      setTimeout(() => (this.reverted = false), 500);\r\n    } catch (e) {\r\n      console.error(e);\r\n      this.reverting = false;\r\n      this.reverted = false;\r\n      this.networkError = e.message;\r\n      setTimeout(() => (this.networkError = null), 2000);\r\n    }\r\n  }\r\n\r\n  updateUrl(id) {\r\n    if (this.history) {\r\n      this.history.push(`${this.basePath}/workflow-definitions/${id}`, {});\r\n    }\r\n  }\r\n\r\n  mapWorkflowModel(workflowDefinition: WorkflowDefinition): WorkflowModel {\r\n    return {\r\n      activities: workflowDefinition.activities.map(this.mapActivityModel),\r\n      connections: workflowDefinition.connections.map(this.mapConnectionModel),\r\n      persistenceBehavior: workflowDefinition.persistenceBehavior,\r\n\r\n    };\r\n  }\r\n\r\n  mapActivityModel(source: ActivityDefinition): ActivityModel {\r\n    const activityDescriptors: Array<ActivityDescriptor> = state.activityDescriptors;\r\n    const activityDescriptor = activityDescriptors.find(x => x.type == source.type);\r\n    const outcomes = !!activityDescriptor ? activityDescriptor.outcomes : ['Done'];\r\n\r\n    return {\r\n      activityId: source.activityId,\r\n      description: source.description,\r\n      displayName: source.displayName,\r\n      x: source.x,\r\n      y: source.y,\r\n      name: source.name,\r\n      type: source.type,\r\n      properties: source.properties,\r\n      outcomes: [...outcomes],\r\n      persistWorkflow: source.persistWorkflow,\r\n      saveWorkflowContext: source.saveWorkflowContext,\r\n      loadWorkflowContext: source.loadWorkflowContext,\r\n      propertyStorageProviders: source.propertyStorageProviders,\r\n    };\r\n  }\r\n\r\n  mapConnectionModel(source: ConnectionDefinition): ConnectionModel {\r\n    return {\r\n      sourceId: source.sourceActivityId,\r\n      targetId: source.targetActivityId,\r\n      outcome: source.outcome,\r\n    };\r\n  }\r\n\r\n  async handleContextMenuChange(state: ActivityContextMenuState) {\r\n    this.activityContextMenuState = state;\r\n  }\r\n\r\n  // handleConnectionContextMenuChange(state: ActivityContextMenuState) {\r\n  //   this.connectionContextMenuState = state;\r\n  // }\r\n\r\n  handleContextMenuTestChange(x: number, y: number, shown: boolean, activity: ActivityModel) {\r\n    this.activityContextMenuTestState = {\r\n      shown,\r\n      x,\r\n      y,\r\n      activity,\r\n    };\r\n  }\r\n\r\n  async onShowWorkflowSettingsClick() {\r\n    await eventBus.emit(EventTypes.ShowWorkflowSettings);\r\n  }\r\n\r\n  async onDeleteClicked() {\r\n    const t = this.t;\r\n    const result = await this.confirmDialog.show(t('DeleteConfirmationModel.Title'), t('DeleteConfirmationModel.Message'));\r\n\r\n    if (!result)\r\n      return;\r\n\r\n    const elsaClient = await createElsaClient(this.serverUrl);\r\n    await elsaClient.workflowDefinitionsApi.delete(this.workflowDefinition.definitionId, {allVersions: true});\r\n    this.history.push(`${this.basePath}/workflow-definitions`, {});\r\n  }\r\n\r\n  async onPublishClicked() {\r\n    await this.publishWorkflow();\r\n  }\r\n\r\n  async onUnPublishClicked() {\r\n    await this.unpublishWorkflow();\r\n  }\r\n\r\n  async onRevertClicked() {\r\n    await this.revertWorkflow();\r\n  }\r\n\r\n  async onExportClicked() {\r\n    await this.exportWorkflow();\r\n  }\r\n\r\n  async onImportClicked(file: File) {\r\n    await this.importWorkflow(file);\r\n  }\r\n\r\n  async onDeleteActivityClick(e: Event) {\r\n    e.preventDefault();\r\n    const { activity, selectedActivities } = this.activityContextMenuState;\r\n\r\n    if (selectedActivities[activity.activityId]) {\r\n      await this.designer.removeSelectedActivities();\r\n    } else {\r\n      await this.designer.removeActivity(activity);\r\n    }\r\n\r\n    this.handleContextMenuChange({ x: 0, y: 0, shown: false, activity: null, selectedActivities: {} });\r\n    await eventBus.emit(EventTypes.HideModalDialog);\r\n  }\r\n\r\n  async onEditActivityClick(e: Event) {\r\n    e.preventDefault();\r\n    await this.designer.showActivityEditor(this.activityContextMenuState.activity, true);\r\n    this.handleContextMenuChange({ x: 0, y: 0, shown: false, activity: null });\r\n  }\r\n\r\n  // async onPasteActivityClick(e: Event) {\r\n  //   e.preventDefault();\r\n  //   let activityModel = this.connectionContextMenuState.activity;\r\n  //   await eventBus.emit(EventTypes.PasteActivity, this, activityModel);\r\n  //   this.handleConnectionContextMenuChange({x: 0, y: 0, shown: false, activity: null});\r\n  // }\r\n\r\n  async onActivityContextMenuButtonClicked(e: CustomEvent<ActivityContextMenuState>) {\r\n    this.activityContextMenuState = e.detail;\r\n  }\r\n\r\n  async onActivityContextMenuButtonTestClicked(e: CustomEvent<ActivityContextMenuState>) {\r\n\r\n    this.activityContextMenuTestState = e.detail;\r\n    this.selectedActivityId = e.detail.activity.activityId;\r\n\r\n    if (!e.detail.shown) {\r\n      return;\r\n    }\r\n\r\n    await this.tryUpdateActivityInformation(this.selectedActivityId);\r\n  }\r\n\r\n  async onActivitySelected(e: CustomEvent<ActivityModel>) {\r\n    this.selectedActivityId = e.detail.activityId;\r\n  }\r\n\r\n  async onActivityDeselected(e: CustomEvent<ActivityModel>) {\r\n    if (this.selectedActivityId == e.detail.activityId) this.selectedActivityId = null;\r\n  }\r\n\r\n  // onConnectionContextMenuButtonClicked(e: CustomEvent<ActivityContextMenuState>) {\r\n  //   this.connectionContextMenuState = e.detail;\r\n  // }\r\n\r\n  onTestActivityMessageReceived = async args => {\r\n    const message = args as WorkflowTestActivityMessage;\r\n\r\n    if (!!message) {\r\n      this.workflowInstanceId = message.workflowInstanceId;\r\n      this.workflowTestActivityMessages = this.workflowTestActivityMessages.filter(x => x.activityId !== message.activityId);\r\n      this.workflowTestActivityMessages = [...this.workflowTestActivityMessages, message];\r\n    } else {\r\n      this.workflowTestActivityMessages = [];\r\n      this.workflowInstanceId = null;\r\n    }\r\n\r\n    this.render();\r\n  };\r\n\r\n  async onRestartActivityButtonClick() {\r\n    await eventBus.emit(EventTypes.WorkflowRestarted, this, this.selectedActivityId);\r\n\r\n    this.handleContextMenuTestChange(0, 0, false, null);\r\n  }\r\n\r\n  private onUpdateWorkflowSettings = async (workflowDefinition: WorkflowDefinition) => {\r\n    this.updateWorkflowDefinition(workflowDefinition);\r\n    await this.saveWorkflowInternal(this.workflowModel);\r\n  };\r\n\r\n  private onFlyoutPanelTabSelected = async args => {\r\n    const tab = args;\r\n    if (tab === 'general') this.workflowDesignerMode = WorkflowDesignerMode.Edit;\r\n    if (tab === 'test') this.workflowDesignerMode = WorkflowDesignerMode.Test;\r\n    this.render();\r\n  };\r\n\r\n  onUpdateActivity = (activity: ActivityModel) => {\r\n    const message = this.workflowTestActivityMessages.find(x => x.activityId === activity.activityId);\r\n\r\n    if (message) {\r\n      message.status = WorkflowTestActivityMessageStatus.Modified;\r\n      this.clearSubsequentWorkflowTestMessages(activity.activityId);\r\n    }\r\n  };\r\n\r\n  private clearSubsequentWorkflowTestMessages(activityId: string) {\r\n    const targetActivityId = this.workflowDefinition.connections.find(x => x.sourceActivityId === activityId)?.targetActivityId;\r\n\r\n    if (!targetActivityId) return;\r\n\r\n    this.workflowTestActivityMessages = this.workflowTestActivityMessages.filter(x => x.activityId !== targetActivityId || x.status === WorkflowTestActivityMessageStatus.Failed);\r\n\r\n    this.clearSubsequentWorkflowTestMessages(targetActivityId);\r\n  }\r\n\r\n  renderActivityStatsButton = (activity: ActivityModel): string => {\r\n\r\n    const testActivityMessage = this.workflowTestActivityMessages.find(x => x.activityId == activity.activityId);\r\n    if (testActivityMessage == undefined) return '';\r\n\r\n    let icon: string;\r\n\r\n    switch (testActivityMessage.status) {\r\n      case WorkflowTestActivityMessageStatus.Done:\r\n      default:\r\n        icon = `<svg class=\"elsa-h-8 elsa-w-8 elsa-text-green-500\"  fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n                </svg>`;\r\n        break;\r\n      case WorkflowTestActivityMessageStatus.Waiting:\r\n        icon = `<svg version=\"1.1\" class=\"svg-loader\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 80 80\" xml:space=\"preserve\">\r\n                  <path id=\"spinner\" fill=\"#7eb0de\" d=\"M40,72C22.4,72,8,57.6,8,40C8,22.4,\r\n                  22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2\r\n                  s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6,\r\n                  28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z\">\r\n                    <animateTransform attributeType=\"xml\" attributeName=\"transform\" type=\"rotate\" from=\"0 40 40\" to=\"360 40 40\" dur=\"0.75s\" repeatCount=\"indefinite\" />\r\n                  </path>\r\n                  </path>\r\n              </svg>`;\r\n        break;\r\n      case WorkflowTestActivityMessageStatus.Failed:\r\n        icon = `<svg class=\"elsa-h-8 elsa-w-8 elsa-text-red-500\"  viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                  <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\" />\r\n                  <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\" />\r\n                </svg>`;\r\n        break;\r\n      case WorkflowTestActivityMessageStatus.Modified:\r\n        icon = `<svg class=\"h-6 w-6 elsa-text-yellow-500\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                    <line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line>\r\n                    <line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line>\r\n                </svg>`;\r\n        break;\r\n    }\r\n\r\n    return `<div class=\"context-menu-wrapper elsa-flex-shrink-0\">\r\n            <button aria-haspopup=\"true\"\r\n                    class=\"elsa-w-8 elsa-h-8 elsa-inline-flex elsa-items-center elsa-justify-center elsa-text-gray-400 elsa-rounded-full elsa-bg-transparent hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-text-gray-500 focus:elsa-bg-gray-100 elsa-transition elsa-ease-in-out elsa-duration-150\">\r\n              ${icon}\r\n            </button>\r\n          </div>`;\r\n  };\r\n\r\n  renderMonacoEditorDialog() {\r\n    return (\r\n      <elsa-modal-dialog ref={el => {\r\n          monacoEditorDialogService.monacoEditorDialog = el;\r\n        }}>\r\n          <div slot=\"content\" class=\"elsa-py-8 elsa-px-4\">\r\n            <elsa-monaco\r\n              value=\"\"\r\n              language=\"javascript\"\r\n              editor-height=\"400px\"\r\n              single-line={false}\r\n              onValueChanged={e => {\r\n                monacoEditorDialogService.currentValue = e.detail.value;\r\n              }}\r\n              ref={el => (monacoEditorDialogService.monacoEditor = el)}\r\n            />\r\n          </div>\r\n          <div slot=\"buttons\">\r\n            <div class=\"elsa-bg-gray-50 elsa-px-4 elsa-py-3 sm:elsa-px-6 sm:elsa-flex sm:elsa-flex-row-reverse\">\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  monacoEditorDialogService.save();\r\n                  monacoEditorDialogService.monacoEditorDialog.hide();\r\n                }}\r\n                class=\"elsa-ml-3 elsa-inline-flex elsa-justify-center elsa-py-2 elsa-px-4 elsa-border elsa-border-transparent elsa-shadow-sm elsa-text-sm elsa-font-medium elsa-rounded-md elsa-text-white elsa-bg-blue-600 hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500\"\r\n              >\r\n                Save\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => {\r\n                  monacoEditorDialogService.monacoEditorDialog.hide();\r\n                }}\r\n                class=\"elsa-mt-3 elsa-w-full elsa-inline-flex elsa-justify-center elsa-rounded-md elsa-border elsa-border-gray-300 elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-bg-white elsa-text-base elsa-font-medium elsa-text-gray-700 hover:elsa-bg-gray-50 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-mt-0 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </elsa-modal-dialog>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const tunnelState: WorkflowEditorState = {\r\n      serverUrl: this.serverUrl,\r\n      workflowDefinitionId: this.workflowDefinition.definitionId,\r\n      serverFeatures: this.serverFeatures,\r\n    };\r\n\r\n    return (\r\n      <Host class=\"elsa-flex elsa-flex-col elsa-w-full\" ref={el => (this.el = el)}>\r\n        <WorkflowEditorTunnel.Provider state={tunnelState}>\r\n          {this.renderCanvas()}\r\n          {this.renderActivityPicker()}\r\n          {this.renderActivityEditor()}\r\n          {this.renderMonacoEditorDialog()}\r\n        </WorkflowEditorTunnel.Provider>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  renderCanvas() {\r\n    const activityContextMenuButton = (activity: ActivityModel) =>\r\n      `<div class=\"context-menu-wrapper elsa-flex-shrink-0\">\r\n            <button aria-haspopup=\"true\"\r\n                    class=\"elsa-w-8 elsa-h-8 elsa-inline-flex elsa-items-center elsa-justify-center elsa-text-gray-400 elsa-rounded-full elsa-bg-transparent hover:elsa-text-gray-500 focus:elsa-outline-none focus:elsa-text-gray-500 focus:elsa-bg-gray-100 elsa-transition elsa-ease-in-out elsa-duration-150\">\r\n              <svg class=\"elsa-h-6 elsa-w-6 elsa-text-gray-400\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2\"\r\n                   stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                <path stroke=\"none\" d=\"M0 0h24v24H0z\"/>\r\n                <circle cx=\"5\" cy=\"12\" r=\"1\"/>\r\n                <circle cx=\"12\" cy=\"12\" r=\"1\"/>\r\n                <circle cx=\"19\" cy=\"12\" r=\"1\"/>\r\n              </svg>\r\n            </button>\r\n          </div>`;\r\n\r\n    return (\r\n      <div class=\"elsa-flex-1 elsa-flex elsa-relative\">\r\n        {!state.useX6Graphs && (\r\n          <elsa-designer-tree\r\n            model={this.workflowModel}\r\n            mode={this.workflowDesignerMode}\r\n            layoutDirection={this.layoutDirection}\r\n            activityContextMenuButton={this.workflowDesignerMode == WorkflowDesignerMode.Edit ? activityContextMenuButton : this.renderActivityStatsButton}\r\n            onActivityContextMenuButtonClicked={e => this.onActivityContextMenuButtonClicked(e)}\r\n            onActivityContextMenuButtonTestClicked={e => this.onActivityContextMenuButtonTestClicked(e)}\r\n            activityContextMenu={this.workflowDesignerMode == WorkflowDesignerMode.Edit ? this.activityContextMenuState : this.activityContextMenuTestState}\r\n            enableMultipleConnectionsFromSingleSource={false}\r\n            selectedActivityIds={[this.selectedActivityId]}\r\n            onActivitySelected={e => this.onActivitySelected(e)}\r\n            onActivityDeselected={e => this.onActivityDeselected(e)}\r\n            class=\"elsa-flex-1\"\r\n            ref={el => (this.designer = el)}\r\n          />\r\n        )}\r\n        {state.useX6Graphs && (\r\n          <x6-designer\r\n            model={this.workflowModel}\r\n            mode={this.workflowDesignerMode}\r\n            layoutDirection={this.layoutDirection}\r\n            activityContextMenuButton={this.workflowDesignerMode == WorkflowDesignerMode.Edit ? (() => '') : this.renderActivityStatsButton}\r\n            onActivityContextMenuButtonClicked={e => this.onActivityContextMenuButtonClicked(e)}\r\n            onActivityContextMenuButtonTestClicked={e => this.onActivityContextMenuButtonTestClicked(e)}\r\n            activityContextMenu={this.workflowDesignerMode == WorkflowDesignerMode.Edit ? this.activityContextMenuState : this.activityContextMenuTestState}\r\n            enableMultipleConnectionsFromSingleSource={false}\r\n            selectedActivityIds={[this.selectedActivityId]}\r\n            onActivitySelected={e => this.onActivitySelected(e)}\r\n            onActivityDeselected={e => this.onActivityDeselected(e)}\r\n            class=\"elsa-workflow-wrapper\"\r\n            ref={el => (this.designer = el)}\r\n          />\r\n        )}\r\n\r\n        {this.renderWorkflowSettingsButton()}\r\n        {this.renderWorkflowHelpButton()}\r\n        {this.renderWorkflowPanel()}\r\n        {this.renderActivityContextMenu()}\r\n        {/*{this.renderConnectionContextMenu()}*/}\r\n        <elsa-workflow-settings-modal workflowDefinition={this.workflowDefinition} />\r\n        <elsa-workflow-definition-editor-notifications />\r\n        <div class=\"elsa-fixed elsa-bottom-10 elsa-right-12\">\r\n          <div class=\"elsa-flex elsa-items-center elsa-space-x-4\">\r\n            {this.renderSavingIndicator()}\r\n            {this.renderNetworkError()}\r\n            {this.renderPublishButton()}\r\n          </div>\r\n        </div>\r\n        {this.renderTestActivityMenu()}\r\n        <elsa-confirm-dialog ref={el => this.confirmDialog = el} culture={this.culture}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  async onComponentCustomButtonClick(message: WorkflowTestActivityMessage) {\r\n    let workflowModel = { ...this.workflowModel };\r\n    const activityModel = workflowModel.activities.find(x => x.activityId == message.activityId);\r\n    const input = message.data['Input'];\r\n\r\n    const componentCustomButtonClickContext: ComponentCustomButtonClickContext = {\r\n      component: 'elsa-workflow-definition-editor-screen',\r\n      activityType: message.activityType,\r\n      prop: null,\r\n      params: [activityModel, input],\r\n    };\r\n    await eventBus.emit(EventTypes.ComponentCustomButtonClick, this, componentCustomButtonClickContext);\r\n  }\r\n\r\n  private canBeRestartedFromCurrentActivity() {\r\n    if (!this.selectedActivityId) return false;\r\n    if (this.workflowDesignerMode !== WorkflowDesignerMode.Test) return false;\r\n\r\n    if (this.workflowTestActivityMessages.some(x => x.activityId === this.selectedActivityId)) return true;\r\n\r\n    const sourceActivityId = this.workflowDefinition.connections.find(x => x.targetActivityId === this.selectedActivityId)?.sourceActivityId;\r\n\r\n    return sourceActivityId && this.workflowTestActivityMessages.some(x => x.activityId === sourceActivityId && x.status !== WorkflowTestActivityMessageStatus.Failed);\r\n  }\r\n\r\n  renderTestActivityMenu = () => {\r\n    const message = this.workflowTestActivityMessages.find(x => x.activityId == this.selectedActivityId);\r\n\r\n    const renderActivityTestError = () => {\r\n      if (message == undefined || !message) return;\r\n\r\n      if (!message.error) return;\r\n\r\n      return (\r\n        <div class=\"elsa-ml-4\">\r\n          <elsa-workflow-fault-information\r\n            workflowFault={this.workflowInstance?.faults.find(x => x.faultedActivityId == this.selectedActivityId)}\r\n            faultedAt={this.workflowInstance?.faultedAt}\r\n          />\r\n        </div>\r\n      );\r\n    };\r\n\r\n    const renderPerformanceStats = () => {\r\n      if (!!message.error) return;\r\n\r\n      return (\r\n        <div class=\"elsa-ml-4\">\r\n          <elsa-workflow-performance-information activityStats={this.activityStats} />\r\n        </div>\r\n      );\r\n    };\r\n\r\n    const renderRestartButton = () => {\r\n      if (!this.canBeRestartedFromCurrentActivity()) return undefined;\r\n\r\n      return (\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => this.onRestartActivityButtonClick()}\r\n          class=\"elsa-ml-0 elsa-w-full elsa-inline-flex elsa-justify-center elsa-rounded-md elsa-border elsa-border-transparent elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-bg-blue-600 elsa-text-base elsa-font-medium elsa-text-white hover:elsa-bg-red-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-red-500 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm\"\r\n        >\r\n          {this.t('Restart')}\r\n        </button>\r\n      );\r\n    };\r\n\r\n    const renderMessage = () => {\r\n      const t = this.t;\r\n      if (message == undefined || !message) return;\r\n\r\n      this.configureComponentCustomButton(message);\r\n\r\n      const filteredData = {};\r\n      const wellKnownDataKeys = { State: true, Input: null, Outcomes: true, Exception: true };\r\n      let dataKey = null;\r\n\r\n      for (const key in message.data) {\r\n        if (!message.data.hasOwnProperty(key)) continue;\r\n\r\n        if (!!wellKnownDataKeys[key]) continue;\r\n\r\n        const value = message.data[key];\r\n\r\n        if (!value && value != 0) continue;\r\n\r\n        let valueText = null;\r\n        dataKey = key;\r\n\r\n        if (typeof value == 'string') valueText = value;\r\n        else if (typeof value == 'object') valueText = JSON.stringify(value, null, 1);\r\n        else if (typeof value == 'undefined') valueText = null;\r\n        else valueText = value.toString();\r\n\r\n        filteredData[key] = valueText;\r\n      }\r\n\r\n      const hasBody = !!message.data?.Input?.Body;\r\n\r\n      return (\r\n        <div class=\"elsa-relative elsa-grid elsa-gap-6 elsa-bg-white px-5 elsa-py-6 sm:elsa-gap-8 sm:elsa-p-8\">\r\n          <div class=\"elsa-flex elsa-flex-row elsa-justify-between\">\r\n            <div class=\"elsa-ml-4\">\r\n              <p class=\"elsa-text-base elsa-font-medium elsa-text-gray-900\">{t('Status')}</p>\r\n              <p class=\"elsa-mt-1 elsa-text-sm elsa-text-gray-500\">{message.status}</p>\r\n            </div>\r\n            <div>{renderRestartButton()}</div>\r\n          </div>\r\n          {collection.map(filteredData, (v, k) => (\r\n            <div class=\"elsa-ml-4\">\r\n              <p class=\"elsa-text-base elsa-font-medium elsa-text-gray-900\">{k}</p>\r\n              <pre class=\"elsa-mt-1 elsa-text-sm elsa-text-gray-500 elsa-overflow-x-auto\" style={{ \"max-width\": \"30rem\"}}>{v}</pre>\r\n            </div>\r\n          ))}\r\n          {hasBody ? renderComponentCustomButton() : undefined}\r\n          {renderActivityTestError()}\r\n          {renderPerformanceStats()}\r\n        </div>\r\n      );\r\n    };\r\n\r\n    const renderComponentCustomButton = () => {\r\n      if (this.configureComponentCustomButtonContext.data == null) return;\r\n\r\n      const label = this.configureComponentCustomButtonContext.data.label;\r\n\r\n      return (\r\n        <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={() => this.onComponentCustomButtonClick(message)}\r\n            class=\"elsa-ml-0 elsa-w-full elsa-inline-flex elsa-justify-center elsa-rounded-md elsa-border elsa-border-transparent elsa-shadow-sm elsa-px-4 elsa-py-2 elsa-bg-blue-600 elsa-text-base elsa-font-medium elsa-text-white hover:elsa-bg-blue-700 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500 sm:elsa-ml-3 sm:elsa-w-auto sm:elsa-text-sm\"\r\n          >\r\n            {label}\r\n          </button>\r\n        </div>\r\n      );\r\n    };\r\n\r\n    const renderLoader = function () {\r\n      return <div class=\"elsa-p-6 elsa-bg-white\">Loading...</div>;\r\n    };\r\n\r\n    return (\r\n      <div\r\n        data-transition-enter=\"elsa-transition elsa-ease-out elsa-duration-100\"\r\n        data-transition-enter-start=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n        data-transition-enter-end=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n        data-transition-leave=\"elsa-transition elsa-ease-in elsa-duration-75\"\r\n        data-transition-leave-start=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n        data-transition-leave-end=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n        class={`${this.activityContextMenuTestState.shown ? '' : 'hidden'} elsa-absolute elsa-z-10 elsa-mt-3 elsa-px-2 elsa-w-screen elsa-max-w-xl sm:elsa-px-0`}\r\n        style={{\r\n          left: `${this.activityContextMenuTestState.x + 64}px`,\r\n          top: `${this.activityContextMenuTestState.y - 256}px`,\r\n        }}\r\n        ref={el => (this.componentCustomButton = el)}\r\n      >\r\n        <div class=\"elsa-rounded-lg elsa-shadow-lg elsa-ring-1 elsa-ring-black elsa-ring-opacity-5 elsa-overflow-x-hidden elsa-overflow-y-auto\" style={{ \"max-height\": \"700px\" }}>{!!message ? renderMessage() : renderLoader()}</div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  renderActivityContextMenu() {\r\n    const t = this.t;\r\n    const selectedActivities = Object.keys(this.activityContextMenuState.selectedActivities ?? {});\r\n    const { activity } = this.activityContextMenuState;\r\n\r\n    return (\r\n      <div\r\n        data-transition-enter=\"elsa-transition elsa-ease-out elsa-duration-100\"\r\n        data-transition-enter-start=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n        data-transition-enter-end=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n        data-transition-leave=\"elsa-transition elsa-ease-in elsa-duration-75\"\r\n        data-transition-leave-start=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n        data-transition-leave-end=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n        class={`${this.activityContextMenuState.shown ? '' : 'hidden'} context-menu elsa-z-20 elsa-mx-3 elsa-w-48 elsa-mt-1 elsa-rounded-md elsa-shadow-lg elsa-fixed`}\r\n        style={{ left: `${this.activityContextMenuState.x}px`, top: `${this.activityContextMenuState.y}px` }}\r\n        ref={el => (this.activityContextMenu = el)}\r\n      >\r\n        <div class=\"elsa-rounded-md elsa-bg-white elsa-shadow-xs\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"pinned-project-options-menu-0\">\r\n          <div class=\"elsa-py-1\">\r\n            <a\r\n              onClick={e => this.onEditActivityClick(e)}\r\n              href=\"#\"\r\n              class=\"elsa-block elsa-px-4 elsa-py-2 elsa-text-sm elsa-leading-5 elsa-text-gray-700 hover:elsa-bg-gray-100 hover:elsa-text-gray-900 focus:elsa-outline-none focus:elsa-bg-gray-100 focus:elsa-text-gray-900\"\r\n              role=\"menuitem\"\r\n            >\r\n              {t('ActivityContextMenu.Edit')}\r\n            </a>\r\n          </div>\r\n          <div class=\"elsa-border-t elsa-border-gray-100\" />\r\n          <div class=\"elsa-py-1\">\r\n            <a\r\n              onClick={e => this.onDeleteActivityClick(e)}\r\n              href=\"#\"\r\n              class=\"elsa-block elsa-px-4 elsa-py-2 elsa-text-sm elsa-leading-5 elsa-text-gray-700 hover:elsa-bg-gray-100 hover:elsa-text-gray-900 focus:elsa-outline-none focus:elsa-bg-gray-100 focus:elsa-text-gray-900\"\r\n              role=\"menuitem\"\r\n            >\r\n              {selectedActivities.length > 1 && selectedActivities.indexOf(activity.activityId) !== -1 ? t('ActivityContextMenu.DeleteSelected') : t('ActivityContextMenu.Delete')}\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // renderConnectionContextMenu() {\r\n  //   const t = this.t;\r\n  //\r\n  //   return <div\r\n  //     data-transition-enter=\"elsa-transition elsa-ease-out elsa-duration-100\"\r\n  //     data-transition-enter-start=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n  //     data-transition-enter-end=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n  //     data-transition-leave=\"elsa-transition elsa-ease-in elsa-duration-75\"\r\n  //     data-transition-leave-start=\"elsa-transform elsa-opacity-100 elsa-scale-100\"\r\n  //     data-transition-leave-end=\"elsa-transform elsa-opacity-0 elsa-scale-95\"\r\n  //     class={`${this.connectionContextMenuState.shown ? '' : 'hidden'} context-menu elsa-z-10 elsa-mx-3 elsa-w-48 elsa-mt-1 elsa-rounded-md elsa-shadow-lg elsa-absolute`}\r\n  //     style={{left: `${this.connectionContextMenuState.x}px`, top: `${this.connectionContextMenuState.y - 64}px`}}\r\n  //     ref={el => this.connectionContextMenu = el}\r\n  //   >\r\n  //     <div class=\"elsa-rounded-md elsa-bg-white elsa-shadow-xs\" role=\"menu\" aria-orientation=\"vertical\"\r\n  //          aria-labelledby=\"pinned-project-options-menu-0\">\r\n  //       <div class=\"elsa-py-1\">\r\n  //         <a\r\n  //           onClick={e => this.onPasteActivityClick(e)}\r\n  //           href=\"#\"\r\n  //           class=\"elsa-block elsa-px-4 elsa-py-2 elsa-text-sm elsa-leading-5 elsa-text-gray-700 hover:elsa-bg-gray-100 hover:elsa-text-gray-900 focus:elsa-outline-none focus:elsa-bg-gray-100 focus:elsa-text-gray-900\"\r\n  //           role=\"menuitem\">\r\n  //           {t('ConnectionContextMenu.Paste')}\r\n  //         </a>\r\n  //       </div>\r\n  //     </div>\r\n  //   </div>\r\n  // }\r\n\r\n  renderActivityPicker() {\r\n    return <elsa-activity-picker-modal />;\r\n  }\r\n\r\n  renderActivityEditor() {\r\n    return <elsa-activity-editor-modal culture={this.culture} />;\r\n  }\r\n\r\n  renderWorkflowSettingsButton() {\r\n    return (\r\n      <button\r\n        onClick={() => this.onShowWorkflowSettingsClick()}\r\n        type=\"button\"\r\n        class=\"workflow-settings-button elsa-fixed elsa-top-20 elsa-right-12 elsa-inline-flex elsa-items-center elsa-p-2 elsa-rounded-full elsa-border elsa-border-transparent elsa-bg-white shadow elsa-text-gray-400 hover:elsa-text-blue-500 focus:elsa-text-blue-500 hover:elsa-ring-2 hover:elsa-ring-offset-2 hover:elsa-ring-blue-500 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500\"\r\n      >\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" fill=\"none\" class=\"elsa-h-8 elsa-w-8\">\r\n          <path\r\n            stroke-linecap=\"round\"\r\n            stroke-linejoin=\"round\"\r\n            stroke-width=\"2\"\r\n            d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\r\n          />\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n        </svg>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderWorkflowHelpButton() {\r\n    return (\r\n      <span>\r\n        <button\r\n          type=\"button\"\r\n          onClick={this.showHelpModal}\r\n          class=\"workflow-settings-button elsa-fixed elsa-top-20 elsa-right-28 elsa-inline-flex elsa-items-center elsa-p-2 elsa-rounded-full elsa-border elsa-border-transparent elsa-bg-white shadow elsa-text-gray-400 hover:elsa-text-blue-500 focus:elsa-text-blue-500 hover:elsa-ring-2 hover:elsa-ring-offset-2 hover:elsa-ring-blue-500 focus:elsa-outline-none focus:elsa-ring-2 focus:elsa-ring-offset-2 focus:elsa-ring-blue-500\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"elsa-h-8 elsa-w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path\r\n              stroke-linecap=\"round\"\r\n              stroke-linejoin=\"round\"\r\n              stroke-width=\"2\"\r\n              d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\r\n            />\r\n          </svg>\r\n        </button>\r\n        <elsa-modal-dialog ref={el => (this.helpDialog = el)}>\r\n          {!state.useX6Graphs && (\r\n            <div slot=\"content\" class=\"elsa-p-8\">\r\n              <h3 class=\"elsa-text-lg elsa-font-medium\">Actions</h3>\r\n              <dl class=\"elsa-mt-2 elsa-border-t elsa-border-b elsa-border-gray-200 elsa-divide-y elsa-divide-gray-200\">\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Delete connections</dt>\r\n                  <dd class=\"elsa-text-gray-900\">RIGHT-click the connection to delete.</dd>\r\n                </div>\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Connect outcomes to existing activity</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Press and hold SHIFT while LEFT-clicking the outcome to connect. Release SHIFT and LEFT-click the target activity.</dd>\r\n                </div>\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Pan</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Click anywhere on the designer and drag mouse.</dd>\r\n                </div>\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Zoom</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Use scroll-wheel on mouse.</dd>\r\n                </div>\r\n              </dl>\r\n            </div>\r\n          )}\r\n          {state.useX6Graphs && (\r\n            <div slot=\"content\" class=\"elsa-p-8\">\r\n              <h3 class=\"elsa-text-lg elsa-font-medium\">Actions</h3>\r\n              <dl class=\"elsa-mt-2 elsa-border-t elsa-border-b elsa-border-gray-200 elsa-divide-y elsa-divide-gray-200\">\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Delete connections</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Hover on the connection and click the red X.</dd>\r\n                </div>\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Edit activities</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Right click on the activity node and click Edit.</dd>\r\n                </div>\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Pan</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Hold Ctrl, click anywhere on the designer and drag mouse.</dd>\r\n                </div>\r\n                <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n                  <dt class=\"elsa-text-gray-500\">Zoom</dt>\r\n                  <dd class=\"elsa-text-gray-900\">Use scroll-wheel on mouse while holding Ctrl.</dd>\r\n                </div>\r\n              </dl>\r\n            </div>\r\n          )}\r\n        </elsa-modal-dialog>\r\n      </span>\r\n    );\r\n  }\r\n\r\n  showHelpModal = async () => {\r\n    await this.helpDialog.show();\r\n  };\r\n\r\n  renderSavingIndicator() {\r\n    if (this.publishing) return undefined;\r\n\r\n    const t = this.t;\r\n    const message = this.unPublishing\r\n      ? t('Unpublishing...')\r\n      : this.unPublished\r\n      ? t('Unpublished')\r\n      : this.saving\r\n      ? 'Saving...'\r\n      : this.saved\r\n      ? 'Saved'\r\n      : this.importing\r\n      ? 'Importing...'\r\n      : this.imported\r\n      ? 'Imported'\r\n      : null;\r\n\r\n    if (!message) return undefined;\r\n\r\n    return (\r\n      <div>\r\n        <span class=\"elsa-text-gray-400 elsa-text-sm\">{message}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderNetworkError() {\r\n    if (!this.networkError) return undefined;\r\n\r\n    return (\r\n      <div>\r\n        <span class=\"elsa-text-rose-400 elsa-text-sm\">An error occurred: {this.networkError}</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderPublishButton() {\r\n    return (\r\n      <elsa-workflow-publish-button\r\n        publishing={this.publishing}\r\n        workflowDefinition={this.workflowDefinition}\r\n        onPublishClicked={() => this.onPublishClicked()}\r\n        onUnPublishClicked={() => this.onUnPublishClicked()}\r\n        onRevertClicked={() => this.onRevertClicked()}\r\n        onExportClicked={() => this.onExportClicked()}\r\n        onImportClicked={e => this.onImportClicked(e.detail)}\r\n        onDeleteClicked={e => this.onDeleteClicked()}\r\n        culture={this.culture}\r\n      />\r\n    );\r\n  }\r\n\r\n  private static createWorkflowDefinition(): WorkflowDefinition {\r\n    return {\r\n      definitionId: null,\r\n      version: 1,\r\n      isLatest: true,\r\n      isPublished: false,\r\n      activities: [],\r\n      connections: [],\r\n      persistenceBehavior: WorkflowPersistenceBehavior.WorkflowBurst,\r\n    };\r\n  }\r\n\r\n  private renderWorkflowPanel() {\r\n    const workflowDefinition = this.workflowDefinition;\r\n\r\n    return (\r\n      <elsa-flyout-panel expandButtonPosition={3}>\r\n        <elsa-tab-header tab=\"general\" slot=\"header\">\r\n          General\r\n        </elsa-tab-header>\r\n        <elsa-tab-content tab=\"general\" slot=\"content\">\r\n          <elsa-workflow-properties-panel workflowDefinition={workflowDefinition} />\r\n        </elsa-tab-content>\r\n        {this.renderTestPanel()}\r\n        {this.renderDesignerPanel()}\r\n        {this.renderVersionHistoryPanel(workflowDefinition)}\r\n      </elsa-flyout-panel>\r\n    );\r\n  }\r\n\r\n  private renderTestPanel() {\r\n    const testingEnabled = this.serverFeatures.find(x => x == 'WorkflowTesting');\r\n\r\n    if (!testingEnabled) return;\r\n\r\n    return [\r\n      <elsa-tab-header tab=\"test\" slot=\"header\">\r\n        Test\r\n      </elsa-tab-header>,\r\n      <elsa-tab-content tab=\"test\" slot=\"content\">\r\n        <elsa-workflow-test-panel workflowDefinition={this.workflowDefinition} workflowTestActivityId={this.selectedActivityId} selectedActivityId={this.selectedActivityId}/>\r\n      </elsa-tab-content>,\r\n    ];\r\n  }\r\n\r\n  private renderDesignerPanel = () => {\r\n    const isFeaturePanelVisible = featuresDataManager.getUIFeatureList().length != 0;\r\n\r\n    if (isFeaturePanelVisible) {\r\n      return [\r\n        <elsa-tab-header tab=\"designer\" slot=\"header\">\r\n          Designer\r\n        </elsa-tab-header>,\r\n        <elsa-tab-content tab=\"designer\" slot=\"content\">\r\n          <elsa-designer-panel onFeatureChanged={this.handleFeatureChange} onFeatureStatusChanged={this.handleFeatureStatusChange} />\r\n        </elsa-tab-content>,\r\n      ];\r\n    }\r\n  };\r\n\r\n  private renderVersionHistoryPanel = (workflowDefinition: WorkflowDefinition) => {\r\n    return [\r\n      <elsa-tab-header tab=\"versionHistory\" slot=\"header\">\r\n        Version History\r\n      </elsa-tab-header>,\r\n      <elsa-tab-content tab=\"versionHistory\" slot=\"content\">\r\n        <elsa-version-history-panel\r\n          workflowDefinition={workflowDefinition}\r\n          onVersionSelected={e => this.onVersionSelected(e)}\r\n          onDeleteVersionClicked={e => this.onDeleteVersionClicked(e)}\r\n          onRevertVersionClicked={e => this.onRevertVersionClicked(e)}\r\n        />\r\n      </elsa-tab-content>,\r\n    ];\r\n  };\r\n\r\n  handleFeatureChange = (e: CustomEvent<string>) => {\r\n    const feature = e.detail;\r\n\r\n    if (feature === featuresDataManager.supportedFeatures.workflowLayout) {\r\n      const layoutFeature = featuresDataManager.getFeatureConfig(feature);\r\n      this.layoutDirection = layoutFeature.value as LayoutDirection;\r\n    }\r\n  };\r\n\r\n  handleFeatureStatusChange = (e: CustomEvent<string>) => {\r\n    const feature = e.detail;\r\n\r\n    if (feature === featuresDataManager.supportedFeatures.workflowLayout) {\r\n      const layoutFeature = featuresDataManager.getFeatureConfig(feature);\r\n      if (layoutFeature.enabled) {\r\n        this.layoutDirection = layoutFeature.value as LayoutDirection;\r\n      } else {\r\n        this.layoutDirection = LayoutDirection.TopBottom;\r\n      }\r\n    }\r\n  };\r\n\r\n  onVersionSelected = async (e: CustomEvent<WorkflowDefinitionVersion>) => {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    const version = e.detail;\r\n    const workflowDefinition = await client.workflowDefinitionsApi.getByDefinitionAndVersion(version.definitionId, { version: version.version });\r\n    this.updateWorkflowDefinition(workflowDefinition);\r\n  };\r\n\r\n  onDeleteVersionClicked = async (e: CustomEvent<WorkflowDefinitionVersion>) => {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    const version = e.detail;\r\n    await client.workflowDefinitionsApi.delete(version.definitionId, { version: version.version });\r\n    this.updateWorkflowDefinition({ ...this.workflowDefinition }); // Force a rerender.\r\n  };\r\n\r\n  onRevertVersionClicked = async (e: CustomEvent<WorkflowDefinitionVersion>) => {\r\n    const client = await createElsaClient(this.serverUrl);\r\n    const version = e.detail;\r\n    const workflowDefinition = await client.workflowDefinitionsApi.revert(version.definitionId, version.version);\r\n    this.updateWorkflowDefinition(workflowDefinition);\r\n  };\r\n}\r\n\r\ninjectHistory(ElsaWorkflowDefinitionEditorScreen);\r\nDashboardTunnel.injectProps(ElsaWorkflowDefinitionEditorScreen, ['serverUrl', 'culture', 'monacoLibPath', 'basePath', 'serverFeatures']);\r\n"],"names":["collection.map","WorkflowEditorTunnel","DashboardTunnel"],"mappings":"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"}