{"version":3,"file":"elsa-workflow-properties-panel.entry.esm.js","sources":["src/components/screens/workflow-definition-editor/elsa-workflow-properties-panel/localizations.ts","src/components/screens/workflow-definition-editor/elsa-workflow-properties-panel/elsa-workflow-properties-panel.tsx"],"sourcesContent":["export const resources = {\r\n  'en': {\r\n    default: {\r\n      'Name': 'Name',\r\n      'DisplayName': 'Display Name',\r\n      'Untitled': 'Untitled',\r\n      'Id': 'Id',\r\n      'Version': 'Latest Version',\r\n      'PublishedVersion': 'Published Version',\r\n      'Status': 'Status',\r\n      'Published': 'Published',\r\n      'Draft': 'Draft'\r\n    }\r\n  },\r\n  'zh-CN': {\r\n    default: {\r\n      'Name': '名称',\r\n      'DisplayName': '展示名称',\r\n      'Untitled': '无题',\r\n      'Id': 'Id',\r\n      'Version': '最新版本',\r\n      'PublishedVersion': '发布版本',\r\n      'Status': '状态',\r\n      'Published': '已发布',\r\n      'Draft': '草稿'\r\n    }\r\n  },\r\n  'nl-NL': {\r\n    default: {\r\n      'Name': 'Naam',\r\n      'DisplayName': 'Weergavenaam',\r\n      'Untitled': 'Untitled',\r\n      'Id': 'Id',\r\n      'Version': 'Laatste Versie',\r\n      'PublishedVersion': 'Gepubliceerde Versie',\r\n      'Status': 'Status',\r\n      'Published': 'Published',\r\n      'Draft': 'Draft'\r\n    }\r\n  },\r\n  'fa-IR': {\r\n    default: {\r\n      'Name': 'نام',\r\n      'DisplayName': 'عنوان نمایشی',\r\n      'Untitled': 'بی نام',\r\n      'Id': 'شناسه',\r\n      'Version': 'جدیدترین ویرایش',\r\n      'PublishedVersion': 'ویرایش منتشر شده',\r\n      'Status': 'وضعیت',\r\n      'Published': 'منتشر شده',\r\n      'Draft': 'پیش نویس'\r\n    }\r\n  },\r\n  'de-DE': {\r\n    default: {\r\n      'Name': 'Name',\r\n      'DisplayName': 'Anzeigename',\r\n      'Untitled': 'Unbenannt',\r\n      'Id': 'Id',\r\n      'Version': 'Neuste Version',\r\n      'PublishedVersion': 'Veröffentlichte Version',\r\n      'Status': 'Status',\r\n      'Published': 'Veröffentlicht',\r\n      'Draft': 'Entwurf'\r\n    }\r\n  },\r\n};\r\n","import {Component, Prop, h, State, Watch, Host} from '@stencil/core';\r\nimport {enter, leave} from \"el-transition\"\r\nimport {WorkflowDefinition, WorkflowDefinitionSummary} from \"../../../../models\";\r\nimport {i18n} from \"i18next\";\r\nimport {loadTranslations} from \"../../../i18n/i18n-loader\";\r\nimport {resources} from \"./localizations\";\r\nimport {createElsaClient} from \"../../../../services\";\r\nimport Tunnel from \"../../../../data/dashboard\";\r\n\r\n@Component({\r\n  tag: 'elsa-workflow-properties-panel',\r\n  shadow: false\r\n})\r\nexport class ElsaWorkflowPropertiesPanel {\r\n\r\n  @Prop() workflowDefinition: WorkflowDefinition;\r\n  @Prop() culture: string;\r\n  @Prop() serverUrl: string;\r\n  @State() publishedVersion: number;\r\n  @State() expanded: boolean;\r\n  private i18next: i18n;\r\n  el: HTMLElement;\r\n\r\n  @Watch('workflowDefinition')\r\n  async workflowDefinitionChangedHandler(newWorkflow: WorkflowDefinition, oldWorkflow: WorkflowDefinition) {\r\n    if (newWorkflow.version !== oldWorkflow.version || newWorkflow.isPublished !== oldWorkflow.isPublished || newWorkflow.isLatest !== oldWorkflow.isLatest)\r\n      await this.loadPublishedVersion();\r\n  }\r\n\r\n  async componentWillLoad() {\r\n    this.i18next = await loadTranslations(this.culture, resources);\r\n    await this.loadPublishedVersion();\r\n  }\r\n\r\n  render() {\r\n    const t = (x, params?) => this.i18next.t(x, params);\r\n    const {workflowDefinition} = this;\r\n    const name = workflowDefinition.name || this.i18next.t(\"Untitled\");\r\n    const {isPublished} = workflowDefinition;\r\n\r\n    return (\r\n      <Host>\r\n        <dl class=\"elsa-border-b elsa-border-gray-200 elsa-divide-y elsa-divide-gray-200\">\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Name')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{name}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('DisplayName')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{workflowDefinition.displayName || '-'}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Id')}</dt>\r\n            <dd class=\"elsa-text-gray-900 elsa-break-all\">{workflowDefinition.definitionId || '-'}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Version')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{workflowDefinition.version}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('PublishedVersion')}</dt>\r\n            <dd class=\"elsa-text-gray-900\">{this.publishedVersion || '-'}</dd>\r\n          </div>\r\n          <div class=\"elsa-py-3 elsa-flex elsa-justify-between elsa-text-sm elsa-font-medium\">\r\n            <dt class=\"elsa-text-gray-500\">{t('Status')}</dt>\r\n            <dd\r\n              class={`${isPublished ? 'elsa-text-green-600' : 'elsa-text-yellow-700'}`}>{isPublished ? t('Published') : t('Draft')}</dd>\r\n          </div>\r\n        </dl>\r\n      </Host>\r\n    );\r\n  }\r\n\r\n  createClient() {\r\n    return createElsaClient(this.serverUrl);\r\n  }\r\n\r\n  async loadPublishedVersion() {\r\n    const elsaClient = await this.createClient();\r\n    const {workflowDefinition} = this;\r\n\r\n    const publishedWorkflowDefinitions = await elsaClient.workflowDefinitionsApi.getMany([workflowDefinition.definitionId], {isPublished: true});\r\n    const publishedDefinition: WorkflowDefinitionSummary = workflowDefinition.isPublished ? workflowDefinition : publishedWorkflowDefinitions.find(x => x.definitionId == workflowDefinition.definitionId);\r\n\r\n    if (publishedDefinition) {\r\n      this.publishedVersion = publishedDefinition.version;\r\n    }\r\n  }\r\n\r\n  toggle = () => {\r\n    if (this.expanded) {\r\n      leave(this.el).then(() => this.expanded = false);\r\n    } else {\r\n      this.expanded = true;\r\n      enter(this.el);\r\n    }\r\n  }\r\n}\r\n\r\nTunnel.injectProps(ElsaWorkflowPropertiesPanel, ['serverUrl', 'culture']);"],"names":[],"mappings":"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"}