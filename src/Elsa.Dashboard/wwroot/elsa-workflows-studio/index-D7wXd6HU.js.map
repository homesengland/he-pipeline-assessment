{"version":3,"file":"index-D7wXd6HU.js","sources":["src/models/domain.ts","src/models/event-args.ts"],"sourcesContent":["import { Map } from '../utils/utils';\r\n\r\nexport interface WorkflowDefinition {\r\n  id?: string;\r\n  definitionId?: string;\r\n  tenantId?: string;\r\n  name?: string;\r\n  displayName?: string;\r\n  description?: string;\r\n  version: number;\r\n  variables?: string;\r\n  customAttributes?: Variables;\r\n  contextOptions?: WorkflowContextOptions;\r\n  isSingleton?: boolean;\r\n  persistenceBehavior?: WorkflowPersistenceBehavior;\r\n  deleteCompletedInstances?: boolean;\r\n  isPublished: boolean;\r\n  isLatest: boolean;\r\n  activities: Array<ActivityDefinition>;\r\n  connections: Array<ConnectionDefinition>;\r\n  tag?: string;\r\n  channel?: string;\r\n}\r\n\r\nexport interface WorkflowDefinitionSummary {\r\n  id?: string;\r\n  definitionId?: string;\r\n  tenantId?: string;\r\n  name?: string;\r\n  displayName?: string;\r\n  description?: string;\r\n  version: number;\r\n  isSingleton?: boolean;\r\n  persistenceBehavior?: WorkflowPersistenceBehavior;\r\n  isPublished?: boolean;\r\n  isLatest?: boolean;\r\n  tag?: string;\r\n}\r\n\r\nexport interface WorkflowDefinitionVersion {\r\n  id: string;\r\n  definitionId: string;\r\n  version: number;\r\n  isLatest: boolean;\r\n  isPublished: boolean;\r\n  createdAt: Date;\r\n}\r\n\r\nexport interface ActivityBlueprint {\r\n  id: string;\r\n  name?: string;\r\n  displayName?: string;\r\n  description?: string;\r\n  type: string;\r\n  parentId?: string;\r\n  persistWorkflow: boolean;\r\n  loadWorkflowContext: boolean;\r\n  saveWorkflowContext: boolean;\r\n  source?: string;\r\n  inputProperties: Variables;\r\n  outputProperties: Variables;\r\n  propertyStorageProviders: Map<string>;\r\n  x?: number;\r\n  y?: number;\r\n}\r\n\r\nexport interface Connection {\r\n  sourceActivityId: string;\r\n  targetActivityId: string;\r\n  outcome: string;\r\n}\r\n\r\nexport interface CompositeActivityBlueprint extends ActivityBlueprint {\r\n  activities: Array<ActivityBlueprint>;\r\n  connections: Array<Connection>;\r\n}\r\n\r\nexport interface WorkflowBlueprint extends CompositeActivityBlueprint {\r\n  version: number;\r\n  tenantId?: string;\r\n  isSingleton: boolean;\r\n  isPublished: boolean;\r\n  isLatest: boolean;\r\n  tag?: string;\r\n  contextOptions?: WorkflowContextOptions;\r\n  variables: Variables;\r\n  customAttributes: Variables;\r\n  persistenceBehavior: WorkflowPersistenceBehavior;\r\n}\r\n\r\nexport interface WorkflowBlueprintSummary {\r\n  id: string;\r\n  versionId: string;\r\n  name?: string;\r\n  displayName?: string;\r\n  description?: string;\r\n  version: number;\r\n  tenantId?: string;\r\n  isSingleton: boolean;\r\n  isPublished: boolean;\r\n  isLatest: boolean;\r\n  isDisabled: boolean;\r\n  tag?: string;\r\n}\r\n\r\nexport interface WorkflowInstance {\r\n  id: string;\r\n  definitionId: string;\r\n  definitionVersionId: string;\r\n  tenantId?: string;\r\n  version: number;\r\n  workflowStatus: WorkflowStatus;\r\n  correlationId?: string;\r\n  contextType?: string;\r\n  contextId?: string;\r\n  name?: string;\r\n  createdAt?: Date;\r\n  lastExecutedAt?: Date;\r\n  finishedAt?: Date;\r\n  faultedAt?: Date;\r\n  variables: Variables;\r\n  output?: any;\r\n  activityData?: Map<any>;\r\n  activityOutput?: Map<any>;\r\n  blockingActivities: Array<BlockingActivity>;\r\n  faults?: Array<WorkflowFault>;\r\n  scheduledActivities: Array<ScheduledActivity>;\r\n  scopes: Array<ActivityScope>;\r\n  currentActivity: ScheduledActivity;\r\n}\r\n\r\nexport interface WorkflowInstanceSummary {\r\n  id: string;\r\n  definitionId: string;\r\n  definitionVersionId: string;\r\n  tenantId?: string;\r\n  version: number;\r\n  workflowStatus: WorkflowStatus;\r\n  correlationId?: string;\r\n  contextType?: string;\r\n  contextId?: string;\r\n  name?: string;\r\n  createdAt?: Date;\r\n  lastExecutedAt?: Date;\r\n  finishedAt?: Date;\r\n  cancelledAt?: Date;\r\n  faultedAt?: Date;\r\n}\r\n\r\nexport interface ActivityDefinition {\r\n  activityId: string;\r\n  type: string;\r\n  name: string;\r\n  displayName: string;\r\n  description: string;\r\n  top?: number;\r\n  left?: number;\r\n  x?: number;\r\n  y?: number;\r\n  persistWorkflow: boolean;\r\n  loadWorkflowContext: boolean;\r\n  saveWorkflowContext: boolean;\r\n  properties: Array<ActivityDefinitionProperty>;\r\n  propertyStorageProviders: Map<string>;\r\n}\r\n\r\nexport interface WorkflowExecutionLogRecord {\r\n  id: string;\r\n  workflowInstanceId: string;\r\n  activityId: string;\r\n  activityType: string;\r\n  timestamp: Date;\r\n  eventName: string;\r\n  message?: string;\r\n  source?: string;\r\n  data?: any;\r\n}\r\n\r\nexport interface ConnectionDefinition {\r\n  sourceActivityId?: string;\r\n  targetActivityId?: string;\r\n  outcome?: string;\r\n}\r\n\r\nexport interface ConnectionDefinitionMapped {\r\n  sourceId: string;\r\n  sourceActivityId: string;\r\n  targetId: string;\r\n  targetActivityId: string;\r\n  outcome: string;\r\n}\r\n\r\nexport interface ActivityDefinitionProperty {\r\n  name: string;\r\n  syntax?: string;\r\n  expressions: Map<string>;\r\n  value?: any;\r\n}\r\n\r\ninterface BlockingActivity {\r\n  activityId: string;\r\n  activityType: string;\r\n  tag?: string;\r\n}\r\n\r\ninterface ScheduledActivity {\r\n  activityId: string;\r\n  input?: any;\r\n}\r\n\r\ninterface ActivityScope {\r\n  activityId: string;\r\n  variables: Variables;\r\n}\r\n\r\nexport interface Variables {\r\n  data: Map<any>;\r\n}\r\n\r\nexport interface WorkflowContextOptions {\r\n  contextType: string;\r\n  contextFidelity: WorkflowContextFidelity;\r\n}\r\n\r\nexport enum WorkflowContextFidelity {\r\n  Burst = 'Burst',\r\n  Activity = 'Activity',\r\n}\r\n\r\nexport enum WorkflowPersistenceBehavior {\r\n  Suspended = 'Suspended',\r\n  WorkflowBurst = ' WorkflowBurst',\r\n  WorkflowPassCompleted = 'WorkflowPassCompleted',\r\n  ActivityExecuted = 'ActivityExecuted',\r\n}\r\n\r\nexport interface VersionOptions {\r\n  isLatest?: boolean;\r\n  isLatestOrPublished?: boolean;\r\n  isPublished?: boolean;\r\n  isDraft?: boolean;\r\n  allVersions?: boolean;\r\n  version?: number;\r\n}\r\n\r\nexport enum WorkflowStatus {\r\n  Idle = 'Idle',\r\n  Running = 'Running',\r\n  Finished = 'Finished',\r\n  Suspended = 'Suspended',\r\n  Faulted = 'Faulted',\r\n  Cancelled = 'Cancelled',\r\n}\r\n\r\nexport enum OrderBy {\r\n  Started = 'Started',\r\n  LastExecuted = 'LastExecuted',\r\n  Finished = 'Finished',\r\n}\r\n\r\nexport interface SimpleException {\r\n  type: string;\r\n  message: string;\r\n  stackTrace: string;\r\n  innerException?: SimpleException;\r\n}\r\n\r\nexport interface WorkflowFault {\r\n  exception?: SimpleException;\r\n  message: string;\r\n  faultedActivityId?: string;\r\n  activityInput?: any;\r\n  resuming: boolean;\r\n}\r\n\r\nexport interface ActivityDescriptor {\r\n  type: string;\r\n  displayName: string;\r\n  description?: string;\r\n  category: string;\r\n  traits: ActivityTraits;\r\n  outcomes: Array<string>;\r\n  browsable: boolean;\r\n  inputProperties: Array<ActivityPropertyDescriptor>;\r\n  outputProperties: Array<ActivityPropertyDescriptor>;\r\n  customAttributes: any;\r\n  version?: number;\r\n  isContainer?: boolean;\r\n}\r\n\r\nexport interface ActivityPropertyDescriptor {\r\n  name: string;\r\n  uiHint: string;\r\n  label?: string;\r\n  hint?: string;\r\n  options?: SelectList | RuntimeSelectListProviderSettings | CodeEditorSettings | PropertySettings | Array<any>;\r\n  category?: string;\r\n  defaultValue?: any;\r\n  defaultSyntax?: string;\r\n  supportedSyntaxes: Array<string>;\r\n  isReadOnly?: boolean;\r\n  defaultWorkflowStorageProvider?: string;\r\n  disableWorkflowProviderSelection: boolean;\r\n  considerValuesAsOutcomes?: boolean;\r\n  type?: string;\r\n}\r\n\r\nexport interface WorkflowStorageDescriptor {\r\n  name: string;\r\n  displayName?: string;\r\n}\r\n\r\nexport interface WorkflowProviderDescriptor {\r\n  name: string;\r\n  displayName?: string;\r\n}\r\n\r\nexport interface PagedList<T> {\r\n  items: Array<T>;\r\n  page?: number;\r\n  pageSize?: number;\r\n  totalCount: number;\r\n}\r\n\r\nexport interface ListModel<T> {\r\n  items: Array<T>;\r\n}\r\n\r\nexport enum ActivityTraits {\r\n  Action = 1,\r\n  Trigger = 2,\r\n  Job = 4,\r\n}\r\n\r\nexport interface SelectList {\r\n  items: Array<SelectListItem> | Array<string>;\r\n  isFlagsEnum: boolean;\r\n}\r\n\r\nexport interface SelectListItem {\r\n  text: string;\r\n  value: string;\r\n}\r\n\r\nexport interface RuntimeSelectListProviderSettings {\r\n  runtimeSelectListProviderType: string;\r\n  context?: any;\r\n}\r\n\r\nexport interface CodeEditorSettings extends PropertySettings {\r\n  syntax?: string;\r\n}\r\n\r\nexport interface PropertySettings {\r\n  editorHeight?: string\r\n  context?: string;\r\n}\r\n\r\nexport class SyntaxNames {\r\n  static readonly Literal = 'Literal';\r\n  static readonly JavaScript = 'JavaScript';\r\n  static readonly Liquid = 'Liquid';\r\n  static readonly Json = 'Json';\r\n  static Variable = 'Variable';\r\n  static Output = 'Output';\r\n}\r\n\r\nexport interface WorkflowTestActivityMessage {\r\n  activityType: string;\r\n  workflowInstanceId: string;\r\n  correlationId: string;\r\n  activityId: string;\r\n  status: string;\r\n  workflowStatus: string;\r\n  data?: any;\r\n  error?: string;\r\n  activityData?: any;\r\n}\r\n\r\nexport const getVersionOptionsString = (versionOptions?: VersionOptions) => {\r\n  if (!versionOptions) return '';\r\n\r\n  return versionOptions.allVersions\r\n    ? 'AllVersions'\r\n    : versionOptions.isDraft\r\n      ? 'Draft'\r\n      : versionOptions.isLatest\r\n        ? 'Latest'\r\n        : versionOptions.isPublished\r\n          ? 'Published'\r\n          : versionOptions.isLatestOrPublished\r\n            ? 'LatestOrPublished'\r\n            : versionOptions.version.toString();\r\n};\r\n\r\nexport enum WorkflowTestActivityMessageStatus {\r\n  Done = 'Done',\r\n  Waiting = 'Waiting',\r\n  Failed = 'Failed',\r\n  Modified = 'Modified',\r\n}\r\n\r\nexport interface IntellisenseContext {\r\n  activityTypeName: string;\r\n  propertyName: string;\r\n}\r\n","import {Edge, Graph, Node} from \"@antv/x6\";\r\nimport { ActivityModel, ConnectionModel } from \"./view\";\r\n\r\nexport interface ActivitySelectedArgs {\r\n  activity: ActivityModel;\r\n}\r\n\r\nexport interface ActivityDeletedArgs {\r\n  activity: ActivityModel;\r\n}\r\n\r\nexport interface ContainerSelectedArgs {\r\n  activity: ActivityModel;\r\n}\r\n\r\nexport interface GraphUpdatedArgs {\r\n}\r\n\r\nexport interface EditChildActivityArgs {\r\n  parentActivityId: string;\r\n}\r\n\r\nexport interface ChildActivitySelectedArgs {\r\n  parentActivity: ActivityModel;\r\n  childActivity: ActivityModel;\r\n}\r\n\r\nexport const FlowchartEvents = {\r\n  ConnectionCreated: 'connection-created'\r\n}\r\n\r\nexport interface ConnectionCreatedEventArgs {\r\n  graph: Graph;\r\n  connection: ConnectionModel;\r\n  sourceNode: Node<Node.Properties>;\r\n  targetNode: Node<Node.Properties>;\r\n  sourceActivity: ActivityModel;\r\n  targetActivity: ActivityModel;\r\n  edge: Edge<Edge.Properties>;\r\n}\r\n"],"names":[],"mappings":"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"}