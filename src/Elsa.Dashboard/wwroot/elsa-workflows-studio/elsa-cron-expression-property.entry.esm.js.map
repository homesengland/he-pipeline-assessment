{"version":3,"file":"elsa-cron-expression-property.entry.esm.js","sources":["src/components/editors/properties/elsa-cron-expression-property/elsa-cron-expression-property.tsx"],"sourcesContent":["import { Component, h, Prop, State } from \"@stencil/core\";\r\nimport cronstrue from \"cronstrue\";\r\nimport { ActivityDefinitionProperty, ActivityModel, ActivityPropertyDescriptor, SyntaxNames } from \"../../../../models\";\r\n\r\n@Component({\r\n    tag: 'elsa-cron-expression-property',\r\n})\r\nexport class ElsaCronExpressionProperty {\r\n\r\n    @Prop() activityModel: ActivityModel;\r\n    @Prop() propertyDescriptor: ActivityPropertyDescriptor;\r\n    @Prop() propertyModel: ActivityDefinitionProperty;\r\n    @State() currentValue: string;\r\n    @State() valueDescription: string;\r\n\r\n    onChange(e: Event) {\r\n        const input = e.currentTarget as HTMLInputElement;\r\n        const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Literal;\r\n        this.propertyModel.expressions[defaultSyntax] = this.currentValue = input.value;\r\n        this.updateDescription();\r\n    }\r\n\r\n    componentWillLoad() {\r\n        const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Literal;\r\n        this.currentValue = this.propertyModel.expressions[defaultSyntax] || undefined;\r\n        this.updateDescription();\r\n    }\r\n\r\n    onDefaultSyntaxValueChanged(e: CustomEvent) {\r\n        this.currentValue = e.detail;\r\n    }\r\n\r\n    updateDescription() {\r\n        this.valueDescription = cronstrue.toString(this.currentValue, { throwExceptionOnParseError: false });\r\n    }\r\n\r\n\r\n    render() {\r\n        const propertyDescriptor = this.propertyDescriptor;\r\n        const propertyModel = this.propertyModel;\r\n        const propertyName = propertyDescriptor.name;\r\n        const isReadOnly = propertyDescriptor.isReadOnly;\r\n        const fieldId = propertyName;\r\n        const fieldName = propertyName;\r\n\r\n        let value = this.currentValue;\r\n        \r\n        if (value == undefined) {\r\n            const defaultValue = this.propertyDescriptor.defaultValue;\r\n            value = defaultValue ? defaultValue.toString() : undefined;\r\n        }\r\n\r\n        if (isReadOnly) {\r\n            const defaultSyntax = this.propertyDescriptor.defaultSyntax || SyntaxNames.Literal;\r\n            this.propertyModel.expressions[defaultSyntax] = value;\r\n        }\r\n\r\n        return (\r\n            <elsa-property-editor\r\n                activityModel={this.activityModel}\r\n                propertyDescriptor={propertyDescriptor}\r\n                propertyModel={propertyModel}\r\n                onDefaultSyntaxValueChanged={e => this.onDefaultSyntaxValueChanged(e)}\r\n                editor-height=\"5em\"\r\n                single-line={true}>\r\n                <div>\r\n                    <input type=\"text\" id={fieldId} name={fieldName} value={value} onChange={e => this.onChange(e)}\r\n                        class=\"disabled:elsa-opacity-50 disabled:elsa-cursor-not-allowed focus:elsa-ring-blue-500 focus:elsa-border-blue-500 elsa-block elsa-w-full elsa-min-w-0 elsa-rounded-md sm:elsa-text-sm elsa-border-gray-300\"\r\n                        disabled={isReadOnly} />\r\n                    <p class=\"elsa-mt-2 elsa-text-sm elsa-text-gray-500\">{this.valueDescription}</p>                    \r\n                </div>\r\n\r\n            </elsa-property-editor>\r\n        );\r\n    }\r\n}"],"names":[],"mappings":";;;;;;MAOa,0BAA0B,GAAA,MAAA;;;;AAQnC,IAAA,QAAQ,CAAC,CAAQ,EAAA;AACb,QAAA,MAAM,KAAK,GAAG,CAAC,CAAC,aAAiC;QACjD,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,IAAI,WAAW,CAAC,OAAO;AAClF,QAAA,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC,KAAK;QAC/E,IAAI,CAAC,iBAAiB,EAAE;;IAG5B,iBAAiB,GAAA;QACb,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,IAAI,WAAW,CAAC,OAAO;AAClF,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,SAAS;QAC9E,IAAI,CAAC,iBAAiB,EAAE;;AAG5B,IAAA,2BAA2B,CAAC,CAAc,EAAA;AACtC,QAAA,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,MAAM;;IAGhC,iBAAiB,GAAA;AACb,QAAA,IAAI,CAAC,gBAAgB,GAAG,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,0BAA0B,EAAE,KAAK,EAAE,CAAC;;IAIxG,MAAM,GAAA;AACF,QAAA,MAAM,kBAAkB,GAAG,IAAI,CAAC,kBAAkB;AAClD,QAAA,MAAM,aAAa,GAAG,IAAI,CAAC,aAAa;AACxC,QAAA,MAAM,YAAY,GAAG,kBAAkB,CAAC,IAAI;AAC5C,QAAA,MAAM,UAAU,GAAG,kBAAkB,CAAC,UAAU;QAChD,MAAM,OAAO,GAAG,YAAY;QAC5B,MAAM,SAAS,GAAG,YAAY;AAE9B,QAAA,IAAI,KAAK,GAAG,IAAI,CAAC,YAAY;AAE7B,QAAA,IAAI,KAAK,IAAI,SAAS,EAAE;AACpB,YAAA,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY;AACzD,YAAA,KAAK,GAAG,YAAY,GAAG,YAAY,CAAC,QAAQ,EAAE,GAAG,SAAS;;QAG9D,IAAI,UAAU,EAAE;YACZ,MAAM,aAAa,GAAG,IAAI,CAAC,kBAAkB,CAAC,aAAa,IAAI,WAAW,CAAC,OAAO;YAClF,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,aAAa,CAAC,GAAG,KAAK;;AAGzD,QAAA,QACI,CAAA,CAAA,sBAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EACI,aAAa,EAAE,IAAI,CAAC,aAAa,EACjC,kBAAkB,EAAE,kBAAkB,EACtC,aAAa,EAAE,aAAa,EAC5B,2BAA2B,EAAE,CAAC,IAAI,IAAI,CAAC,2BAA2B,CAAC,CAAC,CAAC,EACvD,eAAA,EAAA,KAAK,iBACN,IAAI,EAAA,EACjB,CAAA,CAAA,KAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,EACI,CAAA,CAAA,OAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAO,IAAI,EAAC,MAAM,EAAC,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAC1F,KAAK,EAAC,wMAAwM,EAC9M,QAAQ,EAAE,UAAU,EAAI,CAAA,EAC5B,CAAG,CAAA,GAAA,EAAA,EAAA,GAAA,EAAA,0CAAA,EAAA,KAAK,EAAC,2CAA2C,EAAE,EAAA,IAAI,CAAC,gBAAgB,CAAK,CAC9E,CAEa;;;;;;"}