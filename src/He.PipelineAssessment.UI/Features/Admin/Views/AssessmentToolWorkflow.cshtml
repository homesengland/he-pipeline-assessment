@using He.PipelineAssessment.UI.Features.Admin.AssessmentToolManagement.Queries.GetAssessmentToolWorkflows;
@model List<AssessmentToolWorkflowDto>;

@{
    ViewData["Title"] = "Assessment Tools";
    Layout = "_Layout";
}

<div class="text-center">
    <div class="text-center">
        <table class="govuk-table">
            <caption class="govuk-table__caption govuk-table__caption--m">Assessment Tool Workflow for Assessment Tool @Model.FirstOrDefault()?.AssessmentToolName</caption>
            <thead class="govuk-table__head">
                <tr class="govuk-table__row">
                    <th scope="col" class="govuk-table__header">WorkflowDefinitionId</th>
                    <th scope="col" class="govuk-table__header">IsFirstWorkflow</th>
                </tr>
            </thead>
            <tbody class="govuk-table__body">
                @foreach (var assessmentToolWorkflow in Model)
                {
                    <tr class="govuk-table__row">
                        @using (Html.BeginForm("UpdateAssessmentTool", "Admin", FormMethod.Post))
                        {
                            <td class="govuk-table__cell">
                                @Html.TextBox("workflowDefinitionId", assessmentToolWorkflow.WorkflowDefinitionId, "", new { @class = "govuk-input" })
                            </td>
                            <td class="govuk-table__cell">
                                @Html.TextBox("isFirstWorkflow", assessmentToolWorkflow.IsFirstWorkflow, "", new { @class = "govuk-input" })
                            </td>
                            <td class="govuk-table__cell">
                                @Html.AntiForgeryToken()
                                @Html.Hidden("id", assessmentToolWorkflow.Id)
                                <input class="govuk-button govuk-!-margin-0" data-module="govuk-button" id="Update" type="submit" value="Update"/>
                            </td>
                        }
                        <td class="govuk-table__cell">
                            @using (Html.BeginForm("DeleteAssessmentTool", "Admin", FormMethod.Post))
                            {
                                @Html.AntiForgeryToken()
                                @Html.Hidden("assessmentToolWorkflowId", assessmentToolWorkflow.Id)
                                <input class="govuk-button govuk-!-margin-0" data-module="govuk-button" id="Delete" type="submit" value="Delete"/>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
@*
        @using (Html.BeginForm("CreateAssessmentTool", "Admin", FormMethod.Post))
        {
            @Html.AntiForgeryToken()
            var createAssessmentToolCommand = new CreateAssessmentToolCommand()
                {
                    Order = Model.AssessmentTools.Max(x => x.Order) + 1
                };

            <div class="govuk-form-group">
                <h3 class="govuk-label-wrapper">                   
                 @Html.LabelFor(m => createAssessmentToolCommand.Name ,new {@class="govuk-label govuk-label--s"} )              
              </h3>
                @Html.TextBoxFor(m => createAssessmentToolCommand.Name, new {@class="govuk-input"})
            </div>

            
          <div class="govuk-form-group">
                <h3 class="govuk-label-wrapper">                   
                 @Html.LabelFor(m => createAssessmentToolCommand.Order ,new {@class="govuk-label govuk-label--s"} )              
              </h3>
                @Html.TextBoxFor(m => createAssessmentToolCommand.Order, new {@class="govuk-input"})
            </div>

            @Html.ValidationMessageFor(m => createAssessmentToolCommand.Name)
            @Html.ValidationMessageFor(m => createAssessmentToolCommand.Order)          
          
     
            <input class="govuk-button" data-module="govuk-button" id="Submit" type="submit" value="Create AssessmentTool" />
        }*@
    </div>
</div>